var _r=Object.defineProperty;var jr=(t,e,r)=>e in t?_r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ee=(t,e,r)=>(jr(t,typeof e!="symbol"?e+"":e,r),r);import{P as Nr,d as Me,t as Hr,T as _,E as v,O as ht,a as q,i as Kr,c as Ne,R as A,S as Re,b as M,r as E,N as ee,e as pe,f as Ge,g as We,h as Ur,u as qr,s as $r,j as zr,o as Vr,k as er,l as Oe,m as Yr,n as Gr,p as Xr,q as Zr,v as Jr,w as Qr,x as ea,y as ta,$ as ra}from"./index-5cb82b8c.js";var vt=(t=>(t[t.Prefix=0]="Prefix",t[t.Suffix=1]="Suffix",t))(vt||{}),Be=(t=>(t[t.Vowel=0]="Vowel",t[t.Consonant=1]="Consonant",t[t.Punctuation=2]="Punctuation",t[t.Exact=3]="Exact",t))(Be||{});const Z="‍",o="‌",tr=[{find:"chchh",replace:"((চ্ছ)|((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?(((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?((হ|ঃ|(হ্"+o+"?)))?)|([চছ]্?((হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?))))|([চছ]্?(হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?)))))|((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?(হ|ঃ|(হ্"+o+"?)))|([চছ]্?(হ|ঃ|(হ্"+o+"?))্?[চছ]্?(হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngkkh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?)))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngksh",replace:"(((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"kkhm",replace:"((((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))))্?ম)|((ক্?ক?)্?((হ|ঃ|(হ্"+o+"?))্?ম))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))্?ম)|(ক্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?))))্?ম))"},{find:"kkhn",replace:"((((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|((ক্?ক?)্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং])|(ক্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং]))"},{find:"kshm",replace:"((((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|(ক্?(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|([সশষ]্?((হ|ঃ|(হ্"+o+"?))্?ম))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?ম)))|((ক্?[সশষ])্?((হ|ঃ|(হ্"+o+"?))্?ম))|(ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))্?ম))"},{find:"kshn",replace:"((((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|(ক্?(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|([সশষ]্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং])))|((ক্?[সশষ])্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|(ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))"},{find:"ngch",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?)))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?[চছ])|([নণঁঙঞং]্?(গ|(জ্ঞ))্?[চছ]))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?[চছ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nggh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|([নণঁঙঞং]্?((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?((((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))্?(হ|ঃ|(হ্"+o+"?)))|((গ|(জ্ঞ))্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|((গ|(জ্ঞ))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))|(((ঙ্গ)|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(গ|(জ্ঞ)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(গ|(জ্ঞ))))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngjh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?)))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?([জয]|(জ়)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?([জয]|(জ়))))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngkh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?(হ|ঃ|(হ্"+o+"?)))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngkx",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্ষ)|(ক্?((ক্স)|ষ))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?((ক্স)|ষ))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?((ক্ষ)|(ক্?((ক্স)|ষ))))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?((ক্স)|ষ)))"},{find:"shsh",replace:"((((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))?্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"thth",replace:"((ত্থ)|(((থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))?্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))|([তটৎ]্?(হ|ঃ|(হ্"+o+"?))্?[তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"bbh",replace:"((ব?্?(ভ|(ব্?(হ|ঃ|(হ্"+o+"?)))))|((ব্?ব?)্?(হ|ঃ|(হ্"+o+"?)))|(ব্?ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"bdh",replace:"((ব্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|((ব্?[দড])্?(হ|ঃ|(হ্"+o+"?)))|(ব্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"bhl",replace:"(((ভ|(ব্?(হ|ঃ|(হ্"+o+"?))))্?ল)|(ব্?((হ|ঃ|(হ্"+o+"?))্?ল))|(ব্?(হ|ঃ|(হ্"+o+"?))্?ল))"},{find:"cch",replace:"(([চছ]্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?)))))|([চছ]্?[চছ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"chh",replace:"(((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?((হ|ঃ|(হ্"+o+"?)))?)|([চছ]্?((হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?))))|([চছ]্?(হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"cng",replace:"((চ্ঞ)|([চছ]্?(ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ)))))|([চছ]্?[নণঁঙঞং]্?(গ|(জ্ঞ)))|(([চছ]্?[নণঁঙঞং])্?(গ|(জ্ঞ))))"},{find:"dbh",replace:"(([দড]্?(ভ|(ব্?(হ|ঃ|(হ্"+o+"?)))))|(([দড]্?ব)্?(হ|ঃ|(হ্"+o+"?)))|([দড]্?ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ddh",replace:"(([দড]?্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|(([দড]্?[দড]?)্?(হ|ঃ|(হ্"+o+"?)))|([দড]্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"dgh",replace:"(([দড]্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|(([দড]্?(গ|(জ্ঞ)))্?(হ|ঃ|(হ্"+o+"?)))|([দড]্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"dhm",replace:"(((ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|([দড]্?((হ|ঃ|(হ্"+o+"?))্?ম))|([দড]্?(হ|ঃ|(হ্"+o+"?))্?ম))"},{find:"dhn",replace:"(((ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|([দড]্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|([দড]্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))"},{find:"gdh",replace:"(((গ|(জ্ঞ))্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|((গ|(জ্ঞ))্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ggh",replace:"((((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))্?(হ|ঃ|(হ্"+o+"?)))|((গ|(জ্ঞ))্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|((গ|(জ্ঞ))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ghn",replace:"(((ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|((গ|(জ্ঞ))্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))"},{find:"jjh",replace:"(((([জয]|(জ়)))?্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?)))))|(হ্য)|(((হ্য)|(([জয]|(জ়))্?(([জয]|(জ়)))?))্?(হ|ঃ|(হ্"+o+"?)))|(([জয]|(জ়))্?([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"jng",replace:"((জ্ঞ)|(([জয]|(জ়))্?(ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ)))))|(([জয]|(জ়))্?[নণঁঙঞং]্?(গ|(জ্ঞ))))"},{find:"kkh",replace:"((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ksh",replace:"((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"kxm",replace:"((((ক্ষ)|(ক্?((ক্স)|ষ)))্?ম)|(ক্?(((ক্স)|ষ)্?ম))|(ক্?((ক্স)|ষ)্?ম))"},{find:"kxn",replace:"((((ক্ষ)|(ক্?((ক্স)|ষ)))্?[নণঁঙঞং])|(ক্?(((ক্স)|ষ)্?[নণঁঙঞং]))|(ক্?((ক্স)|ষ)্?[নণঁঙঞং]))"},{find:"lbh",replace:"((ল্?(ভ|(ব্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?ব)্?(হ|ঃ|(হ্"+o+"?)))|(ল্?ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ldh",replace:"((ল্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?[দড])্?(হ|ঃ|(হ্"+o+"?)))|(ল্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"lgh",replace:"((ল্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?(গ|(জ্ঞ)))্?(হ|ঃ|(হ্"+o+"?)))|(ল্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"lkh",replace:"((ল্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?ক)্?(হ|ঃ|(হ্"+o+"?)))|(ল্?ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"lph",replace:"((ল্?(ফ|(প্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?প)্?(হ|ঃ|(হ্"+o+"?)))|(ল্?প্?(হ|ঃ|(হ্"+o+"?))))"},{find:"mbh",replace:"((ম্?(ভ|(ব্?(হ|ঃ|(হ্"+o+"?)))))|((ম্?ব)্?(হ|ঃ|(হ্"+o+"?)))|(ম্?ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"mph",replace:"((ম্?(ফ|(প্?(হ|ঃ|(হ্"+o+"?)))))|((ম্?প)্?(হ|ঃ|(হ্"+o+"?)))|(ম্?প্?(হ|ঃ|(হ্"+o+"?))))"},{find:"mth",replace:"((ম্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))|((ম্?[তটৎ])্?(হ|ঃ|(হ্"+o+"?)))|(ম্?[তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nch",replace:"(([নণঁঙঞং]্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?)))))|(((ঞ্চ)|([নণঁঙঞং]্?[চছ]))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?[চছ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ndh",replace:"(([নণঁঙঞং]্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|(([নণঁঙঞং]্?[দড])্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngc",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?[চছ])|([নণঁঙঞং]্?(গ|(জ্ঞ))্?[চছ]))"},{find:"ngg",replace:"((ঙ্গ)|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(গ|(জ্ঞ)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(গ|(জ্ঞ))))"},{find:"ngh",replace:"((ঙ্ঘ)|([নণঁঙঞং]্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngj",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?([জয]|(জ়)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?([জয]|(জ়))))"},{find:"ngk",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))"},{find:"ngm",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ম)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ম))"},{find:"ngx",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্স)|ষ))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?((ক্স)|ষ)))"},{find:"njh",replace:"(([নণঁঙঞং]্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?)))))|(((ঞ্জ)|([নণঁঙঞং]্?([জয]|(জ়))))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nkh",replace:"(([নণঁঙঞং]্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(((ঙ্ক)|([নণঁঙঞং]্?ক))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nsh",replace:"(([নণঁঙঞং]্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|([নণঁঙঞং]্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nth",replace:"(([নণঁঙঞং]্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))|(([নণঁঙঞং]্?[তটৎ])্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?[তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"phl",replace:"(((ফ|(প্?(হ|ঃ|(হ্"+o+"?))))্?ল)|(প্?((হ|ঃ|(হ্"+o+"?))্?ল))|(প্?(হ|ঃ|(হ্"+o+"?))্?ল))"},{find:"rri",replace:"(ঋ|ৃ|(([রড়ঢ়]|(হ্র))([রড়ঢ়]|(হ্র))([ইঈিী]|(য়[িী]))))"},{find:"shm",replace:"(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|([সশষ]্?((হ|ঃ|(হ্"+o+"?))্?ম))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?ম))"},{find:"shn",replace:"(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|([সশষ]্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))"},{find:"ssh",replace:"(([সশষ]?্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|([সশষ]্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"t``",replace:"ৎ"},{find:"tth",replace:"((([তটৎ]?(্?)(থ|ঠ|([তটৎ](্?)(হ|ঃ|(হ্"+o+"?)))))|(([তটৎ](্?)[তটৎ]?)(্?)(হ|ঃ|(হ্"+o+"?)))|([তটৎ](্?)[তটৎ](্?)(হ|ঃ|(হ্"+o+"?)))))"},{find:"tth",replace:"(([তটৎ]?্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))|(([তটৎ]্?[তটৎ]?)্?(হ|ঃ|(হ্"+o+"?)))|([তটৎ]্?[তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"zzh",replace:"((হ্য)|((জ|য|(জ়)|(["+o+Z+"]?্য))্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?)))))|(((হ্য)|((জ|য|(জ়)|(["+o+Z+"]?্য))্?((জ|য|(জ়)|(["+o+Z+"]?্য)))?))্?(হ|ঃ|(হ্"+o+"?)))|((জ|য|(জ়)|(["+o+Z+"]?্য))্?(জ|য|(জ়)|(["+o+Z+"]?্য))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"aa",replace:"(আ|(য়া)|া|((([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া))((([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া)))?))"},{find:"ai",replace:"(ঐ|ৈ|(([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া))([ইঈিী]|(য়[িী])))"},{find:"au",replace:"(ঔ|ৌ(([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া))([উঊুূ]|(য়[ুূ])))"},{find:"az",replace:"((([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া))((জ|য|(জ়)|(["+o+Z+"]?্য)))?)"},{find:"bb",replace:"(ব্?ব?)"},{find:"bd",replace:"(ব্?[দড])"},{find:"bh",replace:"(ভ|(ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"bv",replace:"(ব?্?ভ)"},{find:"cc",replace:"([চছ]্?[চছ]?)"},{find:"ch",replace:"(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ck",replace:"(ক|([চছ]্?ক))"},{find:"cn",replace:"([চছ]্?[নণঁঙঞং])"},{find:"db",replace:"([দড]্?ব)"},{find:"dd",replace:"([দড]্?[দড]?)"},{find:"dg",replace:"([দড]্?(গ|(জ্ঞ)))"},{find:"dh",replace:"(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ee",replace:"(ই|ঈ|ি|ী|(য়েই)|(((এ্যা?)|[এে]|(["+o+Z+"]?(্য)া)|(য়ে))((এ্যা?)|[এে]|(["+o+Z+"]?(্য)া)|(য়ে))))"},{find:"ey",replace:"(এ|ই|ে|(েই)|(এই)|ঈ|ী|(((এ্যা?)|[এে]|(["+o+Z+"]?(্য)া)|(য়ে))(য়|(ইয়)|(["+o+Z+"]?্য))))"},{find:"ff",replace:"(ফ্?ফ?)"},{find:"gg",replace:"((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))"},{find:"gh",replace:"(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"hh",replace:"((হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?)))"},{find:"hl",replace:"((হ|ঃ|(হ্"+o+"?))্?ল)"},{find:"hm",replace:"((হ|ঃ|(হ্"+o+"?))্?ম)"},{find:"hn",replace:"((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং])"},{find:"ia",replace:"((ঞা)|(([ইঈিী]|(য়[িী]))(([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া))))"},{find:"jh",replace:"(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"jj",replace:"((হ্য)|(([জয]|(জ়))্?(([জয]|(জ়)))?))"},{find:"kh",replace:"(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"kk",replace:"(ক্?ক?)"},{find:"ks",replace:"(ক্?[সশষ])"},{find:"kx",replace:"((ক্ষ)|(ক্?((ক্স)|ষ)))"},{find:"lb",replace:"(ল্?ব)"},{find:"ld",replace:"(ল্?[দড])"},{find:"lg",replace:"(ল্?(গ|(জ্ঞ)))"},{find:"lk",replace:"(ল্?ক)"},{find:"ll",replace:"((হ্ল)|(ল?্?ল)|(ল্?ল))"},{find:"lp",replace:"(ল্?প)"},{find:"mb",replace:"(ম্?ব)"},{find:"mm",replace:"((হ্ম)|(ম্?ম?))"},{find:"mp",replace:"(ম্?প)"},{find:"mt",replace:"(ম্?[তটৎ])"},{find:"nc",replace:"((ঞ্চ)|([নণঁঙঞং]্?[চছ]))"},{find:"nd",replace:"([নণঁঙঞং]্?[দড])"},{find:"ng",replace:"(ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))"},{find:"nj",replace:"((ঞ্জ)|([নণঁঙঞং]্?([জয]|(জ়))))"},{find:"nk",replace:"((ঙ্ক)|([নণঁঙঞং]্?ক))"},{find:"nn",replace:"((হ্ণ)|(হ্ন)|([নণঁঙঞং]্?[নণঁঙঞং]?))"},{find:"nt",replace:"([নণঁঙঞং]্?[তটৎ])"},{find:"oi",replace:"(ঐ|ৈ|(([ওোঅ]|(অ্য)|(য়ো?))?([ইঈিী]|(য়[িী]))))"},{find:"oo",replace:"((([উঊুূ]|(য়[ুূ])))|(([ওোঅ]|(অ্য)|(য়ো?))?([ওোঅ]|(অ্য)|(য়ো?))?))"},{find:"ou",replace:"(ঔ|ৌ|(([ওোঅ]|(অ্য)|(য়ো?))?([উঊুূ]|(য়[ুূ]))))"},{find:"ph",replace:"(ফ|(প্?(হ|ঃ|(হ্"+o+"?))))"},{find:"pp",replace:"(প্?প?)"},{find:"qq",replace:"(ক্?ক?)"},{find:"rh",replace:"((([রড়ঢ়]|(হ্র)))|(([রড়ঢ়]|(হ্র))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ri",replace:"(ঋ|ৃ|(হৃ)|(([রড়ঢ়]|(হ্র))([ইঈিী]|(য়[িী]))))"},{find:"sh",replace:"(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ss",replace:"([সশষ]্?[সশষ]?)"},{find:"th",replace:"(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"tt",replace:"([তটৎ]্?[তটৎ]?)"},{find:"uu",replace:"(ঊ|ূ|(([উঊুূ]|(য়[ুূ]))(([উঊুূ]|(য়[ুূ])))?))"},{find:"vv",replace:"(ভ্?ভ?)"},{find:"xm",replace:"(((ক্স)|ষ)্?ম)"},{find:"xn",replace:"(((ক্স)|ষ)্?[নণঁঙঞং])"},{find:"zh",replace:"(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"zz",replace:"((হ্য)|((জ|য|(জ়)|(["+o+Z+"]?্য))্?((জ|য|(জ়)|(["+o+Z+"]?্য)))?))"},{find:"0",replace:"(০|(0)|(শূন্য))"},{find:"1",replace:"(১|(1)|(এক))"},{find:"2",replace:"(২|(2)|(দুই))"},{find:"3",replace:"(৩|(3)|(তিন))"},{find:"4",replace:"(৪|(4)|(চার))"},{find:"5",replace:"(৫|(5)|(পাঁচ))"},{find:"6",replace:"((6)|৬|(ছয়))"},{find:"7",replace:"(৭|(7)|(সাত))"},{find:"8",replace:"(৮|(8)|(আট))"},{find:"9",replace:"(৯|(9)|(নয়))"},{find:"`",replace:""},{find:"a",replace:"(([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া))"},{find:"b",replace:"ব"},{find:"c",replace:"([চছ])"},{find:"d",replace:"([দড])"},{find:"e",replace:"((এ্যা?)|[এে]|(["+o+Z+"]?(্য)া)|(য়ে))"},{find:"f",replace:"ফ"},{find:"g",replace:"(গ|(জ্ঞ))"},{find:"h",replace:"(হ|ঃ|(হ্"+o+"?))"},{find:"i",replace:"([ইঈিী]|(য়[িী]))"},{find:"j",replace:"([জয]|(জ়))"},{find:"k",replace:"ক"},{find:"l",replace:"ল"},{find:"m",replace:"ম"},{find:"n",replace:"([নণঁঙঞং])"},{find:"o",replace:"(([ওোঅ]|(অ্য)|(য়ো?))?)",rules:[{matches:[{type:0,scope:2,value:"",negative:!1}],replace:"([ওোঅ]|(অ্য)|(য়ো?))"}]},{find:"p",replace:"প"},{find:"q",replace:"ক"},{find:"r",replace:"([রড়ঢ়]|(হ্র))"},{find:"s",replace:"([সশষ])"},{find:"t",replace:"([তটৎ])"},{find:"u",replace:"([উঊুূ]|(য়[ুূ]))"},{find:"v",replace:"ভ"},{find:"w",replace:"(ও|(ওয়)|(্ব))"},{find:"x",replace:"((ক্স)|ষ)"},{find:"y",replace:"(য়|(ইয়)|(["+o+Z+"]?্য))"},{find:"z",replace:"(জ|য|(জ়)|(["+o+Z+"]?্য))"}],aa=t=>t.split("").filter(e=>!oa(e)).join(""),na=t=>t.replaceAll(/\P{ASCII}/gu,e=>`\\u0${e.charCodeAt(0).toString(16)}`),rr=t=>"aeiou".includes(t.toLowerCase()),ar=t=>"bcdfghjklmnpqrstvwxyz".includes(t.toLowerCase()),ia=t=>!(rr(t)||ar(t)),sa=(t,e,r,a)=>r>=0&&a<e.length&&e.substring(r,a)===t,oa=t=>"|()[]{}^$*+?.~!@#%&-_='\";<>/\\,:`".includes(t.toLowerCase()),la=(t,e,r,a)=>{const i=e[r-1],s=e[a];e:for(const l of t){for(const c of l.matches){const d=c.type===vt.Prefix?i:s,h=c.negative;switch(c.scope){case Be.Punctuation:if((d===void 0||ia(d))===h)continue e;break;case Be.Vowel:if((d&&rr(d))===h)continue e;break;case Be.Consonant:if((d&&ar(d))===h)continue e;break;case Be.Exact:{const w=c.value;let m,f;if(c.type===vt.Prefix?(m=r-w.length,f=r):(m=a,f=a+w.length),sa(w,e,m,f)===h)continue e;break}}}return l.replace}return!1},ca=new RegExp(tr.map(t=>t.find).join("|"),"g"),nr=Object.create(null);for(const t of tr)nr[t.find]=t;const da=t=>{const e=aa(t);let r="",a=0;for(const{0:i,index:s}of e.matchAll(ca)){r+=e.substring(a,s),a=s+i.length;const l=nr[i];let c=l.replace;if(l.rules){const d=la(l.rules,e,s,a);d!==!1&&(c=d)}r+=c+"(্[যবম])?(্?)([ঃঁ]?)"}return r+=e.substring(a,e.length),na(r)},ve=new Uint32Array(65536),fa=(t,e)=>{const r=t.length,a=e.length,i=1<<r-1;let s=-1,l=0,c=r,d=r;for(;d--;)ve[t.charCodeAt(d)]|=1<<d;for(d=0;d<a;d++){let h=ve[e.charCodeAt(d)];const w=h|l;h|=(h&s)+s^s,l|=~(h|s),s&=h,l&i&&c++,s&i&&c--,l=l<<1|1,s=s<<1|~(w|l),l&=w}for(d=r;d--;)ve[t.charCodeAt(d)]=0;return c},ua=(t,e)=>{const r=e.length,a=t.length,i=[],s=[],l=Math.ceil(r/32),c=Math.ceil(a/32);for(let p=0;p<l;p++)s[p]=-1,i[p]=0;let d=0;for(;d<c-1;d++){let p=0,S=-1;const O=d*32,D=Math.min(32,a)+O;for(let C=O;C<D;C++)ve[t.charCodeAt(C)]|=1<<C;for(let C=0;C<r;C++){const L=ve[e.charCodeAt(C)],j=s[C/32|0]>>>C&1,B=i[C/32|0]>>>C&1,W=L|p,N=((L|B)&S)+S^S|L|B;let k=p|~(N|S),U=S&N;k>>>31^j&&(s[C/32|0]^=1<<C),U>>>31^B&&(i[C/32|0]^=1<<C),k=k<<1|j,U=U<<1|B,S=U|~(W|k),p=k&W}for(let C=O;C<D;C++)ve[t.charCodeAt(C)]=0}let h=0,w=-1;const m=d*32,f=Math.min(32,a-m)+m;for(let p=m;p<f;p++)ve[t.charCodeAt(p)]|=1<<p;let n=a;for(let p=0;p<r;p++){const S=ve[e.charCodeAt(p)],O=s[p/32|0]>>>p&1,D=i[p/32|0]>>>p&1,C=S|h,L=((S|D)&w)+w^w|S|D;let j=h|~(L|w),B=w&L;n+=j>>>a-1&1,n-=B>>>a-1&1,j>>>31^O&&(s[p/32|0]^=1<<p),B>>>31^D&&(i[p/32|0]^=1<<p),j=j<<1|O,B=B<<1|D,w=B|~(C|j),h=j&C}for(let p=m;p<f;p++)ve[t.charCodeAt(p)]=0;return n},Pt=(t,e)=>{if(t.length<e.length){const r=e;e=t,t=r}return e.length===0?t.length:t.length<=32?fa(t,e):ua(t,e)};class ha{constructor(){Ee(this,"phonetic");Ee(this,"dictionaryCache");Ee(this,"tempSuffixCache");this.phonetic=new Nr,this.dictionaryCache=Object.create(null),this.tempSuffixCache=Object.create(null)}getAutocorrect(e,r){const a=Me.autocorrect[e];if(a)return this.phonetic.convert(a);{const i=Me.autocorrect[va(r.middle)];if(i)return r.begin+this.phonetic.convert(i)+r.end}return null}addToTempSuffixCache(e,r,a){e in this.tempSuffixCache||(this.tempSuffixCache[e]={base:r,eng:a})}addSuffix(e){var i;const r=((i=this.dictionaryCache[e])==null?void 0:i.slice(0))??[];this.tempSuffixCache=Object.create(null);const a=e.length;if(a>=2)for(let s=1;s<=a;s++){const l=Me.suffixes[e.substring(s)];if(l===void 0)continue;const c=e.substring(0,s);if(this.dictionaryCache[c]!==void 0)for(const d of this.dictionaryCache[c]){const h=d.substring(d.length-1),w=l.substring(0,1);let m=d;if(Lt(h)&&It(w))m+="য়";else if(h=="ৎ")m=d.substring(0,d.length-1)+"ত";else if(h=="ং"){m=d.substring(0,d.length-1)+"ঙ"+l,r.push(m);continue}m+=l,r.push(m),this.addToTempSuffixCache(m,d,c)}}return r}getPreviousSelection(e,r,a){const i=e.middle,s=i.length;let l="";if(a[i])l=a[i];else if(s>=2)for(let d=1;d<s;d++){const h=i.substring(i.length-d).toLowerCase(),w=Me.suffixes[h];if(w){const m=i.substring(0,i.length-h.length);if(a[m]){const f=a[m],n=f.substring(i.length- -1),p=w.substring(0,1);l=f,Lt(n)&&It(p)?l+="য়":n=="ৎ"?l=f.substring(0,f.length-1)+"ত":n=="ং"&&(l=f.substring(0,f.length-1)+"ঙ"),l+=w,a[i]=l;break}}}const c=r.indexOf(l);return c<0?0:c}isInSuffixCache(e){return e in this.tempSuffixCache}getFromSuffixCache(e){return this.tempSuffixCache[e]}suggest(e,r){var S;const a=ir(e);a.begin=this.phonetic.convert(a.begin),a.end=this.phonetic.convert(a.end);const i=this.phonetic.convert(a.middle),s=a.middle.toLowerCase(),l=((S=this.dictionaryCache[s])==null?void 0:S.slice(0))??ga(s),c=this.getAutocorrect(e,a),d=new Set;c!==null&&(d.add(c),l.push(c)),this.dictionaryCache[s]||l.length>0&&(this.dictionaryCache[s]=l.slice(0));const h=this.addSuffix(a.middle.toLowerCase()),w=pa(i,h);for(const O of w)if(d.add(O),d.size>=10)break;const m=[...d],f=[];m.includes(i)||f.push(at(a.begin+i+a.end));const n=m.map(O=>at(a.begin+O+a.end));n.includes(e)||(Me.emoticons.has(e)?(m.unshift(e),n.unshift(e)):f.includes(e)||f.push(e));const p=10-f.length;return m.splice(p,m.length-p,...f),n.splice(p,n.length-p,...f),{prevSelection:this.getPreviousSelection(a,m,r),candidates:n,rawInput:e}}suggestWithoutDictionary(e){return{candidates:[at(this.phonetic.convert(e))],prevSelection:0,rawInput:e}}}const va=t=>t.replaceAll(/[oiudgjnrstyz]/gi,e=>e.toLowerCase()),ir=t=>{const e=t.match(/(^(?::`|\.`|[-\]~!@#%&*()_=+[{}'";<>/?|.,])*?(?=(?:,{2,}))|^(?::`|\.`|[-\]~!@#%&*()_=+[{}'";<>/?|.,])*)(.*?(?:,,)*)((?::`|\.`|[-\]~!@#%&*()_=+[{}'";<>/?|.,])*$)/)??[];return{begin:e[1]??"",middle:e[2]??"",end:e[3]??""}},It=t=>/^[\u09be\u09bf\u09c0\u09c1\u09c2\u09c3\u09c7\u09c8\u09cb\u09cc\u09c4]$/.test(t),Lt=t=>/^[\u0985\u0986\u0987\u0988\u0989\u098a\u098b\u098f\u0990\u0993\u0994\u098c\u09e1\u09be\u09bf\u09c0\u09c1\u09c2\u09c3\u09c7\u09c8\u09cb\u09cc]$/u.test(t),ga=t=>{const e=new RegExp(`^${da(t)}$`),r=Hr[t.toLowerCase().charAt(0)]??[],a=[];for(const i of r)for(const s of Me.dictionary[i])e.test(s)&&a.push(s);return a},at=t=>/^([\p{L}\p{M}]+।){2,}$/u.test(t)?t.replaceAll("।","."):t,pa=(t,e)=>e.slice(0).sort((r,a)=>{const i=Pt(t,r),s=Pt(t,a);return i<s?-1:i>s?1:0});class ma{constructor(){Ee(this,"buffer","");Ee(this,"suggestionBuilder");Ee(this,"userSelections");this.suggestionBuilder=new ha;try{const e=localStorage.getItem("AvroUserSelections");e===null?this.userSelections=Object.create(null):this.userSelections=JSON.parse(e)}catch(e){this.userSelections=Object.create(null),console.error(e,"Error while loading user selections")}}saveUserSelections(){try{localStorage.setItem("AvroUserSelections",JSON.stringify(this.userSelections))}catch(e){console.error(e,"Error while saving user selections")}}addUserSelection(e,r){const a=ir(e);this.userSelections[a.middle]=r}commit(e,r){if(this.addUserSelection(e,r),this.suggestionBuilder.isInSuffixCache(r)){const{base:a,eng:i}=this.suggestionBuilder.getFromSuffixCache(r);this.userSelections[i]||(this.userSelections[i]=a)}this.saveUserSelections(),this.closeInputSession()}get ongoingInputSession(){return this.buffer!==""}closeInputSession(){this.buffer=""}suggest(){return this.suggestionBuilder.suggest(this.buffer,this.userSelections)}getSuggestionForKey(e){return this.buffer+=e,this.suggest()}getSuggestionForBackspace(){const e=this.buffer;return this.buffer=e.substring(0,e.length-1),this.buffer===""?null:this.suggest()}}var wa={isHistory(t){return Kr(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||ht.isOperationList(t.redos[0].operations))&&(t.undos.length===0||ht.isOperationList(t.undos[0].operations))}},nt=new WeakMap,it=new WeakMap,Fe={isHistoryEditor(t){return wa.isHistory(t.history)&&v.isEditor(t)},isMerging(t){return it.get(t)},isSaving(t){return nt.get(t)},redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var r=Fe.isMerging(t);it.set(t,!1),e(),it.set(t,r)},withoutSaving(t,e){var r=Fe.isSaving(t);nt.set(t,!1),e(),nt.set(t,r)}},ba=t=>{var e=t,{apply:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:a}=e,{redos:i}=a;if(i.length>0){var s=i[i.length-1];s.selectionBefore&&_.setSelection(e,s.selectionBefore),Fe.withoutSaving(e,()=>{v.withoutNormalizing(e,()=>{for(var l of s.operations)e.apply(l)})}),a.redos.pop(),a.undos.push(s)}},e.undo=()=>{var{history:a}=e,{undos:i}=a;if(i.length>0){var s=i[i.length-1];Fe.withoutSaving(e,()=>{v.withoutNormalizing(e,()=>{var l=s.operations.map(ht.inverse).reverse();for(var c of l)e.apply(c);s.selectionBefore&&_.setSelection(e,s.selectionBefore)})}),a.redos.push(s),a.undos.pop()}},e.apply=a=>{var{operations:i,history:s}=e,{undos:l}=s,c=l[l.length-1],d=c&&c.operations[c.operations.length-1],h=Fe.isSaving(e),w=Fe.isMerging(e);if(h==null&&(h=Sa(a)),h){if(w==null&&(c==null?w=!1:i.length!==0?w=!0:w=ya(a,d)),c&&w)c.operations.push(a);else{var m={operations:[a],selectionBefore:e.selection};l.push(m)}for(;l.length>100;)l.shift();s.redos=[]}r(a)},e},ya=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&q.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&q.equals(t.path,e.path)),Sa=(t,e)=>t.type!=="set_selection",sr=Ca,or="֑-߿יִ-﷽ﹰ-ﻼ",lr="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",Ea=new RegExp("^[^"+lr+"]*["+or+"]"),Oa=new RegExp("^[^"+or+"]*["+lr+"]");function Ca(t){return t=String(t||""),Ea.test(t)?"rtl":Oa.test(t)?"ltr":"neutral"}function ka(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ot=ka,xa=typeof Ne=="object"&&Ne&&Ne.Object===Object&&Ne,Da=xa,Ta=Da,Ma=typeof self=="object"&&self&&self.Object===Object&&self,Fa=Ta||Ma||Function("return this")(),cr=Fa,Pa=cr,Ia=function(){return Pa.Date.now()},La=Ia,Aa=/\s/;function Ba(t){for(var e=t.length;e--&&Aa.test(t.charAt(e)););return e}var Ra=Ba,Wa=Ra,_a=/^\s+/;function ja(t){return t&&t.slice(0,Wa(t)+1).replace(_a,"")}var Na=ja,Ha=cr,Ka=Ha.Symbol,dr=Ka,At=dr,fr=Object.prototype,Ua=fr.hasOwnProperty,qa=fr.toString,Ae=At?At.toStringTag:void 0;function $a(t){var e=Ua.call(t,Ae),r=t[Ae];try{t[Ae]=void 0;var a=!0}catch{}var i=qa.call(t);return a&&(e?t[Ae]=r:delete t[Ae]),i}var za=$a,Va=Object.prototype,Ya=Va.toString;function Ga(t){return Ya.call(t)}var Xa=Ga,Bt=dr,Za=za,Ja=Xa,Qa="[object Null]",en="[object Undefined]",Rt=Bt?Bt.toStringTag:void 0;function tn(t){return t==null?t===void 0?en:Qa:Rt&&Rt in Object(t)?Za(t):Ja(t)}var rn=tn;function an(t){return t!=null&&typeof t=="object"}var nn=an,sn=rn,on=nn,ln="[object Symbol]";function cn(t){return typeof t=="symbol"||on(t)&&sn(t)==ln}var dn=cn,fn=Na,Wt=Ot,un=dn,_t=0/0,hn=/^[-+]0x[0-9a-f]+$/i,vn=/^0b[01]+$/i,gn=/^0o[0-7]+$/i,pn=parseInt;function mn(t){if(typeof t=="number")return t;if(un(t))return _t;if(Wt(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Wt(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=fn(t);var r=vn.test(t);return r||gn.test(t)?pn(t.slice(2),r?2:8):hn.test(t)?_t:+t}var wn=mn,bn=Ot,st=La,jt=wn,yn="Expected a function",Sn=Math.max,En=Math.min;function On(t,e,r){var a,i,s,l,c,d,h=0,w=!1,m=!1,f=!0;if(typeof t!="function")throw new TypeError(yn);e=jt(e)||0,bn(r)&&(w=!!r.leading,m="maxWait"in r,s=m?Sn(jt(r.maxWait)||0,e):s,f="trailing"in r?!!r.trailing:f);function n(W){var N=a,k=i;return a=i=void 0,h=W,l=t.apply(k,N),l}function p(W){return h=W,c=setTimeout(D,e),w?n(W):l}function S(W){var N=W-d,k=W-h,U=e-N;return m?En(U,s-k):U}function O(W){var N=W-d,k=W-h;return d===void 0||N>=e||N<0||m&&k>=s}function D(){var W=st();if(O(W))return C(W);c=setTimeout(D,S(W))}function C(W){return c=void 0,f&&a?n(W):(a=i=void 0,l)}function L(){c!==void 0&&clearTimeout(c),h=0,a=d=i=c=void 0}function j(){return c===void 0?l:C(st())}function B(){var W=st(),N=O(W);if(a=arguments,i=this,d=W,N){if(c===void 0)return p(d);if(m)return clearTimeout(c),c=setTimeout(D,e),n(d)}return c===void 0&&(c=setTimeout(D,e)),l}return B.cancel=L,B.flush=j,B}var ur=On,Cn=ur,kn=Ot,xn="Expected a function";function Dn(t,e,r){var a=!0,i=!0;if(typeof t!="function")throw new TypeError(xn);return kn(r)&&(a="leading"in r?!!r.leading:a,i="trailing"in r?!!r.trailing:i),Cn(t,e,{leading:a,maxWait:e,trailing:i})}var Tn=Dn;function Nt(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function Ht(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function ot(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return Ht(r.overflowY,e)||Ht(r.overflowX,e)||function(a){var i=function(s){if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}}(a);return!!i&&(i.clientHeight<a.scrollHeight||i.clientWidth<a.scrollWidth)}(t)}return!1}function He(t,e,r,a,i,s,l,c){return s<t&&l>e||s>t&&l<e?0:s<=t&&c<=r||l>=e&&c>=r?s-t-a:l>e&&c<r||s<t&&c>r?l-e+i:0}var Kt=function(t,e){var r=window,a=e.scrollMode,i=e.block,s=e.inline,l=e.boundary,c=e.skipOverflowHiddenElements,d=typeof l=="function"?l:function(Te){return Te!==l};if(!Nt(t))throw new TypeError("Invalid target");for(var h,w,m=document.scrollingElement||document.documentElement,f=[],n=t;Nt(n)&&d(n);){if((n=(w=(h=n).parentElement)==null?h.getRootNode().host||null:w)===m){f.push(n);break}n!=null&&n===document.body&&ot(n)&&!ot(document.documentElement)||n!=null&&ot(n,c)&&f.push(n)}for(var p=r.visualViewport?r.visualViewport.width:innerWidth,S=r.visualViewport?r.visualViewport.height:innerHeight,O=window.scrollX||pageXOffset,D=window.scrollY||pageYOffset,C=t.getBoundingClientRect(),L=C.height,j=C.width,B=C.top,W=C.right,N=C.bottom,k=C.left,U=i==="start"||i==="nearest"?B:i==="end"?N:B+L/2,Q=s==="center"?k+j/2:s==="end"?W:k,de=[],I=0;I<f.length;I++){var T=f[I],F=T.getBoundingClientRect(),x=F.height,Y=F.width,u=F.top,b=F.right,y=F.bottom,P=F.left;if(a==="if-needed"&&B>=0&&k>=0&&N<=S&&W<=p&&B>=u&&N<=y&&k>=P&&W<=b)return de;var R=getComputedStyle(T),H=parseInt(R.borderLeftWidth,10),K=parseInt(R.borderTopWidth,10),z=parseInt(R.borderRightWidth,10),te=parseInt(R.borderBottomWidth,10),X=0,$=0,ie="offsetWidth"in T?T.offsetWidth-T.clientWidth-H-z:0,re="offsetHeight"in T?T.offsetHeight-T.clientHeight-K-te:0,ae="offsetWidth"in T?T.offsetWidth===0?0:Y/T.offsetWidth:0,le="offsetHeight"in T?T.offsetHeight===0?0:x/T.offsetHeight:0;if(m===T)X=i==="start"?U:i==="end"?U-S:i==="nearest"?He(D,D+S,S,K,te,D+U,D+U+L,L):U-S/2,$=s==="start"?Q:s==="center"?Q-p/2:s==="end"?Q-p:He(O,O+p,p,H,z,O+Q,O+Q+j,j),X=Math.max(0,X+D),$=Math.max(0,$+O);else{X=i==="start"?U-u-K:i==="end"?U-y+te+re:i==="nearest"?He(u,y,x,K,te+re,U,U+L,L):U-(u+x/2)+re/2,$=s==="start"?Q-P-H:s==="center"?Q-(P+Y/2)+ie/2:s==="end"?Q-b+z+ie:He(P,b,Y,H,z+ie,Q,Q+j,j);var ne=T.scrollLeft,J=T.scrollTop;U+=J-(X=Math.max(0,Math.min(J+X/le,T.scrollHeight-x/le+re))),Q+=ne-($=Math.max(0,Math.min(ne+$/ae,T.scrollWidth-Y/ae+ie)))}de.push({el:T,top:X,left:$})}return de};function hr(t){return t===Object(t)&&Object.keys(t).length!==0}function Mn(t,e){e===void 0&&(e="auto");var r="scrollBehavior"in document.body.style;t.forEach(function(a){var i=a.el,s=a.top,l=a.left;i.scroll&&r?i.scroll({top:s,left:l,behavior:e}):(i.scrollTop=s,i.scrollLeft=l)})}function Fn(t){return t===!1?{block:"end",inline:"nearest"}:hr(t)?t:{block:"start",inline:"nearest"}}function Pn(t,e){var r=t.isConnected||t.ownerDocument.documentElement.contains(t);if(hr(e)&&typeof e.behavior=="function")return e.behavior(r?Kt(t,e):[]);if(r){var a=Fn(e);return Mn(Kt(t,a),a.behavior)}}var me={};Object.defineProperty(me,"__esModule",{value:!0});var In=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),lt={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Ln={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:In?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},vr={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var Ke=1;Ke<20;Ke++)vr["f"+Ke]=111+Ke;function Ze(t,e,r){e&&!("byKey"in e)&&(r=e,e=null),Array.isArray(t)||(t=[t]);var a=t.map(function(l){return gr(l,e)}),i=function(c){return a.some(function(d){return pr(d,c)})},s=r==null?i:i(r);return s}function An(t,e){return Ze(t,e)}function Bn(t,e){return Ze(t,{byKey:!0},e)}function gr(t,e){var r=e&&e.byKey,a={};t=t.replace("++","+add");var i=t.split("+"),s=i.length;for(var l in lt)a[lt[l]]=!1;var c=!0,d=!1,h=void 0;try{for(var w=i[Symbol.iterator](),m;!(c=(m=w.next()).done);c=!0){var f=m.value,n=f.endsWith("?")&&f.length>1;n&&(f=f.slice(0,-1));var p=Ct(f),S=lt[p];(s===1||!S)&&(r?a.key=p:a.which=mr(f)),S&&(a[S]=n?null:!0)}}catch(O){d=!0,h=O}finally{try{!c&&w.return&&w.return()}finally{if(d)throw h}}return a}function pr(t,e){for(var r in t){var a=t[r],i=void 0;if(a!=null&&(r==="key"&&e.key!=null?i=e.key.toLowerCase():r==="which"?i=a===91&&e.which===93?91:e.which:i=e[r],!(i==null&&a===!1)&&i!==a))return!1}return!0}function mr(t){t=Ct(t);var e=vr[t]||t.toUpperCase().charCodeAt(0);return e}function Ct(t){return t=t.toLowerCase(),t=Ln[t]||t,t}me.default=Ze;me.isHotkey=Ze;me.isCodeHotkey=An;var ct=me.isKeyHotkey=Bn;me.parseHotkey=gr;me.compareHotkey=pr;me.toKeyCode=mr;me.toKeyName=Ct;function Je(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rn(t,e){if(t==null)return{};var r={},a=Object.keys(t),i,s;for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Pe(t,e){if(t==null)return{};var r=Rn(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var Wn=0;class _n{constructor(){this.id="".concat(Wn++)}}var kt=new WeakMap,xt=new WeakMap,wr=new WeakMap,gt=new WeakMap,Ve=new WeakMap,Qe=new WeakMap,Ie=new WeakMap,pt=new WeakMap,et=new WeakMap,Xe=new WeakMap,mt=new WeakMap,Ce=new WeakMap,ke=new WeakMap,_e=new WeakMap,wt=new WeakMap,Dt=new WeakMap,fe=new WeakMap,ge=new WeakMap,oe=new WeakMap,be=new WeakMap,ye=new WeakMap,br=new WeakMap,Le=Symbol("placeholder"),yr=Symbol("mark-placeholder"),jn=globalThis.Text,Tt=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,Nn=t=>De(t)&&t.nodeType===8,ce=t=>De(t)&&t.nodeType===1,De=t=>{var e=Tt(t);return!!e&&t instanceof e.Node},bt=t=>{var e=t&&t.anchorNode&&Tt(t.anchorNode);return!!e&&t instanceof e.Selection},Sr=t=>De(t)&&t.nodeType===3,Hn=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,Kn=t=>{var[e,r]=t;if(ce(e)&&e.childNodes.length){var a=r===e.childNodes.length,i=a?r-1:r;for([e,i]=Er(e,i,a?"backward":"forward"),a=i<r;ce(e)&&e.childNodes.length;){var s=a?e.childNodes.length-1:0;e=qn(e,s,a?"backward":"forward")}r=a&&e.textContent!=null?e.textContent.length:0}return[e,r]},Un=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},Er=(t,e,r)=>{for(var{childNodes:a}=t,i=a[e],s=e,l=!1,c=!1;(Nn(i)||ce(i)&&i.childNodes.length===0||ce(i)&&i.getAttribute("contenteditable")==="false")&&!(l&&c);){if(s>=a.length){l=!0,s=e-1,r="backward";continue}if(s<0){c=!0,s=e+1,r="forward";continue}i=a[s],e=s,s+=r==="forward"?1:-1}return[i,e]},qn=(t,e,r)=>{var[a]=Er(t,e,r);return a},Or=t=>{var e="";if(Sr(t)&&t.nodeValue)return t.nodeValue;if(ce(t)){for(var r of Array.from(t.childNodes))e+=Or(r);var a=getComputedStyle(t).getPropertyValue("display");(a==="block"||a==="list"||t.tagName==="BR")&&(e+=`
`)}return e},$n=/data-slate-fragment="(.+?)"/m,zn=t=>{var e=t.getData("text/html"),[,r]=e.match($n)||[];return r},Mt=(t,e,r)=>{var{target:a}=e;if(ce(a)&&a.matches('[contentEditable="false"]'))return!1;var{document:i}=g.getWindow(t);if(i.contains(a))return g.hasDOMNode(t,a,{editable:!0});var s=r.find(l=>{var{addedNodes:c,removedNodes:d}=l;for(var h of c)if(h===a||h.contains(a))return!0;for(var w of d)if(w===a||w.contains(a))return!0});return!s||s===e?!1:Mt(t,s,r)},Vn=parseInt(A.version.split(".")[0],10)>=17,Yn=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ut=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),ue=typeof navigator<"u"&&/Android/.test(navigator.userAgent),yt=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),dt=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Gn=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),Cr=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Xn=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Zn=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Jn=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),Qn=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),Ye=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",we=!Xn&&!Gn&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",g={isComposing(t){return!!ke.get(t)},getWindow(t){var e=wr.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},findKey(t,e){var r=pt.get(e);return r||(r=new _n,pt.set(e,r)),r},findPath(t,e){for(var r=[],a=e;;){var i=xt.get(a);if(i==null){if(v.isEditor(a))return r;break}var s=kt.get(a);if(s==null)break;r.unshift(s),a=i}throw new Error("Unable to find the path for Slate node: ".concat(Re.stringify(e)))},findDocumentOrShadowRoot(t){var e=g.toDOMNode(t,t),r=e.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&r.getSelection!=null?r:e.ownerDocument},isFocused(t){return!!Ce.get(t)},isReadOnly(t){return!!mt.get(t)},blur(t){var e=g.toDOMNode(t,t),r=g.findDocumentOrShadowRoot(t);Ce.set(t,!1),r.activeElement===e&&e.blur()},focus(t){var e=g.toDOMNode(t,t),r=g.findDocumentOrShadowRoot(t);Ce.set(t,!0),r.activeElement!==e&&e.focus({preventScroll:!0})},deselect(t){var{selection:e}=t,r=g.findDocumentOrShadowRoot(t),a=r.getSelection();a&&a.rangeCount>0&&a.removeAllRanges(),e&&_.deselect(t)},hasDOMNode(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:a=!1}=r,i=g.toDOMNode(t,t),s;try{s=ce(e)?e:e.parentElement}catch(l){if(!l.message.includes('Permission denied to access property "nodeType"'))throw l}return s?s.closest("[data-slate-editor]")===i&&(!a||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===i||!!s.getAttribute("data-slate-zero-width")):!1},insertData(t,e){t.insertData(e)},insertFragmentData(t,e){return t.insertFragmentData(e)},insertTextData(t,e){return t.insertTextData(e)},setFragmentData(t,e,r){t.setFragmentData(e,r)},toDOMNode(t,e){var r=et.get(t),a=v.isEditor(e)?gt.get(t):r==null?void 0:r.get(g.findKey(t,e));if(!a)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Re.stringify(e)));return a},toDOMPoint(t,e){var[r]=v.node(t,e.path),a=g.toDOMNode(t,r),i;v.void(t,{at:e})&&(e={path:e.path,offset:0});for(var s="[data-slate-string], [data-slate-zero-width]",l=Array.from(a.querySelectorAll(s)),c=0,d=0;d<l.length;d++){var h=l[d],w=h.childNodes[0];if(!(w==null||w.textContent==null)){var{length:m}=w.textContent,f=h.getAttribute("data-slate-length"),n=f==null?m:parseInt(f,10),p=c+n,S=l[d+1];if(e.offset===p&&S!==null&&S!==void 0&&S.hasAttribute("data-slate-mark-placeholder")){var O,D=S.childNodes[0];i=[D instanceof jn?D:S,(O=S.textContent)!==null&&O!==void 0&&O.startsWith("\uFEFF")?1:0];break}if(e.offset<=p){var C=Math.min(m,Math.max(0,e.offset-c));i=[w,C];break}c=p}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Re.stringify(e)));return i},toDOMRange(t,e){var{anchor:r,focus:a}=e,i=M.isBackward(e),s=g.toDOMPoint(t,r),l=M.isCollapsed(e)?s:g.toDOMPoint(t,a),c=g.getWindow(t),d=c.document.createRange(),[h,w]=i?l:s,[m,f]=i?s:l,n=ce(h)?h:h.parentElement,p=!!n.getAttribute("data-slate-zero-width"),S=ce(m)?m:m.parentElement,O=!!S.getAttribute("data-slate-zero-width");return d.setStart(h,p?1:w),d.setEnd(m,O?1:f),d},toSlateNode(t,e){var r=ce(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var a=r?Qe.get(r):null;if(!a)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return a},findEventRange(t,e){"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:r,clientY:a,target:i}=e;if(r==null||a==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var s=g.toSlateNode(t,e.target),l=g.findPath(t,s);if(v.isVoid(t,s)){var c=i.getBoundingClientRect(),d=t.isInline(s)?r-c.left<c.left+c.width-r:a-c.top<c.top+c.height-a,h=v.point(t,l,{edge:d?"start":"end"}),w=d?v.before(t,h):v.after(t,h);if(w){var m=v.range(t,w);return m}}var f,{document:n}=g.getWindow(t);if(n.caretRangeFromPoint)f=n.caretRangeFromPoint(r,a);else{var p=n.caretPositionFromPoint(r,a);p&&(f=n.createRange(),f.setStart(p.offsetNode,p.offset),f.setEnd(p.offsetNode,p.offset))}if(!f)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var S=g.toSlateRange(t,f,{exactMatch:!1,suppressThrow:!1});return S},toSlatePoint(t,e,r){var{exactMatch:a,suppressThrow:i}=r,[s,l]=a?e:Kn(e),c=s.parentNode,d=null,h=0;if(c){var w,m,f=g.toDOMNode(t,t),n=c.closest('[data-slate-void="true"]'),p=n&&f.contains(n)?n:null,S=c.closest("[data-slate-leaf]"),O=null;if(S){if(d=S.closest('[data-slate-node="text"]'),d){var D=g.getWindow(t),C=D.document.createRange();C.setStart(d,0),C.setEnd(s,l);var L=C.cloneContents(),j=[...Array.prototype.slice.call(L.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(L.querySelectorAll("[contenteditable=false]"))];j.forEach(F=>{if(ue&&!a&&F.hasAttribute("data-slate-zero-width")&&F.textContent.length>0&&F.textContext!=="\uFEFF"){F.textContent.startsWith("\uFEFF")&&(F.textContent=F.textContent.slice(1));return}F.parentNode.removeChild(F)}),h=L.textContent.length,O=d}}else if(p){for(var B=p.querySelectorAll("[data-slate-leaf]"),W=0;W<B.length;W++){var N=B[W];if(g.hasDOMNode(t,N)){S=N;break}}S?(d=S.closest('[data-slate-node="text"]'),O=S,h=O.textContent.length,O.querySelectorAll("[data-slate-zero-width]").forEach(F=>{h-=F.textContent.length})):h=1}O&&h===O.textContent.length&&ue&&O.getAttribute("data-slate-zero-width")==="z"&&(w=O.textContent)!==null&&w!==void 0&&w.startsWith("\uFEFF")&&(c.hasAttribute("data-slate-zero-width")||yt&&(m=O.textContent)!==null&&m!==void 0&&m.endsWith(`

`))&&h--}if(ue&&!d&&!a){var k=c.hasAttribute("data-slate-node")?c:c.closest("[data-slate-node]");if(k&&g.hasDOMNode(t,k,{editable:!0})){var U=g.toSlateNode(t,k),{path:Q,offset:de}=v.start(t,g.findPath(t,U));return k.querySelector("[data-slate-leaf]")||(de=l),{path:Q,offset:de}}}if(!d){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var I=g.toSlateNode(t,d),T=g.findPath(t,I);return{path:T,offset:h}},toSlateRange(t,e,r){var{exactMatch:a,suppressThrow:i}=r,s=bt(e)?e.anchorNode:e.startContainer,l,c,d,h,w;if(s&&(bt(e)?(l=e.anchorNode,c=e.anchorOffset,d=e.focusNode,h=e.focusOffset,Cr&&Un(l)?w=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:w=e.isCollapsed):(l=e.startContainer,c=e.startOffset,d=e.endContainer,h=e.endOffset,w=e.collapsed)),l==null||d==null||c==null||h==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));var m=g.toSlatePoint(t,[l,c],{exactMatch:a,suppressThrow:i});if(!m)return null;var f=w?m:g.toSlatePoint(t,[d,h],{exactMatch:a,suppressThrow:i});if(!f)return null;var n={anchor:m,focus:f};return M.isExpanded(n)&&M.isForward(n)&&ce(d)&&v.void(t,{at:n.focus,mode:"highest"})&&(n=v.unhangRange(t,n,{voids:!0})),n},hasRange(t,e){var{anchor:r,focus:a}=e;return v.hasPath(t,r.path)&&v.hasPath(t,a.path)},hasTarget(t,e){return De(e)&&g.hasDOMNode(t,e)},hasEditableTarget(t,e){return De(e)&&g.hasDOMNode(t,e,{editable:!0})},hasSelectableTarget(t,e){return g.hasEditableTarget(t,e)||g.isTargetInsideNonReadonlyVoid(t,e)},isTargetInsideNonReadonlyVoid(t,e){if(mt.get(t))return!1;var r=g.hasTarget(t,e)&&g.toSlateNode(t,e);return v.isVoid(t,r)},androidScheduleFlush(t){var e;(e=Dt.get(t))===null||e===void 0||e()},androidPendingDiffs(t){return oe.get(t)}},xe=Ye?E.useLayoutEffect:E.useEffect,ei=["anchor","focus"],ti=["anchor","focus"],ri=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>e.hasOwnProperty(r)&&t[r]===e[r]),kr=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var a=t[r],i=e[r],s=Pe(a,ei),l=Pe(i,ti);if(!M.equals(a,i)||a[Le]!==i[Le]||!ri(s,l))return!1}return!0},ai=t=>{var{isLast:e,leaf:r,parent:a,text:i}=t,s=Se(),l=g.findPath(s,i),c=q.parent(l),d=r[yr]===!0;return s.isVoid(a)?A.createElement(ft,{length:ee.string(a).length}):r.text===""&&a.children[a.children.length-1]===i&&!s.isInline(a)&&v.string(s,c)===""?A.createElement(ft,{isLineBreak:!0,isMarkPlaceholder:d}):r.text===""?A.createElement(ft,{isMarkPlaceholder:d}):e&&r.text.slice(-1)===`
`?A.createElement(qt,{isTrailing:!0,text:r.text}):A.createElement(qt,{text:r.text})},qt=t=>{var{text:e,isTrailing:r=!1}=t,a=E.useRef(null),i=()=>"".concat(e??"").concat(r?`
`:"");return xe(()=>{var s=i();a.current&&a.current.textContent!==s&&(a.current.textContent=s)}),a.current?A.createElement("span",{"data-slate-string":!0,ref:a}):A.createElement("span",{"data-slate-string":!0,ref:a},i())},ft=t=>{var{length:e=0,isLineBreak:r=!1,isMarkPlaceholder:a=!1}=t,i={"data-slate-zero-width":r?"n":"z","data-slate-length":e};return a&&(i["data-slate-mark-placeholder"]=!0),A.createElement("span",Object.assign({},i),!ue||!r?"\uFEFF":null,r?A.createElement("br",null):null)},Ft=E.createContext(null),Se=()=>{var t=E.useContext(Ft);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},ni=t=>{var{leaf:e,isLast:r,text:a,parent:i,renderPlaceholder:s,renderLeaf:l=n=>A.createElement(si,Object.assign({},n))}=t,c=E.useRef(null),d=Se(),h=E.useRef(null);E.useEffect(()=>()=>{h.current&&h.current.disconnect()},[]),E.useEffect(()=>{var n=c==null?void 0:c.current;if(n?Ve.set(d,n):Ve.delete(d),h.current?(h.current.disconnect(),n&&h.current.observe(n)):n&&(h.current=new ResizeObserver(S=>{var[{target:O}]=S,D=Xe.get(d);if(D){var C="".concat(O.clientHeight,"px");D.innerHTML=':where([data-slate-editor-id="'.concat(d.id,'"]) { min-height: ').concat(C,"; }")}}),h.current.observe(n)),!n){var p=Xe.get(d);p&&(p.innerHTML="")}return()=>{Ve.delete(d)}},[c,e]);var w=A.createElement(ai,{isLast:r,leaf:e,parent:i,text:a});if(e[Le]){var m={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:c}};w=A.createElement(A.Fragment,null,s(m),w)}var f={"data-slate-leaf":!0};return l({attributes:f,children:w,leaf:e,text:a})},ii=A.memo(ni,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&pe.equals(e.leaf,t.leaf)&&e.leaf[Le]===t.leaf[Le]),si=t=>{var{attributes:e,children:r}=t;return A.createElement("span",Object.assign({},e),r)},oi=t=>{for(var{decorations:e,isLast:r,parent:a,renderPlaceholder:i,renderLeaf:s,text:l}=t,c=Se(),d=E.useRef(null),h=pe.decorations(l,e),w=g.findKey(c,l),m=[],f=0;f<h.length;f++){var n=h[f];m.push(A.createElement(ii,{isLast:r&&f===h.length-1,key:"".concat(w.id,"-").concat(f),renderPlaceholder:i,leaf:n,text:l,parent:a,renderLeaf:s}))}return xe(()=>{var p=et.get(c);d.current?(p==null||p.set(w,d.current),Ie.set(l,d.current),Qe.set(d.current,l)):(p==null||p.delete(w),Ie.delete(l))}),A.createElement("span",{"data-slate-node":"text",ref:d},m)},xr=A.memo(oi,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.text===t.text&&kr(e.decorations,t.decorations)),li=t=>{var{decorations:e,element:r,renderElement:a=C=>A.createElement(di,Object.assign({},C)),renderPlaceholder:i,renderLeaf:s,selection:l}=t,c=Se(),d=hi(),h=c.isInline(r),w=g.findKey(c,r),m=E.useCallback(C=>{var L=et.get(c);C?(L==null||L.set(w,C),Ie.set(r,C),Qe.set(C,r)):(L==null||L.delete(w),Ie.delete(r))},[c,w,r]),f=Tr({decorations:e,node:r,renderElement:a,renderPlaceholder:i,renderLeaf:s,selection:l}),n={"data-slate-node":"element",ref:m};if(h&&(n["data-slate-inline"]=!0),!h&&v.hasInlines(c,r)){var p=ee.string(r),S=sr(p);S==="rtl"&&(n.dir=S)}if(v.isVoid(c,r)){n["data-slate-void"]=!0,!d&&h&&(n.contentEditable=!1);var O=h?"span":"div",[[D]]=ee.texts(r);f=A.createElement(O,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},A.createElement(xr,{renderPlaceholder:i,decorations:[],isLast:!1,parent:r,text:D})),kt.set(D,0),xt.set(D,r)}return a({attributes:n,children:f,element:r})},ci=A.memo(li,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&kr(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&M.equals(t.selection,e.selection))),di=t=>{var{attributes:e,children:r,element:a}=t,i=Se(),s=i.isInline(a)?"span":"div";return A.createElement(s,Object.assign({},e,{style:{position:"relative"}}),r)},Dr=E.createContext(()=>[]),fi=()=>E.useContext(Dr),ui=E.createContext(!1),Tr=t=>{for(var{decorations:e,node:r,renderElement:a,renderPlaceholder:i,renderLeaf:s,selection:l}=t,c=fi(),d=Se(),h=g.findPath(d,r),w=[],m=Ge.isElement(r)&&!d.isInline(r)&&v.hasInlines(d,r),f=0;f<r.children.length;f++){var n=h.concat(f),p=r.children[f],S=g.findKey(d,p),O=v.range(d,n),D=l&&M.intersection(O,l),C=c([p,n]);for(var L of e){var j=M.intersection(L,O);j&&C.push(j)}Ge.isElement(p)?w.push(A.createElement(ui.Provider,{key:"provider-".concat(S.id),value:!!D},A.createElement(ci,{decorations:C,element:p,key:S.id,renderElement:a,renderPlaceholder:i,renderLeaf:s,selection:D}))):w.push(A.createElement(xr,{decorations:C,key:S.id,isLast:m&&f===r.children.length-1,parent:r,renderPlaceholder:i,renderLeaf:s,text:p})),kt.set(p,f),xt.set(p,r)}return w},Mr=E.createContext(!1),hi=()=>E.useContext(Mr),Fr=E.createContext(null),Pr=()=>{var t=E.useContext(Fr);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e},vi=3,gi={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},pi={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},mi={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},V=t=>{var e=gi[t],r=pi[t],a=mi[t],i=e&&ct(e),s=r&&ct(r),l=a&&ct(a);return c=>!!(i&&i(c)||Ut&&s&&s(c)||!Ut&&l&&l(c))},G={isBold:V("bold"),isCompose:V("compose"),isMoveBackward:V("moveBackward"),isMoveForward:V("moveForward"),isDeleteBackward:V("deleteBackward"),isDeleteForward:V("deleteForward"),isDeleteLineBackward:V("deleteLineBackward"),isDeleteLineForward:V("deleteLineForward"),isDeleteWordBackward:V("deleteWordBackward"),isDeleteWordForward:V("deleteWordForward"),isExtendBackward:V("extendBackward"),isExtendForward:V("extendForward"),isExtendLineBackward:V("extendLineBackward"),isExtendLineForward:V("extendLineForward"),isItalic:V("italic"),isMoveLineBackward:V("moveLineBackward"),isMoveLineForward:V("moveLineForward"),isMoveWordBackward:V("moveWordBackward"),isMoveWordForward:V("moveWordForward"),isRedo:V("redo"),isSoftBreak:V("insertSoftBreak"),isSplitBlock:V("splitBlock"),isTransposeCharacter:V("transposeCharacter"),isUndo:V("undo")},wi=(t,e)=>{var r=[],a=()=>{r=[]},i=l=>{if(e.current){var c=l.filter(d=>Mt(t,d,l));r.push(...c)}};function s(){r.reverse().forEach(l=>{if(l.type==="characterData"){l.target.textContent=l.oldValue;return}l.removedNodes.forEach(c=>{l.target.insertBefore(c,l.nextSibling)}),l.addedNodes.forEach(c=>{l.target.removeChild(c)})}),a()}return{registerMutations:i,restoreDOM:s,clear:a}},bi={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class Ir extends E.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(r.current,bi)}componentDidMount(){var{receivedUserInput:e}=this.props,r=this.context;this.manager=wi(r,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,r,a,i=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(i!=null&&i.length){var s;(s=this.manager)===null||s===void 0||s.registerMutations(i)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(a=this.manager)===null||a===void 0||a.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}Ir.contextType=Ft;var yi=ue?Ir:t=>{var{children:e}=t;return A.createElement(A.Fragment,null,e)};function Si(t,e){var{path:r,diff:a}=e;if(!v.hasPath(t,r))return!1;var i=ee.get(t,r);if(!pe.isText(i))return!1;if(a.start!==i.text.length||a.text.length===0)return i.text.slice(a.start,a.start+a.text.length)===a.text;var s=q.next(r);if(!v.hasPath(t,s))return!1;var l=ee.get(t,s);return pe.isText(l)&&l.text.startsWith(a.text)}function Ei(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];return r.reduce((i,s)=>i.slice(0,s.start)+s.text+i.slice(s.end),t)}function Oi(t,e){for(var r=Math.min(t.length,e.length),a=0;a<r;a++)if(t.charAt(a)!==e.charAt(a))return a;return r}function Ci(t,e,r){for(var a=Math.min(t.length,e.length,r),i=0;i<a;i++)if(t.charAt(t.length-i-1)!==e.charAt(e.length-i-1))return i;return a}function Lr(t,e){var{start:r,end:a,text:i}=e,s=t.slice(r,a),l=Oi(s,i),c=Math.min(s.length-l,i.length-l),d=Ci(s,i,c),h={start:r+l,end:a-d,text:i.slice(l,i.length-d)};return h.start===h.end&&h.text.length===0?null:h}function ki(t,e,r){var a=Math.min(e.start,r.start),i=Math.max(0,Math.min(e.start+e.text.length,r.end)-r.start),s=Ei(t,e,r),l=Math.max(r.start+r.text.length,e.start+e.text.length+(e.start+e.text.length>r.start?r.text.length:0)-i),c=s.slice(a,l),d=Math.max(e.end,r.end-e.text.length+(e.end-e.start));return Lr(t,{start:a,end:d,text:c})}function xi(t){var{path:e,diff:r}=t;return{anchor:{path:e,offset:r.start},focus:{path:e,offset:r.end}}}function St(t,e){var{path:r,offset:a}=e;if(!v.hasPath(t,r))return null;var i=ee.get(t,r);if(!pe.isText(i))return null;var s=v.above(t,{match:c=>v.isBlock(t,c),at:r});if(!s)return null;for(;a>i.text.length;){var l=v.next(t,{at:r,match:pe.isText});if(!l||!q.isDescendant(l[1],s[1]))return null;a-=i.text.length,i=l[0],r=l[1]}return{path:r,offset:a}}function $t(t,e){var r=St(t,e.anchor);if(!r)return null;if(M.isCollapsed(e))return{anchor:r,focus:r};var a=St(t,e.focus);return a?{anchor:r,focus:a}:null}function Et(t,e,r){var a=oe.get(t),i=a==null?void 0:a.find(w=>{var{path:m}=w;return q.equals(m,e.path)});if(!i||e.offset<=i.diff.start)return We.transform(e,r,{affinity:"backward"});var{diff:s}=i;if(e.offset<=s.start+s.text.length){var l={path:e.path,offset:s.start},c=We.transform(l,r,{affinity:"backward"});return c?{path:c.path,offset:c.offset+e.offset-s.start}:null}var d={path:e.path,offset:e.offset-s.text.length+s.end-s.start},h=We.transform(d,r,{affinity:"backward"});return h?r.type==="split_node"&&q.equals(r.path,e.path)&&d.offset<r.position&&s.start<r.position?h:{path:h.path,offset:h.offset+s.text.length-s.end+s.start}:null}function zt(t,e,r){var a=Et(t,e.anchor,r);if(!a)return null;if(M.isCollapsed(e))return{anchor:a,focus:a};var i=Et(t,e.focus,r);return i?{anchor:a,focus:i}:null}function Di(t,e){var{path:r,diff:a,id:i}=t;switch(e.type){case"insert_text":return!q.equals(e.path,r)||e.offset>=a.end?t:e.offset<=a.start?{diff:{start:e.text.length+a.start,end:e.text.length+a.end,text:a.text},id:i,path:r}:{diff:{start:a.start,end:a.end+e.text.length,text:a.text},id:i,path:r};case"remove_text":return!q.equals(e.path,r)||e.offset>=a.end?t:e.offset+e.text.length<=a.start?{diff:{start:a.start-e.text.length,end:a.end-e.text.length,text:a.text},id:i,path:r}:{diff:{start:a.start,end:a.end-e.text.length,text:a.text},id:i,path:r};case"split_node":return!q.equals(e.path,r)||e.position>=a.end?{diff:a,id:i,path:q.transform(r,e,{affinity:"backward"})}:e.position>a.start?{diff:{start:a.start,end:Math.min(e.position,a.end),text:a.text},id:i,path:r}:{diff:{start:a.start-e.position,end:a.end-e.position,text:a.text},id:i,path:q.transform(r,e,{affinity:"forward"})};case"merge_node":return q.equals(e.path,r)?{diff:{start:a.start+e.position,end:a.end+e.position,text:a.text},id:i,path:q.transform(r,e)}:{diff:a,id:i,path:q.transform(r,e)}}var s=q.transform(r,e);return s?{diff:a,path:s,id:i}:null}function Vt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,a)}return r}function Ue(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vt(Object(r),!0).forEach(function(a){Je(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var Ti=25,Mi=200,Fi=function(){};function Pi(t){var{editor:e,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:a}=t,i=!1,s=null,l=null,c=null,d=0,h=!1,w=()=>{var I=ye.get(e);if(ye.delete(e),I){var{selection:T}=e,F=$t(e,I);F&&(!T||!M.equals(F,T))&&_.select(e,F)}},m=()=>{var I=be.get(e);if(be.delete(e),!!I){if(I.at){var T=We.isPoint(I.at)?St(e,I.at):$t(e,I.at);if(!T)return;var F=v.range(e,T);(!e.selection||!M.equals(e.selection,F))&&_.select(e,T)}I.run()}},f=()=>{var I;if(l&&(clearTimeout(l),l=null),c&&(clearTimeout(c),c=null),!j()&&!L()){w();return}i||(i=!0,setTimeout(()=>i=!1)),L()&&(i="action");var T=e.selection&&v.rangeRef(e,e.selection,{affinity:"forward"});ge.set(e,e.marks),Fi("flush",be.get(e),oe.get(e));for(var F=!!((I=oe.get(e))!==null&&I!==void 0&&I.length),x;x=(Y=oe.get(e))===null||Y===void 0?void 0:Y[0];){var Y,u,b=fe.get(e);b!==void 0&&(fe.delete(e),e.marks=b),b&&h===!1&&(h=null);var y=xi(x);(!e.selection||!M.equals(e.selection,y))&&_.select(e,y),x.diff.text?v.insertText(e,x.diff.text):v.deleteFragment(e),oe.set(e,(u=oe.get(e))===null||u===void 0?void 0:u.filter(H=>{var{id:K}=H;return K!==x.id})),Si(e,x)||(F=!1,be.delete(e),ge.delete(e),i="action",ye.delete(e),r.cancel(),a.cancel(),T==null||T.unref())}var P=T==null?void 0:T.unref();if(P&&!ye.get(e)&&(!e.selection||!M.equals(P,e.selection))&&_.select(e,P),L()){m();return}F&&r(),r.flush(),a.flush(),w();var R=ge.get(e);ge.delete(e),R!==void 0&&(e.marks=R,e.onChange())},n=I=>{s&&clearTimeout(s),s=setTimeout(()=>{ke.set(e,!1),f()},Ti)},p=I=>{ke.set(e,!0),s&&(clearTimeout(s),s=null)},S=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,F=Ve.get(e);if(F){if(j()||T){F.style.display="none";return}F.style.removeProperty("display")}},O=(I,T)=>{var F,x=(F=oe.get(e))!==null&&F!==void 0?F:[];oe.set(e,x);var Y=ee.leaf(e,I),u=x.findIndex(P=>q.equals(P.path,I));if(u<0){var b=Lr(Y.text,T);b&&x.push({path:I,diff:T,id:d++}),S();return}var y=ki(Y.text,x[u].diff,T);if(!y){x.splice(u,1),S();return}x[u]=Ue(Ue({},x[u]),{},{diff:y})},D=function(T){var{at:F}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};h=!1,ye.delete(e),r.cancel(),a.cancel(),L()&&f(),be.set(e,{at:F,run:T}),c=setTimeout(f)},C=I=>{var T;l&&(clearTimeout(l),l=null);var{inputType:F}=I,x=null,Y=I.dataTransfer||I.data||void 0;h!==!1&&F!=="insertText"&&F!=="insertCompositionText"&&(h=!1);var[u]=I.getTargetRanges();u&&(x=g.toSlateRange(e,u,{exactMatch:!1,suppressThrow:!0}));var b=g.getWindow(e),y=b.getSelection();if(!x&&y&&(u=y,x=g.toSlateRange(e,y,{exactMatch:!1,suppressThrow:!0})),x=(T=x)!==null&&T!==void 0?T:e.selection,!!x){if(M.isExpanded(x)&&F.startsWith("delete")){var[P,R]=M.edges(x),H=ee.leaf(e,P.path);if(H.text.length===P.offset&&R.offset===0){var K=v.next(e,{at:P.path,match:pe.isText});K&&q.equals(K[1],R.path)&&(x={anchor:R,focus:R})}}if(M.isExpanded(x)&&F.startsWith("delete")){if(q.equals(x.anchor.path,x.focus.path)){var[z,te]=M.edges(x);return O(x.anchor.path,{text:"",end:te.offset,start:z.offset})}var X=F.endsWith("Backward")?"backward":"forward";return D(()=>v.deleteFragment(e,{direction:X}),{at:x})}switch(F){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return D(()=>v.deleteFragment(e),{at:x});case"deleteContent":case"deleteContentForward":{var{anchor:$}=x;if(M.isCollapsed(x)){var ie=ee.leaf(e,$.path);if($.offset<ie.text.length)return O($.path,{text:"",start:$.offset,end:$.offset+1})}return D(()=>v.deleteForward(e),{at:x})}case"deleteContentBackward":{var re,{anchor:ae}=x,le=bt(u)?u.isCollapsed:!!((re=u)!==null&&re!==void 0&&re.collapsed);return le&&M.isCollapsed(x)&&ae.offset>0?O(ae.path,{text:"",start:ae.offset-1,end:ae.offset}):D(()=>v.deleteBackward(e),{at:x})}case"deleteEntireSoftLine":return D(()=>{v.deleteBackward(e,{unit:"line"}),v.deleteForward(e,{unit:"line"})},{at:x});case"deleteHardLineBackward":return D(()=>v.deleteBackward(e,{unit:"block"}),{at:x});case"deleteSoftLineBackward":return D(()=>v.deleteBackward(e,{unit:"line"}),{at:x});case"deleteHardLineForward":return D(()=>v.deleteForward(e,{unit:"block"}),{at:x});case"deleteSoftLineForward":return D(()=>v.deleteForward(e,{unit:"line"}),{at:x});case"deleteWordBackward":return D(()=>v.deleteBackward(e,{unit:"word"}),{at:x});case"deleteWordForward":return D(()=>v.deleteForward(e,{unit:"word"}),{at:x});case"insertLineBreak":return D(()=>v.insertSoftBreak(e),{at:x});case"insertParagraph":return D(()=>v.insertBreak(e),{at:x});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if((Y==null?void 0:Y.constructor.name)==="DataTransfer")return D(()=>g.insertData(e,Y),{at:x});if(typeof Y=="string"&&Y.includes(`
`))return D(()=>v.insertSoftBreak(e),{at:M.end(x)});var ne=Y??"";if(fe.get(e)&&(ne=ne.replace("\uFEFF","")),q.equals(x.anchor.path,x.focus.path)){var[J,Te]=M.edges(x),he={start:J.offset,end:Te.offset,text:ne};if(ne&&h&&F==="insertCompositionText"){var je=h.start+h.text.search(/\S|$/),tt=he.start+he.text.search(/\S|$/);tt===je+1&&he.end===h.start+h.text.length?(he.start-=1,h=null,Q()):h=!1}else F==="insertText"?h===null?h=he:h&&M.isCollapsed(x)&&h.end+h.text.length===J.offset?h=Ue(Ue({},h),{},{text:h.text+ne}):h=!1:h=!1;O(J.path,he);return}return D(()=>v.insertText(e,ne),{at:x})}}}},L=()=>!!be.get(e),j=()=>{var I;return!!((I=oe.get(e))!==null&&I!==void 0&&I.length)},B=()=>L()||j(),W=()=>i,N=I=>{ye.set(e,I),l&&(clearTimeout(l),l=null);var{selection:T}=e;if(I){var F=!T||!q.equals(T.anchor.path,I.anchor.path),x=!T||!q.equals(T.anchor.path.slice(0,-1),I.anchor.path.slice(0,-1));(F&&h||x)&&(h=!1),(F||!j())&&(l=setTimeout(f,Mi))}},k=()=>{(L()||!j())&&f()},U=I=>{j()||(S(!0),setTimeout(S))},Q=()=>{L()||(c=setTimeout(f))},de=I=>{if(!(j()||L())&&I.some(F=>Mt(e,F,I))){var T;(T=br.get(e))===null||T===void 0||T()}};return{flush:f,scheduleFlush:Q,hasPendingDiffs:j,hasPendingAction:L,hasPendingChanges:B,isFlushing:W,handleUserSelect:N,handleCompositionEnd:n,handleCompositionStart:p,handleDOMBeforeInput:C,handleKeyDown:U,handleDomMutations:de,handleInput:k}}function Ii(){var t=E.useRef(!1);return E.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}function Li(t,e,r){var[a]=E.useState(()=>new MutationObserver(e));xe(()=>{a.takeRecords()}),E.useEffect(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(t.current,r),()=>a.disconnect()},[])}var Ai=["node"];function Yt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,a)}return r}function Bi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yt(Object(r),!0).forEach(function(a){Je(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var Ri={subtree:!0,childList:!0,characterData:!0};function Wi(t){var{node:e}=t,r=Pe(t,Ai);if(!ue)return null;var a=Se(),i=Ii(),[s]=E.useState(()=>Pi(Bi({editor:a},r)));return Li(e,s.handleDomMutations,Ri),Dt.set(a,s.scheduleFlush),i&&s.flush(),s}function _i(){var t=Se(),e=E.useRef(!1),r=E.useRef(0),a=E.useCallback(()=>{if(!e.current){e.current=!0;var i=g.getWindow(t);i.cancelAnimationFrame(r.current),r.current=i.requestAnimationFrame(()=>{e.current=!1})}},[]);return E.useEffect(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:e,onUserInput:a}}var ji=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as"],Ni=["text"];function Gt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,a)}return r}function ut(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Gt(Object(r),!0).forEach(function(a){Je(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var Hi=t=>A.createElement(A.Fragment,null,Tr(t)),qe=0,Ki=t=>{var{autoFocus:e,decorate:r=Ui,onDOMBeforeInput:a,placeholder:i,readOnly:s=!1,renderElement:l,renderLeaf:c,renderPlaceholder:d=u=>A.createElement(Ar,Object.assign({},u)),scrollSelectionIntoView:h=qi,style:w={},as:m="div"}=t,f=Pe(t,ji),n=Pr(),[p,S]=E.useState(!1),O=E.useRef(null),D=E.useRef([]),{onUserInput:C,receivedUserInput:L}=_i(),[,j]=E.useReducer(u=>u+1,0);br.set(n,j),mt.set(n,s);var B=E.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);E.useEffect(()=>{O.current&&e&&O.current.focus()},[e]);var W=E.useCallback(Tn(()=>{if((ue||!g.isComposing(n))&&(!B.isUpdatingSelection||k!=null&&k.isFlushing())&&!B.isDraggingInternally){var u=g.findDocumentOrShadowRoot(n),{activeElement:b}=u,y=g.toDOMNode(n,n),P=u.getSelection();if(b===y?(B.latestElement=b,Ce.set(n,!0)):Ce.delete(n),!P)return _.deselect(n);var{anchorNode:R,focusNode:H}=P,K=g.hasEditableTarget(n,R)||g.isTargetInsideNonReadonlyVoid(n,R),z=g.hasEditableTarget(n,H)||g.isTargetInsideNonReadonlyVoid(n,H);if(K&&z){var te=g.toSlateRange(n,P,{exactMatch:!1,suppressThrow:!0});te&&(!g.isComposing(n)&&!(k!=null&&k.hasPendingChanges())&&!(k!=null&&k.isFlushing())?_.select(n,te):k==null||k.handleUserSelect(te))}s&&(!K||!z)&&_.deselect(n)}},100),[s]),N=E.useMemo(()=>ur(W,0),[W]),k=Wi({node:O,onDOMSelectionChange:W,scheduleOnDOMSelectionChange:N});xe(()=>{var u;O.current&&(u=Tt(O.current))?(wr.set(n,u),gt.set(n,O.current),Ie.set(n,O.current),Qe.set(O.current,n)):Ie.delete(n);var{selection:b}=n,y=g.findDocumentOrShadowRoot(n),P=y.getSelection();if(!(!P||!g.isFocused(n)||k!=null&&k.hasPendingAction())){var R=X=>{var $=P.type!=="None";if(!(!b&&!$)){var ie=gt.get(n),re=!1;if(ie.contains(P.anchorNode)&&ie.contains(P.focusNode)&&(re=!0),$&&re&&b&&!X){var ae=g.toSlateRange(n,P,{exactMatch:!0,suppressThrow:!0});if(ae&&M.equals(ae,b)){var le;if(!B.hasMarkPlaceholder)return;var{anchorNode:ne}=P;if(ne!=null&&(le=ne.parentElement)!==null&&le!==void 0&&le.hasAttribute("data-slate-mark-placeholder"))return}}if(b&&!g.hasRange(n,b)){n.selection=g.toSlateRange(n,P,{exactMatch:!1,suppressThrow:!0});return}B.isUpdatingSelection=!0;var J=b&&g.toDOMRange(n,b);return J?(M.isBackward(b)?P.setBaseAndExtent(J.endContainer,J.endOffset,J.startContainer,J.startOffset):P.setBaseAndExtent(J.startContainer,J.startOffset,J.endContainer,J.endOffset),h(n,J)):P.removeAllRanges(),J}},H=R(),K=(k==null?void 0:k.isFlushing())==="action";if(!ue||!K){setTimeout(()=>{if(H&&yt){var X=g.toDOMNode(n,n);X.focus()}B.isUpdatingSelection=!1});return}var z=null,te=requestAnimationFrame(()=>{if(K){var X=$=>{try{var ie=g.toDOMNode(n,n);ie.focus(),R($)}catch{}};X(),z=setTimeout(()=>{X(!0),B.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(te),z&&clearTimeout(z)}}});var U=E.useCallback(u=>{if(C(),!s&&g.hasEditableTarget(n,u.target)&&!$i(u,a)){var b;if(k)return k.handleDOMBeforeInput(u);N.flush(),W.flush();var{selection:y}=n,{inputType:P}=u,R=u.dataTransfer||u.data||void 0,H=P==="insertCompositionText"||P==="deleteCompositionText";if(H&&g.isComposing(n))return;var K=!1;if(P==="insertText"&&y&&M.isCollapsed(y)&&u.data&&u.data.length===1&&/[a-z ]/i.test(u.data)&&y.anchor.offset!==0){var z,te;K=!0,n.marks&&(K=!1);var{anchor:X}=y,[$,ie]=g.toDOMPoint(n,X),re=(z=$.parentElement)===null||z===void 0?void 0:z.closest("a"),ae=g.getWindow(n);if(K&&re&&g.hasDOMNode(n,re)){var le,ne=ae==null?void 0:ae.document.createTreeWalker(re,NodeFilter.SHOW_TEXT).lastChild();ne===$&&((le=ne.textContent)===null||le===void 0?void 0:le.length)===ie&&(K=!1)}if(K&&$.parentElement&&(ae==null||(te=ae.getComputedStyle($.parentElement))===null||te===void 0?void 0:te.whiteSpace)==="pre"){var J=v.above(n,{at:X.path,match:Wr=>v.isBlock(n,Wr)});J&&ee.string(J[0]).includes("	")&&(K=!1)}}if(!P.startsWith("delete")||P.startsWith("deleteBy")){var[Te]=u.getTargetRanges();if(Te){var he=g.toSlateRange(n,Te,{exactMatch:!1,suppressThrow:!1});if(!y||!M.equals(y,he)){K=!1;var je=!H&&n.selection&&v.rangeRef(n,n.selection);_.select(n,he),je&&_e.set(n,je)}}}if(H)return;if(K||u.preventDefault(),y&&M.isExpanded(y)&&P.startsWith("delete")){var tt=P.endsWith("Backward")?"backward":"forward";v.deleteFragment(n,{direction:tt});return}switch(P){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{v.deleteFragment(n);break}case"deleteContent":case"deleteContentForward":{v.deleteForward(n);break}case"deleteContentBackward":{v.deleteBackward(n);break}case"deleteEntireSoftLine":{v.deleteBackward(n,{unit:"line"}),v.deleteForward(n,{unit:"line"});break}case"deleteHardLineBackward":{v.deleteBackward(n,{unit:"block"});break}case"deleteSoftLineBackward":{v.deleteBackward(n,{unit:"line"});break}case"deleteHardLineForward":{v.deleteForward(n,{unit:"block"});break}case"deleteSoftLineForward":{v.deleteForward(n,{unit:"line"});break}case"deleteWordBackward":{v.deleteBackward(n,{unit:"word"});break}case"deleteWordForward":{v.deleteForward(n,{unit:"word"});break}case"insertLineBreak":v.insertSoftBreak(n);break;case"insertParagraph":{v.insertBreak(n);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{P==="insertFromComposition"&&g.isComposing(n)&&(S(!1),ke.set(n,!1)),(R==null?void 0:R.constructor.name)==="DataTransfer"?g.insertData(n,R):typeof R=="string"&&(K?D.current.push(()=>v.insertText(n,R)):v.insertText(n,R));break}}var rt=(b=_e.get(n))===null||b===void 0?void 0:b.unref();_e.delete(n),rt&&(!n.selection||!M.equals(n.selection,rt))&&_.select(n,rt)}},[s,a]);xe(()=>(O.current&&we&&O.current.addEventListener("beforeinput",U),()=>{O.current&&we&&O.current.removeEventListener("beforeinput",U)}),[U]),xe(()=>{var u=g.getWindow(n);return u.document.addEventListener("selectionchange",N),()=>{u.document.removeEventListener("selectionchange",N)}},[N]);var Q=r([n,[]]);if(i&&n.children.length===1&&Array.from(ee.texts(n)).length===1&&ee.string(n)===""&&!p){var de=v.start(n,[]);Q.push({[Le]:!0,placeholder:i,anchor:de,focus:de})}var{marks:I}=n;if(B.hasMarkPlaceholder=!1,n.selection&&M.isCollapsed(n.selection)&&I){var{anchor:T}=n.selection,F=ee.leaf(n,T.path),x=Pe(F,Ni);if(!pe.equals(F,I,{loose:!0})){B.hasMarkPlaceholder=!0;var Y=Object.fromEntries(Object.keys(x).map(u=>[u,null]));Q.push(ut(ut(ut({[yr]:!0},Y),I),{},{anchor:T,focus:T}))}}return E.useEffect(()=>{setTimeout(()=>{var{selection:u}=n;if(u){var{anchor:b}=u,y=ee.leaf(n,b.path);if(I&&!pe.equals(y,I,{loose:!0})){fe.set(n,I);return}}fe.delete(n)})}),E.useEffect(()=>{if(qe++,qe===1){var u=document.createElement("style");u.setAttribute("data-slate-default-styles","true"),u.innerHTML=":where([data-slate-editor]) {position: relative;outline: none;white-space: pre-wrap;word-wrap: break-word;}",document.head.appendChild(u)}return()=>{var b;qe--,qe<=0&&((b=document.querySelector("style[data-slate-default-styles]"))===null||b===void 0||b.remove())}},[]),E.useEffect(()=>{var u=document.createElement("style");return document.head.appendChild(u),Xe.set(n,u),()=>{u.remove(),Xe.delete(n)}},[]),A.createElement(Mr.Provider,{value:s},A.createElement(Dr.Provider,{value:r},A.createElement(yi,{node:O,receivedUserInput:L},A.createElement(m,Object.assign({role:s?void 0:"textbox","aria-multiline":s?void 0:!0},f,{spellCheck:we||!Ye?f.spellCheck:!1,autoCorrect:we||!Ye?f.autoCorrect:"false",autoCapitalize:we||!Ye?f.autoCapitalize:"false","data-slate-editor":!0,"data-slate-editor-id":n.id,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:O,style:w,onBeforeInput:E.useCallback(u=>{if(!we&&!s&&!se(u,f.onBeforeInput)&&g.hasSelectableTarget(n,u.target)&&(u.preventDefault(),!g.isComposing(n))){var b=u.data;v.insertText(n,b)}},[s]),onInput:E.useCallback(u=>{if(k){k.handleInput();return}for(var b of D.current)b();D.current=[]},[]),onBlur:E.useCallback(u=>{if(!(s||B.isUpdatingSelection||!g.hasSelectableTarget(n,u.target)||se(u,f.onBlur))){var b=g.findDocumentOrShadowRoot(n);if(B.latestElement!==b.activeElement){var{relatedTarget:y}=u,P=g.toDOMNode(n,n);if(y!==P&&!(ce(y)&&y.hasAttribute("data-slate-spacer"))){if(y!=null&&De(y)&&g.hasDOMNode(n,y)){var R=g.toSlateNode(n,y);if(Ge.isElement(R)&&!n.isVoid(R))return}if(dt){var H=b.getSelection();H==null||H.removeAllRanges()}Ce.delete(n)}}}},[s,f.onBlur]),onClick:E.useCallback(u=>{if(g.hasTarget(n,u.target)&&!se(u,f.onClick)&&De(u.target)){var b=g.toSlateNode(n,u.target),y=g.findPath(n,b);if(!v.hasPath(n,y)||ee.get(n,y)!==b)return;if(u.detail===vi&&y.length>=1){var P=y;if(!v.isBlock(n,b)){var R,H=v.above(n,{match:re=>v.isBlock(n,re),at:y});P=(R=H==null?void 0:H[1])!==null&&R!==void 0?R:y.slice(0,1)}var K=v.range(n,P);_.select(n,K);return}if(s)return;var z=v.start(n,y),te=v.end(n,y),X=v.void(n,{at:z}),$=v.void(n,{at:te});if(X&&$&&q.equals(X[1],$[1])){var ie=v.range(n,z);_.select(n,ie)}}},[s,f.onClick]),onCompositionEnd:E.useCallback(u=>{if(g.hasSelectableTarget(n,u.target)){if(g.isComposing(n)&&(S(!1),ke.set(n,!1)),k==null||k.handleCompositionEnd(u),se(u,f.onCompositionEnd)||ue)return;if(!dt&&!Zn&&!Yn&&!Qn&&!Jn&&u.data){var b=fe.get(n);fe.delete(n),b!==void 0&&(ge.set(n,n.marks),n.marks=b),v.insertText(n,u.data);var y=ge.get(n);ge.delete(n),y!==void 0&&(n.marks=y)}}},[f.onCompositionEnd]),onCompositionUpdate:E.useCallback(u=>{g.hasSelectableTarget(n,u.target)&&!se(u,f.onCompositionUpdate)&&(g.isComposing(n)||(S(!0),ke.set(n,!0)))},[f.onCompositionUpdate]),onCompositionStart:E.useCallback(u=>{if(g.hasSelectableTarget(n,u.target)){if(k==null||k.handleCompositionStart(u),se(u,f.onCompositionStart)||ue)return;S(!0);var{selection:b}=n;if(b){if(M.isExpanded(b)){v.deleteFragment(n);return}var y=v.above(n,{match:H=>v.isInline(n,H),mode:"highest"});if(y){var[,P]=y;if(v.isEnd(n,b.anchor,P)){var R=v.after(n,P);_.setSelection(n,{anchor:R,focus:R})}}}}},[f.onCompositionStart]),onCopy:E.useCallback(u=>{g.hasSelectableTarget(n,u.target)&&!se(u,f.onCopy)&&(u.preventDefault(),g.setFragmentData(n,u.clipboardData,"copy"))},[f.onCopy]),onCut:E.useCallback(u=>{if(!s&&g.hasSelectableTarget(n,u.target)&&!se(u,f.onCut)){u.preventDefault(),g.setFragmentData(n,u.clipboardData,"cut");var{selection:b}=n;if(b)if(M.isExpanded(b))v.deleteFragment(n);else{var y=ee.parent(n,b.anchor.path);v.isVoid(n,y)&&_.delete(n)}}},[s,f.onCut]),onDragOver:E.useCallback(u=>{if(g.hasTarget(n,u.target)&&!se(u,f.onDragOver)){var b=g.toSlateNode(n,u.target);v.isVoid(n,b)&&u.preventDefault()}},[f.onDragOver]),onDragStart:E.useCallback(u=>{if(!s&&g.hasTarget(n,u.target)&&!se(u,f.onDragStart)){var b=g.toSlateNode(n,u.target),y=g.findPath(n,b),P=v.isVoid(n,b)||v.void(n,{at:y,voids:!0});if(P){var R=v.range(n,y);_.select(n,R)}B.isDraggingInternally=!0,g.setFragmentData(n,u.dataTransfer,"drag")}},[s,f.onDragStart]),onDrop:E.useCallback(u=>{if(!s&&g.hasTarget(n,u.target)&&!se(u,f.onDrop)){u.preventDefault();var b=n.selection,y=g.findEventRange(n,u),P=u.dataTransfer;_.select(n,y),B.isDraggingInternally&&b&&!M.equals(b,y)&&!v.void(n,{at:y,voids:!0})&&_.delete(n,{at:b}),g.insertData(n,P),g.isFocused(n)||g.focus(n)}B.isDraggingInternally=!1},[s,f.onDrop]),onDragEnd:E.useCallback(u=>{!s&&B.isDraggingInternally&&f.onDragEnd&&g.hasTarget(n,u.target)&&f.onDragEnd(u),B.isDraggingInternally=!1},[s,f.onDragEnd]),onFocus:E.useCallback(u=>{if(!s&&!B.isUpdatingSelection&&g.hasEditableTarget(n,u.target)&&!se(u,f.onFocus)){var b=g.toDOMNode(n,n),y=g.findDocumentOrShadowRoot(n);if(B.latestElement=y.activeElement,yt&&u.target!==b){b.focus();return}Ce.set(n,!0)}},[s,f.onFocus]),onKeyDown:E.useCallback(u=>{if(!s&&g.hasEditableTarget(n,u.target)){k==null||k.handleKeyDown(u);var{nativeEvent:b}=u;if(g.isComposing(n)&&b.isComposing===!1&&(ke.set(n,!1),S(!1)),se(u,f.onKeyDown)||g.isComposing(n))return;var{selection:y}=n,P=n.children[y!==null?y.focus.path[0]:0],R=sr(ee.string(P))==="rtl";if(G.isRedo(b)){u.preventDefault();var H=n;typeof H.redo=="function"&&H.redo();return}if(G.isUndo(b)){u.preventDefault();var K=n;typeof K.undo=="function"&&K.undo();return}if(G.isMoveLineBackward(b)){u.preventDefault(),_.move(n,{unit:"line",reverse:!0});return}if(G.isMoveLineForward(b)){u.preventDefault(),_.move(n,{unit:"line"});return}if(G.isExtendLineBackward(b)){u.preventDefault(),_.move(n,{unit:"line",edge:"focus",reverse:!0});return}if(G.isExtendLineForward(b)){u.preventDefault(),_.move(n,{unit:"line",edge:"focus"});return}if(G.isMoveBackward(b)){u.preventDefault(),y&&M.isCollapsed(y)?_.move(n,{reverse:!R}):_.collapse(n,{edge:"start"});return}if(G.isMoveForward(b)){u.preventDefault(),y&&M.isCollapsed(y)?_.move(n,{reverse:R}):_.collapse(n,{edge:"end"});return}if(G.isMoveWordBackward(b)){u.preventDefault(),y&&M.isExpanded(y)&&_.collapse(n,{edge:"focus"}),_.move(n,{unit:"word",reverse:!R});return}if(G.isMoveWordForward(b)){u.preventDefault(),y&&M.isExpanded(y)&&_.collapse(n,{edge:"focus"}),_.move(n,{unit:"word",reverse:R});return}if(we){if((Cr||dt)&&y&&(G.isDeleteBackward(b)||G.isDeleteForward(b))&&M.isCollapsed(y)){var z=ee.parent(n,y.anchor.path);if(Ge.isElement(z)&&v.isVoid(n,z)&&(v.isInline(n,z)||v.isBlock(n,z))){u.preventDefault(),v.deleteBackward(n,{unit:"block"});return}}}else{if(G.isBold(b)||G.isItalic(b)||G.isTransposeCharacter(b)){u.preventDefault();return}if(G.isSoftBreak(b)){u.preventDefault(),v.insertSoftBreak(n);return}if(G.isSplitBlock(b)){u.preventDefault(),v.insertBreak(n);return}if(G.isDeleteBackward(b)){u.preventDefault(),y&&M.isExpanded(y)?v.deleteFragment(n,{direction:"backward"}):v.deleteBackward(n);return}if(G.isDeleteForward(b)){u.preventDefault(),y&&M.isExpanded(y)?v.deleteFragment(n,{direction:"forward"}):v.deleteForward(n);return}if(G.isDeleteLineBackward(b)){u.preventDefault(),y&&M.isExpanded(y)?v.deleteFragment(n,{direction:"backward"}):v.deleteBackward(n,{unit:"line"});return}if(G.isDeleteLineForward(b)){u.preventDefault(),y&&M.isExpanded(y)?v.deleteFragment(n,{direction:"forward"}):v.deleteForward(n,{unit:"line"});return}if(G.isDeleteWordBackward(b)){u.preventDefault(),y&&M.isExpanded(y)?v.deleteFragment(n,{direction:"backward"}):v.deleteBackward(n,{unit:"word"});return}if(G.isDeleteWordForward(b)){u.preventDefault(),y&&M.isExpanded(y)?v.deleteFragment(n,{direction:"forward"}):v.deleteForward(n,{unit:"word"});return}}}},[s,f.onKeyDown]),onPaste:E.useCallback(u=>{!s&&g.hasSelectableTarget(n,u.target)&&!se(u,f.onPaste)&&(!we||Hn(u.nativeEvent))&&(u.preventDefault(),g.insertData(n,u.clipboardData))},[s,f.onPaste])}),A.createElement(Hi,{decorations:Q,node:n,renderElement:l,renderPlaceholder:d,renderLeaf:c,selection:n.selection})))))},Ar=t=>{var{attributes:e,children:r}=t;return A.createElement("span",Object.assign({},e),r,ue&&A.createElement("br",null))},Ui=()=>[],qi=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&M.isCollapsed(t.selection))){var r=e.startContainer.parentElement;r.getBoundingClientRect=e.getBoundingClientRect.bind(e),Pn(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},se=(t,e)=>{if(!e)return!1;var r=e(t);return r??(t.isDefaultPrevented()||t.isPropagationStopped())},$i=(t,e)=>{if(!e)return!1;var r=e(t);return r??t.defaultPrevented},zi=E.createContext(!1),Vi=E.createContext({});function Yi(t){var e=E.useRef([]).current,r=E.useRef({editor:t}).current,a=E.useCallback(s=>{r.editor=s,e.forEach(l=>l(s))},[]),i=E.useMemo(()=>({getSlate:()=>r.editor,addEventListener:s=>(e.push(s),()=>{e.splice(e.indexOf(s),1)})}),[e,r]);return{selectorContext:i,onChange:a}}var Gi=["editor","children","onChange","value"],Xi=t=>{var{editor:e,children:r,onChange:a,value:i}=t,s=Pe(t,Gi),l=E.useRef(!1),[c,d]=A.useState(()=>{if(!ee.isNodeList(i))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(Re.stringify(i)));if(!v.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(Re.stringify(e)));return e.children=i,Object.assign(e,s),{v:0,editor:e}}),{selectorContext:h,onChange:w}=Yi(e),m=E.useCallback(()=>{a&&a(e.children),d(p=>({v:p.v+1,editor:e})),w(e)},[a]);wt.set(e,m),E.useEffect(()=>()=>{wt.set(e,()=>{}),l.current=!0},[]);var[f,n]=E.useState(g.isFocused(e));return E.useEffect(()=>{n(g.isFocused(e))}),xe(()=>{var p=()=>n(g.isFocused(e));return Vn?(document.addEventListener("focusin",p),document.addEventListener("focusout",p),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",p)}):(document.addEventListener("focus",p,!0),document.addEventListener("blur",p,!0),()=>{document.removeEventListener("focus",p,!0),document.removeEventListener("blur",p,!0)})},[]),A.createElement(Vi.Provider,{value:h},A.createElement(Fr.Provider,{value:c},A.createElement(Ft.Provider,{value:c.editor},A.createElement(zi.Provider,{value:f},r))))},Xt=(t,e)=>{var r=(e.top+e.bottom)/2;return t.top<=r&&t.bottom>=r},Zt=(t,e,r)=>{var a=g.toDOMRange(t,e).getBoundingClientRect(),i=g.toDOMRange(t,r).getBoundingClientRect();return Xt(a,i)&&Xt(i,a)},Zi=(t,e)=>{var r=v.range(t,M.end(e)),a=Array.from(v.positions(t,{at:e})),i=0,s=a.length,l=Math.floor(s/2);if(Zt(t,v.range(t,a[i]),r))return v.range(t,a[i],r);if(a.length<2)return v.range(t,a[a.length-1],r);for(;l!==a.length&&l!==i;)Zt(t,v.range(t,a[l]),r)?s=l:i=l,l=Math.floor((i+s)/2);return v.range(t,a[s],r)};function Jt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,a)}return r}function Qt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Jt(Object(r),!0).forEach(function(a){Je(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var Ji=t=>{var e=t,{apply:r,onChange:a,deleteBackward:i,addMark:s,removeMark:l}=e;return et.set(e,new WeakMap),e.addMark=(c,d)=>{var h,w;(h=Dt.get(e))===null||h===void 0||h(),!fe.get(e)&&(w=oe.get(e))!==null&&w!==void 0&&w.length&&fe.set(e,null),ge.delete(e),s(c,d)},e.removeMark=c=>{var d;!fe.get(e)&&(d=oe.get(e))!==null&&d!==void 0&&d.length&&fe.set(e,null),ge.delete(e),l(c)},e.deleteBackward=c=>{if(c!=="line")return i(c);if(e.selection&&M.isCollapsed(e.selection)){var d=v.above(e,{match:f=>v.isBlock(e,f),at:e.selection});if(d){var[,h]=d,w=v.range(e,h,e.selection.anchor),m=Zi(e,w);M.isCollapsed(m)||_.delete(e,{at:m})}}},e.apply=c=>{var d=[],h=oe.get(e);if(h!=null&&h.length){var w=h.map(j=>Di(j,c)).filter(Boolean);oe.set(e,w)}var m=ye.get(e);m&&ye.set(e,zt(e,m,c));var f=be.get(e);if(f!=null&&f.at){var n=We.isPoint(f==null?void 0:f.at)?Et(e,f.at,c):zt(e,f.at,c);be.set(e,n?Qt(Qt({},f),{},{at:n}):null)}switch(c.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{d.push(...$e(e,c.path));break}case"set_selection":{var p;(p=_e.get(e))===null||p===void 0||p.unref(),_e.delete(e);break}case"insert_node":case"remove_node":{d.push(...$e(e,q.parent(c.path)));break}case"merge_node":{var S=q.previous(c.path);d.push(...$e(e,S));break}case"move_node":{var O=q.common(q.parent(c.path),q.parent(c.newPath));d.push(...$e(e,O));break}}r(c);for(var[D,C]of d){var[L]=v.node(e,D);pt.set(L,C)}},e.setFragmentData=c=>{var{selection:d}=e;if(d){var[h,w]=M.edges(d),m=v.void(e,{at:h.path}),f=v.void(e,{at:w.path});if(!(M.isCollapsed(d)&&!m)){var n=g.toDOMRange(e,d),p=n.cloneContents(),S=p.childNodes[0];if(p.childNodes.forEach(k=>{k.textContent&&k.textContent.trim()!==""&&(S=k)}),f){var[O]=f,D=n.cloneRange(),C=g.toDOMNode(e,O);D.setEndAfter(C),p=D.cloneContents()}if(m&&(S=p.querySelector("[data-slate-spacer]")),Array.from(p.querySelectorAll("[data-slate-zero-width]")).forEach(k=>{var U=k.getAttribute("data-slate-zero-width")==="n";k.textContent=U?`
`:""}),Sr(S)){var L=S.ownerDocument.createElement("span");L.style.whiteSpace="pre",L.appendChild(S),p.appendChild(L),S=L}var j=e.getFragment(),B=JSON.stringify(j),W=window.btoa(encodeURIComponent(B));S.setAttribute("data-slate-fragment",W),c.setData("application/x-slate-fragment",W);var N=p.ownerDocument.createElement("div");return N.appendChild(p),N.setAttribute("hidden","true"),p.ownerDocument.body.appendChild(N),c.setData("text/html",N.innerHTML),c.setData("text/plain",Or(N)),p.ownerDocument.body.removeChild(N),c}}},e.insertData=c=>{e.insertFragmentData(c)||e.insertTextData(c)},e.insertFragmentData=c=>{var d=c.getData("application/x-slate-fragment")||zn(c);if(d){var h=decodeURIComponent(window.atob(d)),w=JSON.parse(h);return e.insertFragment(w),!0}return!1},e.insertTextData=c=>{var d=c.getData("text/plain");if(d){var h=d.split(/\r\n|\r|\n/),w=!1;for(var m of h)w&&_.splitNodes(e,{always:!0}),e.insertText(m),w=!0;return!0}return!1},e.onChange=()=>{Ur.unstable_batchedUpdates(()=>{var c=wt.get(e);c&&c(),a()})},e},$e=(t,e)=>{var r=[];for(var[a,i]of v.levels(t,{at:e})){var s=g.findKey(t,a);r.push([i,s])}return r};const Qi=A.memo(({suggestionState:{candidates:t,selection:e,rawInput:r},suggestionDispatch:a,inputStart:i,avro:s})=>{const l=Pr(),{x:c,y:d,reference:h,strategy:w,refs:m}=qr({placement:"bottom-start",middleware:[$r(),zr({boundary:document.querySelector("#slate-editor")??void 0}),Vr(({placement:f})=>({crossAxis:f.endsWith("start")?-9:0,mainAxis:3}))]});return E.useLayoutEffect(()=>{const{selection:f}=l,n=i;if(n!==null&&r!==""&&f!==null&&M.isCollapsed(f)){const{x:p,y:S,width:O,height:D}=g.toDOMRange(l,v.range(l,n,M.end(f))).getBoundingClientRect(),{scrollX:C,scrollY:L}=window;h({getBoundingClientRect:()=>DOMRectReadOnly.fromRect({x:p+C-window.scrollX,y:S+L-window.scrollY,width:O,height:D})})}else h(null)},[h,l,i,r]),m.reference.current!==null&&t.length>1?er("div",{ref:m.setFloating,style:{position:w,top:d??"",left:c??""},className:"popper",children:[Oe("div",{className:"px-2",children:r}),Oe("ol",{className:"list-decimal list-inside p-px border-t dark:border-black horizontal:flex horizontal:flex-wrap",children:t.map((f,n)=>Oe("li",{className:Yr("px-2 py-px",n===e?"bg-green-300 dark:bg-rose-700":"hover:bg-green-200 dark:hover:bg-rose-600"),onClick:()=>{Rr(l,i,f),s.commit(r,f),a({type:"clearSuggestion"}),g.focus(l)},children:f},f))})]}):null}),Br={candidates:[],selection:null,rawInput:""},es=(t,e)=>{switch(e.type){case"setSuggestion":{const{candidates:r,prevSelection:a,rawInput:i}=e.payload;if(r.length&&a in r)return{candidates:r,selection:a,rawInput:i};throw new Error("Invalid payload")}case"clearSuggestion":return Br;case"selectNext":return{candidates:t.candidates,selection:t.candidates.length===0||t.selection===null?null:(t.selection+1)%t.candidates.length,rawInput:t.rawInput};case"selectPrevious":return{candidates:t.candidates,selection:t.candidates.length===0||t.selection===null?null:(t.selection||t.candidates.length)-1,rawInput:t.rawInput};default:throw new Error}},ts=({initialValue:t})=>{const e=E.useMemo(()=>ba(Ji(Gr())),[]),r=Xr(Zr),a=Jr(()=>new ma),i=Qr(),[s,l]=E.useReducer(es,Br),c=E.useRef(null),d=E.useCallback(m=>{const{key:f}=m;if(!(!r||m.nativeEvent.isComposing||rs.has(f)||f==="Unidentified")){if(/^[^\P{ASCII} ]$/u.test(f)&&!(m.ctrlKey||m.altKey||m.metaKey)){m.preventDefault();const{selection:n}=e;n&&(M.isCollapsed(n)?a.ongoingInputSession||(c.current=M.start(n)):(_.insertText(e,""),c.current=M.start(n)));const p=a.getSuggestionForKey(f);l({type:"setSuggestion",payload:p});return}if(a.ongoingInputSession){if(s.candidates.length>1){const n=window.innerHeight<622;if(f===(n?"ArrowRight":"ArrowDown")||f==="Tab"||f==="n"&&m.ctrlKey){m.preventDefault(),l({type:"selectNext"});return}else if(f===(n?"ArrowLeft":"ArrowUp")||f==="p"&&m.ctrlKey){m.preventDefault(),l({type:"selectPrevious"});return}}switch(f){case"Backspace":{const n=a.getSuggestionForBackspace();n!==null?(m.preventDefault(),l({type:"setSuggestion",payload:n})):l({type:"clearSuggestion"});return}case"Enter":ze(a,s,m);break;default:ze(a,s)}}l({type:"clearSuggestion"})}},[a,e,r,s]),h=E.useCallback(()=>{s.selection!==null?a.commit(s.rawInput,s.candidates[s.selection]):a.closeInputSession(),l({type:"clearSuggestion"})},[a,s.candidates,s.rawInput,s.selection]),w=E.useCallback(m=>{if(!("detail"in m&&typeof m.detail=="string"))throw new Error("invalid event");const f=m.detail,n=f.match(/^{(.+)}$/);if(n!==null){switch(n[1]){case"backspace":{if(r&&a.ongoingInputSession){const S=a.getSuggestionForBackspace();if(S!==null){l({type:"setSuggestion",payload:S});return}else l({type:"clearSuggestion"})}const{selection:p}=e;p&&(M.isCollapsed(p)?e.deleteBackward("character"):e.deleteFragment()),g.focus(e);return}case"enter":e.insertBreak();break;case"space":e.insertText(" ");break;default:return}r&&a.ongoingInputSession&&ze(a,s),l({type:"clearSuggestion"}),g.focus(e)}else{if(r)if(/^[^\P{ASCII} ]$/u.test(f)){const{selection:p}=e;p&&(M.isCollapsed(p)?a.ongoingInputSession||(c.current=M.start(p)):(_.insertText(e,""),c.current=M.start(p)));const S=a.getSuggestionForKey(f);l({type:"setSuggestion",payload:S});return}else a.ongoingInputSession&&ze(a,s),l({type:"clearSuggestion"});e.selection&&(e.insertText(f),g.focus(e))}},[a,e,r,s]);return E.useEffect(()=>(window.addEventListener("virtual-keypress",w),()=>{window.removeEventListener("virtual-keypress",w)}),[w]),E.useEffect(()=>{g.isFocused(e)||(g.focus(e),_.select(e,v.range(e,v.end(e,[]))))},[e]),E.useEffect(()=>{s.selection!==null&&Rr(e,c.current,s.candidates[s.selection])},[e,s.candidates,s.selection]),er(Xi,{editor:e,value:t,onChange:m=>{e.operations.some(n=>n.type!=="set_selection")&&(i(ea()),i(ta(m)))},children:[Oe(Ki,{id:"slate-editor","aria-label":"slate",inputMode:"none",onKeyDown:d,onClick:h,placeholder:"Write Here",renderPlaceholder:m=>(m.attributes.style.opacity="0.54",Oe(Ar,{...m})),className:"p-3 flex-grow md:max-h-screen overflow-y-auto"}),Oe(ra,{children:r&&Oe(Qi,{suggestionState:s,suggestionDispatch:l,inputStart:c.current,avro:a})})]})},Rr=(t,e,r)=>{const{selection:a}=t;e!==null&&a&&M.isCollapsed(a)&&(_.setSelection(t,{anchor:e}),_.insertText(t,r),g.focus(t))},ze=(t,{candidates:e,selection:r,rawInput:a},i)=>{r!==null?(i==null||i.preventDefault(),t.commit(a,e[r])):t.closeInputSession()},rs=new Set(["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","NumLock","OS","ScrollLock","Shift","Super","Symbol","SymbolLock"]),is=A.memo(ts);export{is as default,Rr as updatePreEdit};
