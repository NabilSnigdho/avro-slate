var _r=Object.defineProperty;var jr=(t,e,r)=>e in t?_r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Se=(t,e,r)=>(jr(t,typeof e!="symbol"?e+"":e,r),r);import{P as Nr,d as Me,t as Hr,T as j,E as v,O as ut,a as q,i as Ur,c as Ne,R as A,S as Re,b as M,r as S,N as ee,e as pe,f as Ye,g as We,h as Kr,u as qr,s as $r,j as zr,o as Vr,k as er,l as Oe,m as Yr,n as Gr,p as Xr,q as Zr,v as Jr,w as Qr,x as ea,$ as ta}from"./index-5afe5bdb.js";var ht=(t=>(t[t.Prefix=0]="Prefix",t[t.Suffix=1]="Suffix",t))(ht||{}),Be=(t=>(t[t.Vowel=0]="Vowel",t[t.Consonant=1]="Consonant",t[t.Punctuation=2]="Punctuation",t[t.Exact=3]="Exact",t))(Be||{});const Z="‍",o="‌",tr=[{find:"chchh",replace:"((চ্ছ)|((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?(((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?((হ|ঃ|(হ্"+o+"?)))?)|([চছ]্?((হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?))))|([চছ]্?(হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?)))))|((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?(হ|ঃ|(হ্"+o+"?)))|([চছ]্?(হ|ঃ|(হ্"+o+"?))্?[চছ]্?(হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngkkh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?)))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngksh",replace:"(((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"kkhm",replace:"((((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))))্?ম)|((ক্?ক?)্?((হ|ঃ|(হ্"+o+"?))্?ম))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))্?ম)|(ক্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?))))্?ম))"},{find:"kkhn",replace:"((((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|((ক্?ক?)্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং])|(ক্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং]))"},{find:"kshm",replace:"((((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|(ক্?(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|([সশষ]্?((হ|ঃ|(হ্"+o+"?))্?ম))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?ম)))|((ক্?[সশষ])্?((হ|ঃ|(হ্"+o+"?))্?ম))|(ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))্?ম))"},{find:"kshn",replace:"((((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|(ক্?(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|([সশষ]্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং])))|((ক্?[সশষ])্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|(ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))"},{find:"ngch",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?)))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?[চছ])|([নণঁঙঞং]্?(গ|(জ্ঞ))্?[চছ]))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?[চছ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nggh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|([নণঁঙঞং]্?((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?((((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))্?(হ|ঃ|(হ্"+o+"?)))|((গ|(জ্ঞ))্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|((গ|(জ্ঞ))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))|(((ঙ্গ)|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(গ|(জ্ঞ)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(গ|(জ্ঞ))))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngjh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?)))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?([জয]|(জ়)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?([জয]|(জ়))))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngkh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?(হ|ঃ|(হ্"+o+"?)))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngkx",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্ষ)|(ক্?((ক্স)|ষ))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?((ক্স)|ষ))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?((ক্ষ)|(ক্?((ক্স)|ষ))))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?((ক্স)|ষ)))"},{find:"shsh",replace:"((((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))?্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"thth",replace:"((ত্থ)|(((থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))?্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))|([তটৎ]্?(হ|ঃ|(হ্"+o+"?))্?[তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"bbh",replace:"((ব?্?(ভ|(ব্?(হ|ঃ|(হ্"+o+"?)))))|((ব্?ব?)্?(হ|ঃ|(হ্"+o+"?)))|(ব্?ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"bdh",replace:"((ব্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|((ব্?[দড])্?(হ|ঃ|(হ্"+o+"?)))|(ব্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"bhl",replace:"(((ভ|(ব্?(হ|ঃ|(হ্"+o+"?))))্?ল)|(ব্?((হ|ঃ|(হ্"+o+"?))্?ল))|(ব্?(হ|ঃ|(হ্"+o+"?))্?ল))"},{find:"cch",replace:"(([চছ]্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?)))))|([চছ]্?[চছ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"chh",replace:"(((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?((হ|ঃ|(হ্"+o+"?)))?)|([চছ]্?((হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?))))|([চছ]্?(হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"cng",replace:"((চ্ঞ)|([চছ]্?(ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ)))))|([চছ]্?[নণঁঙঞং]্?(গ|(জ্ঞ)))|(([চছ]্?[নণঁঙঞং])্?(গ|(জ্ঞ))))"},{find:"dbh",replace:"(([দড]্?(ভ|(ব্?(হ|ঃ|(হ্"+o+"?)))))|(([দড]্?ব)্?(হ|ঃ|(হ্"+o+"?)))|([দড]্?ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ddh",replace:"(([দড]?্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|(([দড]্?[দড]?)্?(হ|ঃ|(হ্"+o+"?)))|([দড]্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"dgh",replace:"(([দড]্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|(([দড]্?(গ|(জ্ঞ)))্?(হ|ঃ|(হ্"+o+"?)))|([দড]্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"dhm",replace:"(((ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|([দড]্?((হ|ঃ|(হ্"+o+"?))্?ম))|([দড]্?(হ|ঃ|(হ্"+o+"?))্?ম))"},{find:"dhn",replace:"(((ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|([দড]্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|([দড]্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))"},{find:"gdh",replace:"(((গ|(জ্ঞ))্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|((গ|(জ্ঞ))্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ggh",replace:"((((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))্?(হ|ঃ|(হ্"+o+"?)))|((গ|(জ্ঞ))্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|((গ|(জ্ঞ))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ghn",replace:"(((ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|((গ|(জ্ঞ))্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))"},{find:"jjh",replace:"(((([জয]|(জ়)))?্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?)))))|(হ্য)|(((হ্য)|(([জয]|(জ়))্?(([জয]|(জ়)))?))্?(হ|ঃ|(হ্"+o+"?)))|(([জয]|(জ়))্?([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"jng",replace:"((জ্ঞ)|(([জয]|(জ়))্?(ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ)))))|(([জয]|(জ়))্?[নণঁঙঞং]্?(গ|(জ্ঞ))))"},{find:"kkh",replace:"((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ksh",replace:"((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"kxm",replace:"((((ক্ষ)|(ক্?((ক্স)|ষ)))্?ম)|(ক্?(((ক্স)|ষ)্?ম))|(ক্?((ক্স)|ষ)্?ম))"},{find:"kxn",replace:"((((ক্ষ)|(ক্?((ক্স)|ষ)))্?[নণঁঙঞং])|(ক্?(((ক্স)|ষ)্?[নণঁঙঞং]))|(ক্?((ক্স)|ষ)্?[নণঁঙঞং]))"},{find:"lbh",replace:"((ল্?(ভ|(ব্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?ব)্?(হ|ঃ|(হ্"+o+"?)))|(ল্?ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ldh",replace:"((ল্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?[দড])্?(হ|ঃ|(হ্"+o+"?)))|(ল্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"lgh",replace:"((ল্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?(গ|(জ্ঞ)))্?(হ|ঃ|(হ্"+o+"?)))|(ল্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"lkh",replace:"((ল্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?ক)্?(হ|ঃ|(হ্"+o+"?)))|(ল্?ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"lph",replace:"((ল্?(ফ|(প্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?প)্?(হ|ঃ|(হ্"+o+"?)))|(ল্?প্?(হ|ঃ|(হ্"+o+"?))))"},{find:"mbh",replace:"((ম্?(ভ|(ব্?(হ|ঃ|(হ্"+o+"?)))))|((ম্?ব)্?(হ|ঃ|(হ্"+o+"?)))|(ম্?ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"mph",replace:"((ম্?(ফ|(প্?(হ|ঃ|(হ্"+o+"?)))))|((ম্?প)্?(হ|ঃ|(হ্"+o+"?)))|(ম্?প্?(হ|ঃ|(হ্"+o+"?))))"},{find:"mth",replace:"((ম্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))|((ম্?[তটৎ])্?(হ|ঃ|(হ্"+o+"?)))|(ম্?[তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nch",replace:"(([নণঁঙঞং]্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?)))))|(((ঞ্চ)|([নণঁঙঞং]্?[চছ]))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?[চছ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ndh",replace:"(([নণঁঙঞং]্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|(([নণঁঙঞং]্?[দড])্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngc",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?[চছ])|([নণঁঙঞং]্?(গ|(জ্ঞ))্?[চছ]))"},{find:"ngg",replace:"((ঙ্গ)|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(গ|(জ্ঞ)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(গ|(জ্ঞ))))"},{find:"ngh",replace:"((ঙ্ঘ)|([নণঁঙঞং]্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngj",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?([জয]|(জ়)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?([জয]|(জ়))))"},{find:"ngk",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))"},{find:"ngm",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ম)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ম))"},{find:"ngx",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্স)|ষ))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?((ক্স)|ষ)))"},{find:"njh",replace:"(([নণঁঙঞং]্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?)))))|(((ঞ্জ)|([নণঁঙঞং]্?([জয]|(জ়))))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nkh",replace:"(([নণঁঙঞং]্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(((ঙ্ক)|([নণঁঙঞং]্?ক))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nsh",replace:"(([নণঁঙঞং]্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|([নণঁঙঞং]্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nth",replace:"(([নণঁঙঞং]্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))|(([নণঁঙঞং]্?[তটৎ])্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?[তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"phl",replace:"(((ফ|(প্?(হ|ঃ|(হ্"+o+"?))))্?ল)|(প্?((হ|ঃ|(হ্"+o+"?))্?ল))|(প্?(হ|ঃ|(হ্"+o+"?))্?ল))"},{find:"rri",replace:"(ঋ|ৃ|(([রড়ঢ়]|(হ্র))([রড়ঢ়]|(হ্র))([ইঈিী]|(য়[িী]))))"},{find:"shm",replace:"(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|([সশষ]্?((হ|ঃ|(হ্"+o+"?))্?ম))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?ম))"},{find:"shn",replace:"(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|([সশষ]্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))"},{find:"ssh",replace:"(([সশষ]?্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|([সশষ]্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"t``",replace:"ৎ"},{find:"tth",replace:"((([তটৎ]?(্?)(থ|ঠ|([তটৎ](্?)(হ|ঃ|(হ্"+o+"?)))))|(([তটৎ](্?)[তটৎ]?)(্?)(হ|ঃ|(হ্"+o+"?)))|([তটৎ](্?)[তটৎ](্?)(হ|ঃ|(হ্"+o+"?)))))"},{find:"tth",replace:"(([তটৎ]?্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))|(([তটৎ]্?[তটৎ]?)্?(হ|ঃ|(হ্"+o+"?)))|([তটৎ]্?[তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"zzh",replace:"((হ্য)|((জ|য|(জ়)|(["+o+Z+"]?্য))্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?)))))|(((হ্য)|((জ|য|(জ়)|(["+o+Z+"]?্য))্?((জ|য|(জ়)|(["+o+Z+"]?্য)))?))্?(হ|ঃ|(হ্"+o+"?)))|((জ|য|(জ়)|(["+o+Z+"]?্য))্?(জ|য|(জ়)|(["+o+Z+"]?্য))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"aa",replace:"(আ|(য়া)|া|((([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া))((([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া)))?))"},{find:"ai",replace:"(ঐ|ৈ|(([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া))([ইঈিী]|(য়[িী])))"},{find:"au",replace:"(ঔ|ৌ(([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া))([উঊুূ]|(য়[ুূ])))"},{find:"az",replace:"((([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া))((জ|য|(জ়)|(["+o+Z+"]?্য)))?)"},{find:"bb",replace:"(ব্?ব?)"},{find:"bd",replace:"(ব্?[দড])"},{find:"bh",replace:"(ভ|(ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"bv",replace:"(ব?্?ভ)"},{find:"cc",replace:"([চছ]্?[চছ]?)"},{find:"ch",replace:"(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ck",replace:"(ক|([চছ]্?ক))"},{find:"cn",replace:"([চছ]্?[নণঁঙঞং])"},{find:"db",replace:"([দড]্?ব)"},{find:"dd",replace:"([দড]্?[দড]?)"},{find:"dg",replace:"([দড]্?(গ|(জ্ঞ)))"},{find:"dh",replace:"(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ee",replace:"(ই|ঈ|ি|ী|(য়েই)|(((এ্যা?)|[এে]|(["+o+Z+"]?(্য)া)|(য়ে))((এ্যা?)|[এে]|(["+o+Z+"]?(্য)া)|(য়ে))))"},{find:"ey",replace:"(এ|ই|ে|(েই)|(এই)|ঈ|ী|(((এ্যা?)|[এে]|(["+o+Z+"]?(্য)া)|(য়ে))(য়|(ইয়)|(["+o+Z+"]?্য))))"},{find:"ff",replace:"(ফ্?ফ?)"},{find:"gg",replace:"((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))"},{find:"gh",replace:"(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"hh",replace:"((হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?)))"},{find:"hl",replace:"((হ|ঃ|(হ্"+o+"?))্?ল)"},{find:"hm",replace:"((হ|ঃ|(হ্"+o+"?))্?ম)"},{find:"hn",replace:"((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং])"},{find:"ia",replace:"((ঞা)|(([ইঈিী]|(য়[িী]))(([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া))))"},{find:"jh",replace:"(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"jj",replace:"((হ্য)|(([জয]|(জ়))্?(([জয]|(জ়)))?))"},{find:"kh",replace:"(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"kk",replace:"(ক্?ক?)"},{find:"ks",replace:"(ক্?[সশষ])"},{find:"kx",replace:"((ক্ষ)|(ক্?((ক্স)|ষ)))"},{find:"lb",replace:"(ল্?ব)"},{find:"ld",replace:"(ল্?[দড])"},{find:"lg",replace:"(ল্?(গ|(জ্ঞ)))"},{find:"lk",replace:"(ল্?ক)"},{find:"ll",replace:"((হ্ল)|(ল?্?ল)|(ল্?ল))"},{find:"lp",replace:"(ল্?প)"},{find:"mb",replace:"(ম্?ব)"},{find:"mm",replace:"((হ্ম)|(ম্?ম?))"},{find:"mp",replace:"(ম্?প)"},{find:"mt",replace:"(ম্?[তটৎ])"},{find:"nc",replace:"((ঞ্চ)|([নণঁঙঞং]্?[চছ]))"},{find:"nd",replace:"([নণঁঙঞং]্?[দড])"},{find:"ng",replace:"(ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))"},{find:"nj",replace:"((ঞ্জ)|([নণঁঙঞং]্?([জয]|(জ়))))"},{find:"nk",replace:"((ঙ্ক)|([নণঁঙঞং]্?ক))"},{find:"nn",replace:"((হ্ণ)|(হ্ন)|([নণঁঙঞং]্?[নণঁঙঞং]?))"},{find:"nt",replace:"([নণঁঙঞং]্?[তটৎ])"},{find:"oi",replace:"(ঐ|ৈ|(([ওোঅ]|(অ্য)|(য়ো?))?([ইঈিী]|(য়[িী]))))"},{find:"oo",replace:"((([উঊুূ]|(য়[ুূ])))|(([ওোঅ]|(অ্য)|(য়ো?))?([ওোঅ]|(অ্য)|(য়ো?))?))"},{find:"ou",replace:"(ঔ|ৌ|(([ওোঅ]|(অ্য)|(য়ো?))?([উঊুূ]|(য়[ুূ]))))"},{find:"ph",replace:"(ফ|(প্?(হ|ঃ|(হ্"+o+"?))))"},{find:"pp",replace:"(প্?প?)"},{find:"qq",replace:"(ক্?ক?)"},{find:"rh",replace:"((([রড়ঢ়]|(হ্র)))|(([রড়ঢ়]|(হ্র))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ri",replace:"(ঋ|ৃ|(হৃ)|(([রড়ঢ়]|(হ্র))([ইঈিী]|(য়[িী]))))"},{find:"sh",replace:"(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ss",replace:"([সশষ]্?[সশষ]?)"},{find:"th",replace:"(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"tt",replace:"([তটৎ]্?[তটৎ]?)"},{find:"uu",replace:"(ঊ|ূ|(([উঊুূ]|(য়[ুূ]))(([উঊুূ]|(য়[ুূ])))?))"},{find:"vv",replace:"(ভ্?ভ?)"},{find:"xm",replace:"(((ক্স)|ষ)্?ম)"},{find:"xn",replace:"(((ক্স)|ষ)্?[নণঁঙঞং])"},{find:"zh",replace:"(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"zz",replace:"((হ্য)|((জ|য|(জ়)|(["+o+Z+"]?্য))্?((জ|য|(জ়)|(["+o+Z+"]?্য)))?))"},{find:"0",replace:"(০|(0)|(শূন্য))"},{find:"1",replace:"(১|(1)|(এক))"},{find:"2",replace:"(২|(2)|(দুই))"},{find:"3",replace:"(৩|(3)|(তিন))"},{find:"4",replace:"(৪|(4)|(চার))"},{find:"5",replace:"(৫|(5)|(পাঁচ))"},{find:"6",replace:"((6)|৬|(ছয়))"},{find:"7",replace:"(৭|(7)|(সাত))"},{find:"8",replace:"(৮|(8)|(আট))"},{find:"9",replace:"(৯|(9)|(নয়))"},{find:"`",replace:""},{find:"a",replace:"(([অএ]্যা?)|[আএ]|(["+o+Z+"]?(্য)?া)|(য়া))"},{find:"b",replace:"ব"},{find:"c",replace:"([চছ])"},{find:"d",replace:"([দড])"},{find:"e",replace:"((এ্যা?)|[এে]|(["+o+Z+"]?(্য)া)|(য়ে))"},{find:"f",replace:"ফ"},{find:"g",replace:"(গ|(জ্ঞ))"},{find:"h",replace:"(হ|ঃ|(হ্"+o+"?))"},{find:"i",replace:"([ইঈিী]|(য়[িী]))"},{find:"j",replace:"([জয]|(জ়))"},{find:"k",replace:"ক"},{find:"l",replace:"ল"},{find:"m",replace:"ম"},{find:"n",replace:"([নণঁঙঞং])"},{find:"o",replace:"(([ওোঅ]|(অ্য)|(য়ো?))?)",rules:[{matches:[{type:0,scope:2,value:"",negative:!1}],replace:"([ওোঅ]|(অ্য)|(য়ো?))"}]},{find:"p",replace:"প"},{find:"q",replace:"ক"},{find:"r",replace:"([রড়ঢ়]|(হ্র))"},{find:"s",replace:"([সশষ])"},{find:"t",replace:"([তটৎ])"},{find:"u",replace:"([উঊুূ]|(য়[ুূ]))"},{find:"v",replace:"ভ"},{find:"w",replace:"(ও|(ওয়)|(্ব))"},{find:"x",replace:"((ক্স)|ষ)"},{find:"y",replace:"(য়|(ইয়)|(["+o+Z+"]?্য))"},{find:"z",replace:"(জ|য|(জ়)|(["+o+Z+"]?্য))"}],ra=t=>t.split("").filter(e=>!sa(e)).join(""),aa=t=>t.replaceAll(/\P{ASCII}/ug,e=>`\\u0${e.charCodeAt(0).toString(16)}`),rr=t=>"aeiou".includes(t.toLowerCase()),ar=t=>"bcdfghjklmnpqrstvwxyz".includes(t.toLowerCase()),na=t=>!(rr(t)||ar(t)),ia=(t,e,r,a)=>r>=0&&a<e.length&&e.substring(r,a)===t,sa=t=>"|()[]{}^$*+?.~!@#%&-_='\";<>/\\,:`".includes(t.toLowerCase()),oa=(t,e,r,a)=>{const i=e[r-1],s=e[a];e:for(const l of t){for(const c of l.matches){const d=c.type===ht.Prefix?i:s,u=c.negative;switch(c.scope){case Be.Punctuation:if((d===void 0||na(d))===u)continue e;break;case Be.Vowel:if((d&&rr(d))===u)continue e;break;case Be.Consonant:if((d&&ar(d))===u)continue e;break;case Be.Exact:{const p=c.value;let w,h;if(c.type===ht.Prefix?(w=r-p.length,h=r):(w=a,h=a+p.length),ia(p,e,w,h)===u)continue e;break}}}return l.replace}return!1},la=new RegExp(tr.map(t=>t.find).join("|"),"g"),nr=Object.create(null);for(const t of tr)nr[t.find]=t;const ca=t=>{const e=ra(t);let r="",a=0;for(const{0:i,index:s}of e.matchAll(la)){r+=e.substring(a,s),a=s+i.length;const l=nr[i];let c=l.replace;if(l.rules){const d=oa(l.rules,e,s,a);d!==!1&&(c=d)}r+=c+"(্[যবম])?(্?)([ঃঁ]?)"}return r+=e.substring(a,e.length),aa(r)},ve=new Uint32Array(65536),da=(t,e)=>{const r=t.length,a=e.length,i=1<<r-1;let s=-1,l=0,c=r,d=r;for(;d--;)ve[t.charCodeAt(d)]|=1<<d;for(d=0;d<a;d++){let u=ve[e.charCodeAt(d)];const p=u|l;u|=(u&s)+s^s,l|=~(u|s),s&=u,l&i&&c++,s&i&&c--,l=l<<1|1,s=s<<1|~(p|l),l&=p}for(d=r;d--;)ve[t.charCodeAt(d)]=0;return c},fa=(t,e)=>{const r=e.length,a=t.length,i=[],s=[],l=Math.ceil(r/32),c=Math.ceil(a/32);for(let m=0;m<l;m++)s[m]=-1,i[m]=0;let d=0;for(;d<c-1;d++){let m=0,E=-1;const O=d*32,D=Math.min(32,a)+O;for(let C=O;C<D;C++)ve[t.charCodeAt(C)]|=1<<C;for(let C=0;C<r;C++){const L=ve[e.charCodeAt(C)],_=s[C/32|0]>>>C&1,B=i[C/32|0]>>>C&1,W=L|m,N=((L|B)&E)+E^E|L|B;let k=m|~(N|E),K=E&N;k>>>31^_&&(s[C/32|0]^=1<<C),K>>>31^B&&(i[C/32|0]^=1<<C),k=k<<1|_,K=K<<1|B,E=K|~(W|k),m=k&W}for(let C=O;C<D;C++)ve[t.charCodeAt(C)]=0}let u=0,p=-1;const w=d*32,h=Math.min(32,a-w)+w;for(let m=w;m<h;m++)ve[t.charCodeAt(m)]|=1<<m;let n=a;for(let m=0;m<r;m++){const E=ve[e.charCodeAt(m)],O=s[m/32|0]>>>m&1,D=i[m/32|0]>>>m&1,C=E|u,L=((E|D)&p)+p^p|E|D;let _=u|~(L|p),B=p&L;n+=_>>>a-1&1,n-=B>>>a-1&1,_>>>31^O&&(s[m/32|0]^=1<<m),B>>>31^D&&(i[m/32|0]^=1<<m),_=_<<1|O,B=B<<1|D,p=B|~(C|_),u=_&C}for(let m=w;m<h;m++)ve[t.charCodeAt(m)]=0;return n},Ft=(t,e)=>{if(t.length<e.length){const r=e;e=t,t=r}return e.length===0?t.length:t.length<=32?da(t,e):fa(t,e)};class ua{constructor(){Se(this,"phonetic");Se(this,"dictionaryCache");Se(this,"tempSuffixCache");this.phonetic=new Nr,this.dictionaryCache=Object.create(null),this.tempSuffixCache=Object.create(null)}getAutocorrect(e,r){const a=Me.autocorrect[e];if(a)return this.phonetic.convert(a);{const i=Me.autocorrect[ha(r.middle)];if(i)return r.begin+this.phonetic.convert(i)+r.end}return null}addToTempSuffixCache(e,r,a){e in this.tempSuffixCache||(this.tempSuffixCache[e]={base:r,eng:a})}addSuffix(e){var i;const r=((i=this.dictionaryCache[e])==null?void 0:i.slice(0))??[];this.tempSuffixCache=Object.create(null);const a=e.length;if(a>=2)for(let s=1;s<=a;s++){const l=Me.suffixes[e.substring(s)];if(l===void 0)continue;const c=e.substring(0,s);if(this.dictionaryCache[c]!==void 0)for(const d of this.dictionaryCache[c]){const u=d.substring(d.length-1),p=l.substring(0,1);let w=d;if(It(u)&&Pt(p))w+="য়";else if(u=="ৎ")w=d.substring(0,d.length-1)+"ত";else if(u=="ং"){w=d.substring(0,d.length-1)+"ঙ"+l,r.push(w);continue}w+=l,r.push(w),this.addToTempSuffixCache(w,d,c)}}return r}getPreviousSelection(e,r,a){const i=e.middle,s=i.length;let l="";if(a[i])l=a[i];else if(s>=2)for(let d=1;d<s;d++){const u=i.substring(i.length-d).toLowerCase(),p=Me.suffixes[u];if(p){const w=i.substring(0,i.length-u.length);if(a[w]){const h=a[w],n=h.substring(i.length- -1),m=p.substring(0,1);l=h,It(n)&&Pt(m)?l+="য়":n=="ৎ"?l=h.substring(0,h.length-1)+"ত":n=="ং"&&(l=h.substring(0,h.length-1)+"ঙ"),l+=p,a[i]=l;break}}}const c=r.indexOf(l);return c<0?0:c}isInSuffixCache(e){return e in this.tempSuffixCache}getFromSuffixCache(e){return this.tempSuffixCache[e]}suggest(e,r){var E;const a=ir(e);a.begin=this.phonetic.convert(a.begin),a.end=this.phonetic.convert(a.end);const i=this.phonetic.convert(a.middle),s=a.middle.toLowerCase(),l=((E=this.dictionaryCache[s])==null?void 0:E.slice(0))??va(s),c=this.getAutocorrect(e,a),d=new Set;c!==null&&(d.add(c),l.push(c)),this.dictionaryCache[s]||l.length>0&&(this.dictionaryCache[s]=l.slice(0));const u=this.addSuffix(a.middle.toLowerCase()),p=ga(i,u);for(const O of p)d.add(O);const w=[...d].slice(0,10),h=[];w.includes(i)||h.push(rt(a.begin+i+a.end));const n=w.map(O=>rt(a.begin+O+a.end));n.includes(e)||(Me.emoticons.has(e)?(w.unshift(e),n.unshift(e)):h.push(e));const m=10-h.length;return w.splice(m,w.length-m,...h),n.splice(m,n.length-m,...h),{prevSelection:this.getPreviousSelection(a,w,r),candidates:n,rawInput:e}}suggestWithoutDictionary(e){return{candidates:[rt(this.phonetic.convert(e))],prevSelection:0,rawInput:e}}}const ha=t=>t.replaceAll(/[oiudgjnrstyz]/gi,e=>e.toLowerCase()),ir=t=>{const e=t.match(/(^(?::`|\.`|[-\]~!@#%&*()_=+[{}'";<>/?|.,])*?(?=(?:,{2,}))|^(?::`|\.`|[-\]~!@#%&*()_=+[{}'";<>/?|.,])*)(.*?(?:,,)*)((?::`|\.`|[-\]~!@#%&*()_=+[{}'";<>/?|.,])*$)/)??[];return{begin:e[1]??"",middle:e[2]??"",end:e[3]??""}},Pt=t=>/^[\u09be\u09bf\u09c0\u09c1\u09c2\u09c3\u09c7\u09c8\u09cb\u09cc\u09c4]$/.test(t),It=t=>/^[\u0985\u0986\u0987\u0988\u0989\u098a\u098b\u098f\u0990\u0993\u0994\u098c\u09e1\u09be\u09bf\u09c0\u09c1\u09c2\u09c3\u09c7\u09c8\u09cb\u09cc]$/u.test(t),va=t=>{const e=new RegExp(`^${ca(t)}$`),r=Hr[t.toLowerCase().charAt(0)]??[],a=[];for(const i of r)for(const s of Me.dictionary[i])e.test(s)&&a.push(s);return a},rt=t=>/^([\p{L}\p{M}]+।){2,}$/u.test(t)?t.replaceAll("।","."):t,ga=(t,e)=>e.slice(0).sort((r,a)=>{const i=Ft(t,r),s=Ft(t,a);return i<s?-1:i>s?1:0});class pa{constructor(){Se(this,"buffer","");Se(this,"suggestionBuilder");Se(this,"userSelections");this.suggestionBuilder=new ua;try{const e=localStorage.getItem("AvroUserSelections");e===null?this.userSelections=Object.create(null):this.userSelections=JSON.parse(e)}catch(e){this.userSelections=Object.create(null),console.error(e,"Error while loading user selections")}}saveUserSelections(){try{localStorage.setItem("AvroUserSelections",JSON.stringify(this.userSelections))}catch(e){console.error(e,"Error while saving user selections")}}addUserSelection(e,r){const a=ir(e);this.userSelections[a.middle]=r}commit(e,r){if(this.addUserSelection(e,r),this.suggestionBuilder.isInSuffixCache(r)){const{base:a,eng:i}=this.suggestionBuilder.getFromSuffixCache(r);this.userSelections[i]||(this.userSelections[i]=a)}this.saveUserSelections(),this.closeInputSession()}get ongoingInputSession(){return this.buffer!==""}closeInputSession(){this.buffer=""}suggest(){return this.suggestionBuilder.suggest(this.buffer,this.userSelections)}getSuggestionForKey(e){return this.buffer+=e,this.suggest()}getSuggestionForBackspace(){const e=this.buffer;return this.buffer=e.substring(0,e.length-1),this.buffer===""?null:this.suggest()}}var ma={isHistory(t){return Ur(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||ut.isOperationList(t.redos[0].operations))&&(t.undos.length===0||ut.isOperationList(t.undos[0].operations))}},at=new WeakMap,nt=new WeakMap,Fe={isHistoryEditor(t){return ma.isHistory(t.history)&&v.isEditor(t)},isMerging(t){return nt.get(t)},isSaving(t){return at.get(t)},redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var r=Fe.isMerging(t);nt.set(t,!1),e(),nt.set(t,r)},withoutSaving(t,e){var r=Fe.isSaving(t);at.set(t,!1),e(),at.set(t,r)}},wa=t=>{var e=t,{apply:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:a}=e,{redos:i}=a;if(i.length>0){var s=i[i.length-1];s.selectionBefore&&j.setSelection(e,s.selectionBefore),Fe.withoutSaving(e,()=>{v.withoutNormalizing(e,()=>{for(var l of s.operations)e.apply(l)})}),a.redos.pop(),a.undos.push(s)}},e.undo=()=>{var{history:a}=e,{undos:i}=a;if(i.length>0){var s=i[i.length-1];Fe.withoutSaving(e,()=>{v.withoutNormalizing(e,()=>{var l=s.operations.map(ut.inverse).reverse();for(var c of l)e.apply(c);s.selectionBefore&&j.setSelection(e,s.selectionBefore)})}),a.redos.push(s),a.undos.pop()}},e.apply=a=>{var{operations:i,history:s}=e,{undos:l}=s,c=l[l.length-1],d=c&&c.operations[c.operations.length-1],u=Fe.isSaving(e),p=Fe.isMerging(e);if(u==null&&(u=ya(a)),u){if(p==null&&(c==null?p=!1:i.length!==0?p=!0:p=ba(a,d)),c&&p)c.operations.push(a);else{var w={operations:[a],selectionBefore:e.selection};l.push(w)}for(;l.length>100;)l.shift();s.redos=[]}r(a)},e},ba=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&q.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&q.equals(t.path,e.path)),ya=(t,e)=>t.type!=="set_selection",sr=Oa,or="֑-߿יִ-﷽ﹰ-ﻼ",lr="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",Ea=new RegExp("^[^"+lr+"]*["+or+"]"),Sa=new RegExp("^[^"+or+"]*["+lr+"]");function Oa(t){return t=String(t||""),Ea.test(t)?"rtl":Sa.test(t)?"ltr":"neutral"}function Ca(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var St=Ca,ka=typeof Ne=="object"&&Ne&&Ne.Object===Object&&Ne,xa=ka,Da=xa,Ta=typeof self=="object"&&self&&self.Object===Object&&self,Ma=Da||Ta||Function("return this")(),cr=Ma,Fa=cr,Pa=function(){return Fa.Date.now()},Ia=Pa,La=/\s/;function Aa(t){for(var e=t.length;e--&&La.test(t.charAt(e)););return e}var Ba=Aa,Ra=Ba,Wa=/^\s+/;function _a(t){return t&&t.slice(0,Ra(t)+1).replace(Wa,"")}var ja=_a,Na=cr,Ha=Na.Symbol,dr=Ha,Lt=dr,fr=Object.prototype,Ua=fr.hasOwnProperty,Ka=fr.toString,Ae=Lt?Lt.toStringTag:void 0;function qa(t){var e=Ua.call(t,Ae),r=t[Ae];try{t[Ae]=void 0;var a=!0}catch{}var i=Ka.call(t);return a&&(e?t[Ae]=r:delete t[Ae]),i}var $a=qa,za=Object.prototype,Va=za.toString;function Ya(t){return Va.call(t)}var Ga=Ya,At=dr,Xa=$a,Za=Ga,Ja="[object Null]",Qa="[object Undefined]",Bt=At?At.toStringTag:void 0;function en(t){return t==null?t===void 0?Qa:Ja:Bt&&Bt in Object(t)?Xa(t):Za(t)}var tn=en;function rn(t){return t!=null&&typeof t=="object"}var an=rn,nn=tn,sn=an,on="[object Symbol]";function ln(t){return typeof t=="symbol"||sn(t)&&nn(t)==on}var cn=ln,dn=ja,Rt=St,fn=cn,Wt=0/0,un=/^[-+]0x[0-9a-f]+$/i,hn=/^0b[01]+$/i,vn=/^0o[0-7]+$/i,gn=parseInt;function pn(t){if(typeof t=="number")return t;if(fn(t))return Wt;if(Rt(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Rt(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=dn(t);var r=hn.test(t);return r||vn.test(t)?gn(t.slice(2),r?2:8):un.test(t)?Wt:+t}var mn=pn,wn=St,it=Ia,_t=mn,bn="Expected a function",yn=Math.max,En=Math.min;function Sn(t,e,r){var a,i,s,l,c,d,u=0,p=!1,w=!1,h=!0;if(typeof t!="function")throw new TypeError(bn);e=_t(e)||0,wn(r)&&(p=!!r.leading,w="maxWait"in r,s=w?yn(_t(r.maxWait)||0,e):s,h="trailing"in r?!!r.trailing:h);function n(W){var N=a,k=i;return a=i=void 0,u=W,l=t.apply(k,N),l}function m(W){return u=W,c=setTimeout(D,e),p?n(W):l}function E(W){var N=W-d,k=W-u,K=e-N;return w?En(K,s-k):K}function O(W){var N=W-d,k=W-u;return d===void 0||N>=e||N<0||w&&k>=s}function D(){var W=it();if(O(W))return C(W);c=setTimeout(D,E(W))}function C(W){return c=void 0,h&&a?n(W):(a=i=void 0,l)}function L(){c!==void 0&&clearTimeout(c),u=0,a=d=i=c=void 0}function _(){return c===void 0?l:C(it())}function B(){var W=it(),N=O(W);if(a=arguments,i=this,d=W,N){if(c===void 0)return m(d);if(w)return clearTimeout(c),c=setTimeout(D,e),n(d)}return c===void 0&&(c=setTimeout(D,e)),l}return B.cancel=L,B.flush=_,B}var ur=Sn,On=ur,Cn=St,kn="Expected a function";function xn(t,e,r){var a=!0,i=!0;if(typeof t!="function")throw new TypeError(kn);return Cn(r)&&(a="leading"in r?!!r.leading:a,i="trailing"in r?!!r.trailing:i),On(t,e,{leading:a,maxWait:e,trailing:i})}var Dn=xn;function jt(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function Nt(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function st(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return Nt(r.overflowY,e)||Nt(r.overflowX,e)||function(a){var i=function(s){if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}}(a);return!!i&&(i.clientHeight<a.scrollHeight||i.clientWidth<a.scrollWidth)}(t)}return!1}function He(t,e,r,a,i,s,l,c){return s<t&&l>e||s>t&&l<e?0:s<=t&&c<=r||l>=e&&c>=r?s-t-a:l>e&&c<r||s<t&&c>r?l-e+i:0}var Ht=function(t,e){var r=window,a=e.scrollMode,i=e.block,s=e.inline,l=e.boundary,c=e.skipOverflowHiddenElements,d=typeof l=="function"?l:function(Te){return Te!==l};if(!jt(t))throw new TypeError("Invalid target");for(var u,p,w=document.scrollingElement||document.documentElement,h=[],n=t;jt(n)&&d(n);){if((n=(p=(u=n).parentElement)==null?u.getRootNode().host||null:p)===w){h.push(n);break}n!=null&&n===document.body&&st(n)&&!st(document.documentElement)||n!=null&&st(n,c)&&h.push(n)}for(var m=r.visualViewport?r.visualViewport.width:innerWidth,E=r.visualViewport?r.visualViewport.height:innerHeight,O=window.scrollX||pageXOffset,D=window.scrollY||pageYOffset,C=t.getBoundingClientRect(),L=C.height,_=C.width,B=C.top,W=C.right,N=C.bottom,k=C.left,K=i==="start"||i==="nearest"?B:i==="end"?N:B+L/2,Q=s==="center"?k+_/2:s==="end"?W:k,de=[],I=0;I<h.length;I++){var T=h[I],F=T.getBoundingClientRect(),x=F.height,Y=F.width,f=F.top,b=F.right,y=F.bottom,P=F.left;if(a==="if-needed"&&B>=0&&k>=0&&N<=E&&W<=m&&B>=f&&N<=y&&k>=P&&W<=b)return de;var R=getComputedStyle(T),H=parseInt(R.borderLeftWidth,10),U=parseInt(R.borderTopWidth,10),z=parseInt(R.borderRightWidth,10),te=parseInt(R.borderBottomWidth,10),X=0,$=0,ie="offsetWidth"in T?T.offsetWidth-T.clientWidth-H-z:0,re="offsetHeight"in T?T.offsetHeight-T.clientHeight-U-te:0,ae="offsetWidth"in T?T.offsetWidth===0?0:Y/T.offsetWidth:0,le="offsetHeight"in T?T.offsetHeight===0?0:x/T.offsetHeight:0;if(w===T)X=i==="start"?K:i==="end"?K-E:i==="nearest"?He(D,D+E,E,U,te,D+K,D+K+L,L):K-E/2,$=s==="start"?Q:s==="center"?Q-m/2:s==="end"?Q-m:He(O,O+m,m,H,z,O+Q,O+Q+_,_),X=Math.max(0,X+D),$=Math.max(0,$+O);else{X=i==="start"?K-f-U:i==="end"?K-y+te+re:i==="nearest"?He(f,y,x,U,te+re,K,K+L,L):K-(f+x/2)+re/2,$=s==="start"?Q-P-H:s==="center"?Q-(P+Y/2)+ie/2:s==="end"?Q-b+z+ie:He(P,b,Y,H,z+ie,Q,Q+_,_);var ne=T.scrollLeft,J=T.scrollTop;K+=J-(X=Math.max(0,Math.min(J+X/le,T.scrollHeight-x/le+re))),Q+=ne-($=Math.max(0,Math.min(ne+$/ae,T.scrollWidth-Y/ae+ie)))}de.push({el:T,top:X,left:$})}return de};function hr(t){return t===Object(t)&&Object.keys(t).length!==0}function Tn(t,e){e===void 0&&(e="auto");var r="scrollBehavior"in document.body.style;t.forEach(function(a){var i=a.el,s=a.top,l=a.left;i.scroll&&r?i.scroll({top:s,left:l,behavior:e}):(i.scrollTop=s,i.scrollLeft=l)})}function Mn(t){return t===!1?{block:"end",inline:"nearest"}:hr(t)?t:{block:"start",inline:"nearest"}}function Fn(t,e){var r=t.isConnected||t.ownerDocument.documentElement.contains(t);if(hr(e)&&typeof e.behavior=="function")return e.behavior(r?Ht(t,e):[]);if(r){var a=Mn(e);return Tn(Ht(t,a),a.behavior)}}var me={};Object.defineProperty(me,"__esModule",{value:!0});var Pn=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ot={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},In={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Pn?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},vr={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var Ue=1;Ue<20;Ue++)vr["f"+Ue]=111+Ue;function Xe(t,e,r){e&&!("byKey"in e)&&(r=e,e=null),Array.isArray(t)||(t=[t]);var a=t.map(function(l){return gr(l,e)}),i=function(c){return a.some(function(d){return pr(d,c)})},s=r==null?i:i(r);return s}function Ln(t,e){return Xe(t,e)}function An(t,e){return Xe(t,{byKey:!0},e)}function gr(t,e){var r=e&&e.byKey,a={};t=t.replace("++","+add");var i=t.split("+"),s=i.length;for(var l in ot)a[ot[l]]=!1;var c=!0,d=!1,u=void 0;try{for(var p=i[Symbol.iterator](),w;!(c=(w=p.next()).done);c=!0){var h=w.value,n=h.endsWith("?")&&h.length>1;n&&(h=h.slice(0,-1));var m=Ot(h),E=ot[m];(s===1||!E)&&(r?a.key=m:a.which=mr(h)),E&&(a[E]=n?null:!0)}}catch(O){d=!0,u=O}finally{try{!c&&p.return&&p.return()}finally{if(d)throw u}}return a}function pr(t,e){for(var r in t){var a=t[r],i=void 0;if(a!=null&&(r==="key"&&e.key!=null?i=e.key.toLowerCase():r==="which"?i=a===91&&e.which===93?91:e.which:i=e[r],!(i==null&&a===!1)&&i!==a))return!1}return!0}function mr(t){t=Ot(t);var e=vr[t]||t.toUpperCase().charCodeAt(0);return e}function Ot(t){return t=t.toLowerCase(),t=In[t]||t,t}me.default=Xe;me.isHotkey=Xe;me.isCodeHotkey=Ln;var lt=me.isKeyHotkey=An;me.parseHotkey=gr;me.compareHotkey=pr;me.toKeyCode=mr;me.toKeyName=Ot;function Ze(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bn(t,e){if(t==null)return{};var r={},a=Object.keys(t),i,s;for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Pe(t,e){if(t==null)return{};var r=Bn(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var Rn=0;class Wn{constructor(){this.id="".concat(Rn++)}}var Ct=new WeakMap,kt=new WeakMap,wr=new WeakMap,vt=new WeakMap,ze=new WeakMap,Je=new WeakMap,Ie=new WeakMap,gt=new WeakMap,Qe=new WeakMap,Ge=new WeakMap,pt=new WeakMap,Ce=new WeakMap,ke=new WeakMap,_e=new WeakMap,mt=new WeakMap,xt=new WeakMap,fe=new WeakMap,ge=new WeakMap,oe=new WeakMap,be=new WeakMap,ye=new WeakMap,br=new WeakMap,Le=Symbol("placeholder"),yr=Symbol("mark-placeholder"),_n=globalThis.Text,Dt=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,jn=t=>De(t)&&t.nodeType===8,ce=t=>De(t)&&t.nodeType===1,De=t=>{var e=Dt(t);return!!e&&t instanceof e.Node},wt=t=>{var e=t&&t.anchorNode&&Dt(t.anchorNode);return!!e&&t instanceof e.Selection},Er=t=>De(t)&&t.nodeType===3,Nn=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,Hn=t=>{var[e,r]=t;if(ce(e)&&e.childNodes.length){var a=r===e.childNodes.length,i=a?r-1:r;for([e,i]=Sr(e,i,a?"backward":"forward"),a=i<r;ce(e)&&e.childNodes.length;){var s=a?e.childNodes.length-1:0;e=Kn(e,s,a?"backward":"forward")}r=a&&e.textContent!=null?e.textContent.length:0}return[e,r]},Un=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},Sr=(t,e,r)=>{for(var{childNodes:a}=t,i=a[e],s=e,l=!1,c=!1;(jn(i)||ce(i)&&i.childNodes.length===0||ce(i)&&i.getAttribute("contenteditable")==="false")&&!(l&&c);){if(s>=a.length){l=!0,s=e-1,r="backward";continue}if(s<0){c=!0,s=e+1,r="forward";continue}i=a[s],e=s,s+=r==="forward"?1:-1}return[i,e]},Kn=(t,e,r)=>{var[a]=Sr(t,e,r);return a},Or=t=>{var e="";if(Er(t)&&t.nodeValue)return t.nodeValue;if(ce(t)){for(var r of Array.from(t.childNodes))e+=Or(r);var a=getComputedStyle(t).getPropertyValue("display");(a==="block"||a==="list"||t.tagName==="BR")&&(e+=`
`)}return e},qn=/data-slate-fragment="(.+?)"/m,$n=t=>{var e=t.getData("text/html"),[,r]=e.match(qn)||[];return r},Tt=(t,e,r)=>{var{target:a}=e;if(ce(a)&&a.matches('[contentEditable="false"]'))return!1;var{document:i}=g.getWindow(t);if(i.contains(a))return g.hasDOMNode(t,a,{editable:!0});var s=r.find(l=>{var{addedNodes:c,removedNodes:d}=l;for(var u of c)if(u===a||u.contains(a))return!0;for(var p of d)if(p===a||p.contains(a))return!0});return!s||s===e?!1:Tt(t,s,r)},zn=parseInt(A.version.split(".")[0],10)>=17,Vn=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ut=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),ue=typeof navigator<"u"&&/Android/.test(navigator.userAgent),bt=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),ct=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Yn=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),Cr=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Gn=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Xn=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Zn=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),Jn=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),Ve=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",we=!Gn&&!Yn&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",g={isComposing(t){return!!ke.get(t)},getWindow(t){var e=wr.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},findKey(t,e){var r=gt.get(e);return r||(r=new Wn,gt.set(e,r)),r},findPath(t,e){for(var r=[],a=e;;){var i=kt.get(a);if(i==null){if(v.isEditor(a))return r;break}var s=Ct.get(a);if(s==null)break;r.unshift(s),a=i}throw new Error("Unable to find the path for Slate node: ".concat(Re.stringify(e)))},findDocumentOrShadowRoot(t){var e=g.toDOMNode(t,t),r=e.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&r.getSelection!=null?r:e.ownerDocument},isFocused(t){return!!Ce.get(t)},isReadOnly(t){return!!pt.get(t)},blur(t){var e=g.toDOMNode(t,t),r=g.findDocumentOrShadowRoot(t);Ce.set(t,!1),r.activeElement===e&&e.blur()},focus(t){var e=g.toDOMNode(t,t),r=g.findDocumentOrShadowRoot(t);Ce.set(t,!0),r.activeElement!==e&&e.focus({preventScroll:!0})},deselect(t){var{selection:e}=t,r=g.findDocumentOrShadowRoot(t),a=r.getSelection();a&&a.rangeCount>0&&a.removeAllRanges(),e&&j.deselect(t)},hasDOMNode(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:a=!1}=r,i=g.toDOMNode(t,t),s;try{s=ce(e)?e:e.parentElement}catch(l){if(!l.message.includes('Permission denied to access property "nodeType"'))throw l}return s?s.closest("[data-slate-editor]")===i&&(!a||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===i||!!s.getAttribute("data-slate-zero-width")):!1},insertData(t,e){t.insertData(e)},insertFragmentData(t,e){return t.insertFragmentData(e)},insertTextData(t,e){return t.insertTextData(e)},setFragmentData(t,e,r){t.setFragmentData(e,r)},toDOMNode(t,e){var r=Qe.get(t),a=v.isEditor(e)?vt.get(t):r==null?void 0:r.get(g.findKey(t,e));if(!a)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Re.stringify(e)));return a},toDOMPoint(t,e){var[r]=v.node(t,e.path),a=g.toDOMNode(t,r),i;v.void(t,{at:e})&&(e={path:e.path,offset:0});for(var s="[data-slate-string], [data-slate-zero-width]",l=Array.from(a.querySelectorAll(s)),c=0,d=0;d<l.length;d++){var u=l[d],p=u.childNodes[0];if(!(p==null||p.textContent==null)){var{length:w}=p.textContent,h=u.getAttribute("data-slate-length"),n=h==null?w:parseInt(h,10),m=c+n,E=l[d+1];if(e.offset===m&&E!==null&&E!==void 0&&E.hasAttribute("data-slate-mark-placeholder")){var O,D=E.childNodes[0];i=[D instanceof _n?D:E,(O=E.textContent)!==null&&O!==void 0&&O.startsWith("\uFEFF")?1:0];break}if(e.offset<=m){var C=Math.min(w,Math.max(0,e.offset-c));i=[p,C];break}c=m}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Re.stringify(e)));return i},toDOMRange(t,e){var{anchor:r,focus:a}=e,i=M.isBackward(e),s=g.toDOMPoint(t,r),l=M.isCollapsed(e)?s:g.toDOMPoint(t,a),c=g.getWindow(t),d=c.document.createRange(),[u,p]=i?l:s,[w,h]=i?s:l,n=ce(u)?u:u.parentElement,m=!!n.getAttribute("data-slate-zero-width"),E=ce(w)?w:w.parentElement,O=!!E.getAttribute("data-slate-zero-width");return d.setStart(u,m?1:p),d.setEnd(w,O?1:h),d},toSlateNode(t,e){var r=ce(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var a=r?Je.get(r):null;if(!a)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return a},findEventRange(t,e){"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:r,clientY:a,target:i}=e;if(r==null||a==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var s=g.toSlateNode(t,e.target),l=g.findPath(t,s);if(v.isVoid(t,s)){var c=i.getBoundingClientRect(),d=t.isInline(s)?r-c.left<c.left+c.width-r:a-c.top<c.top+c.height-a,u=v.point(t,l,{edge:d?"start":"end"}),p=d?v.before(t,u):v.after(t,u);if(p){var w=v.range(t,p);return w}}var h,{document:n}=g.getWindow(t);if(n.caretRangeFromPoint)h=n.caretRangeFromPoint(r,a);else{var m=n.caretPositionFromPoint(r,a);m&&(h=n.createRange(),h.setStart(m.offsetNode,m.offset),h.setEnd(m.offsetNode,m.offset))}if(!h)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var E=g.toSlateRange(t,h,{exactMatch:!1,suppressThrow:!1});return E},toSlatePoint(t,e,r){var{exactMatch:a,suppressThrow:i}=r,[s,l]=a?e:Hn(e),c=s.parentNode,d=null,u=0;if(c){var p,w,h=g.toDOMNode(t,t),n=c.closest('[data-slate-void="true"]'),m=n&&h.contains(n)?n:null,E=c.closest("[data-slate-leaf]"),O=null;if(E){if(d=E.closest('[data-slate-node="text"]'),d){var D=g.getWindow(t),C=D.document.createRange();C.setStart(d,0),C.setEnd(s,l);var L=C.cloneContents(),_=[...Array.prototype.slice.call(L.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(L.querySelectorAll("[contenteditable=false]"))];_.forEach(F=>{if(ue&&!a&&F.hasAttribute("data-slate-zero-width")&&F.textContent.length>0&&F.textContext!=="\uFEFF"){F.textContent.startsWith("\uFEFF")&&(F.textContent=F.textContent.slice(1));return}F.parentNode.removeChild(F)}),u=L.textContent.length,O=d}}else if(m){for(var B=m.querySelectorAll("[data-slate-leaf]"),W=0;W<B.length;W++){var N=B[W];if(g.hasDOMNode(t,N)){E=N;break}}E?(d=E.closest('[data-slate-node="text"]'),O=E,u=O.textContent.length,O.querySelectorAll("[data-slate-zero-width]").forEach(F=>{u-=F.textContent.length})):u=1}O&&u===O.textContent.length&&ue&&O.getAttribute("data-slate-zero-width")==="z"&&(p=O.textContent)!==null&&p!==void 0&&p.startsWith("\uFEFF")&&(c.hasAttribute("data-slate-zero-width")||bt&&(w=O.textContent)!==null&&w!==void 0&&w.endsWith(`

`))&&u--}if(ue&&!d&&!a){var k=c.hasAttribute("data-slate-node")?c:c.closest("[data-slate-node]");if(k&&g.hasDOMNode(t,k,{editable:!0})){var K=g.toSlateNode(t,k),{path:Q,offset:de}=v.start(t,g.findPath(t,K));return k.querySelector("[data-slate-leaf]")||(de=l),{path:Q,offset:de}}}if(!d){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var I=g.toSlateNode(t,d),T=g.findPath(t,I);return{path:T,offset:u}},toSlateRange(t,e,r){var{exactMatch:a,suppressThrow:i}=r,s=wt(e)?e.anchorNode:e.startContainer,l,c,d,u,p;if(s&&(wt(e)?(l=e.anchorNode,c=e.anchorOffset,d=e.focusNode,u=e.focusOffset,Cr&&Un(l)?p=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:p=e.isCollapsed):(l=e.startContainer,c=e.startOffset,d=e.endContainer,u=e.endOffset,p=e.collapsed)),l==null||d==null||c==null||u==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));var w=g.toSlatePoint(t,[l,c],{exactMatch:a,suppressThrow:i});if(!w)return null;var h=p?w:g.toSlatePoint(t,[d,u],{exactMatch:a,suppressThrow:i});if(!h)return null;var n={anchor:w,focus:h};return M.isExpanded(n)&&M.isForward(n)&&ce(d)&&v.void(t,{at:n.focus,mode:"highest"})&&(n=v.unhangRange(t,n,{voids:!0})),n},hasRange(t,e){var{anchor:r,focus:a}=e;return v.hasPath(t,r.path)&&v.hasPath(t,a.path)},hasTarget(t,e){return De(e)&&g.hasDOMNode(t,e)},hasEditableTarget(t,e){return De(e)&&g.hasDOMNode(t,e,{editable:!0})},hasSelectableTarget(t,e){return g.hasEditableTarget(t,e)||g.isTargetInsideNonReadonlyVoid(t,e)},isTargetInsideNonReadonlyVoid(t,e){if(pt.get(t))return!1;var r=g.hasTarget(t,e)&&g.toSlateNode(t,e);return v.isVoid(t,r)},androidScheduleFlush(t){var e;(e=xt.get(t))===null||e===void 0||e()},androidPendingDiffs(t){return oe.get(t)}},xe=Ve?S.useLayoutEffect:S.useEffect,Qn=["anchor","focus"],ei=["anchor","focus"],ti=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>e.hasOwnProperty(r)&&t[r]===e[r]),kr=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var a=t[r],i=e[r],s=Pe(a,Qn),l=Pe(i,ei);if(!M.equals(a,i)||a[Le]!==i[Le]||!ti(s,l))return!1}return!0},ri=t=>{var{isLast:e,leaf:r,parent:a,text:i}=t,s=Ee(),l=g.findPath(s,i),c=q.parent(l),d=r[yr]===!0;return s.isVoid(a)?A.createElement(dt,{length:ee.string(a).length}):r.text===""&&a.children[a.children.length-1]===i&&!s.isInline(a)&&v.string(s,c)===""?A.createElement(dt,{isLineBreak:!0,isMarkPlaceholder:d}):r.text===""?A.createElement(dt,{isMarkPlaceholder:d}):e&&r.text.slice(-1)===`
`?A.createElement(Kt,{isTrailing:!0,text:r.text}):A.createElement(Kt,{text:r.text})},Kt=t=>{var{text:e,isTrailing:r=!1}=t,a=S.useRef(null),i=()=>"".concat(e??"").concat(r?`
`:"");return xe(()=>{var s=i();a.current&&a.current.textContent!==s&&(a.current.textContent=s)}),a.current?A.createElement("span",{"data-slate-string":!0,ref:a}):A.createElement("span",{"data-slate-string":!0,ref:a},i())},dt=t=>{var{length:e=0,isLineBreak:r=!1,isMarkPlaceholder:a=!1}=t,i={"data-slate-zero-width":r?"n":"z","data-slate-length":e};return a&&(i["data-slate-mark-placeholder"]=!0),A.createElement("span",Object.assign({},i),!ue||!r?"\uFEFF":null,r?A.createElement("br",null):null)},Mt=S.createContext(null),Ee=()=>{var t=S.useContext(Mt);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},ai=t=>{var{leaf:e,isLast:r,text:a,parent:i,renderPlaceholder:s,renderLeaf:l=n=>A.createElement(ii,Object.assign({},n))}=t,c=S.useRef(null),d=Ee(),u=S.useRef(null);S.useEffect(()=>()=>{u.current&&u.current.disconnect()},[]),S.useEffect(()=>{var n=c==null?void 0:c.current;if(n?ze.set(d,n):ze.delete(d),u.current?(u.current.disconnect(),n&&u.current.observe(n)):n&&(u.current=new ResizeObserver(E=>{var[{target:O}]=E,D=Ge.get(d);if(D){var C="".concat(O.clientHeight,"px");D.innerHTML=':where([data-slate-editor-id="'.concat(d.id,'"]) { min-height: ').concat(C,"; }")}}),u.current.observe(n)),!n){var m=Ge.get(d);m&&(m.innerHTML="")}return()=>{ze.delete(d)}},[c,e]);var p=A.createElement(ri,{isLast:r,leaf:e,parent:i,text:a});if(e[Le]){var w={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:c}};p=A.createElement(A.Fragment,null,s(w),p)}var h={"data-slate-leaf":!0};return l({attributes:h,children:p,leaf:e,text:a})},ni=A.memo(ai,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&pe.equals(e.leaf,t.leaf)&&e.leaf[Le]===t.leaf[Le]),ii=t=>{var{attributes:e,children:r}=t;return A.createElement("span",Object.assign({},e),r)},si=t=>{for(var{decorations:e,isLast:r,parent:a,renderPlaceholder:i,renderLeaf:s,text:l}=t,c=Ee(),d=S.useRef(null),u=pe.decorations(l,e),p=g.findKey(c,l),w=[],h=0;h<u.length;h++){var n=u[h];w.push(A.createElement(ni,{isLast:r&&h===u.length-1,key:"".concat(p.id,"-").concat(h),renderPlaceholder:i,leaf:n,text:l,parent:a,renderLeaf:s}))}return xe(()=>{var m=Qe.get(c);d.current?(m==null||m.set(p,d.current),Ie.set(l,d.current),Je.set(d.current,l)):(m==null||m.delete(p),Ie.delete(l))}),A.createElement("span",{"data-slate-node":"text",ref:d},w)},xr=A.memo(si,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.text===t.text&&kr(e.decorations,t.decorations)),oi=t=>{var{decorations:e,element:r,renderElement:a=C=>A.createElement(ci,Object.assign({},C)),renderPlaceholder:i,renderLeaf:s,selection:l}=t,c=Ee(),d=ui(),u=c.isInline(r),p=g.findKey(c,r),w=S.useCallback(C=>{var L=Qe.get(c);C?(L==null||L.set(p,C),Ie.set(r,C),Je.set(C,r)):(L==null||L.delete(p),Ie.delete(r))},[c,p,r]),h=Tr({decorations:e,node:r,renderElement:a,renderPlaceholder:i,renderLeaf:s,selection:l}),n={"data-slate-node":"element",ref:w};if(u&&(n["data-slate-inline"]=!0),!u&&v.hasInlines(c,r)){var m=ee.string(r),E=sr(m);E==="rtl"&&(n.dir=E)}if(v.isVoid(c,r)){n["data-slate-void"]=!0,!d&&u&&(n.contentEditable=!1);var O=u?"span":"div",[[D]]=ee.texts(r);h=A.createElement(O,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},A.createElement(xr,{renderPlaceholder:i,decorations:[],isLast:!1,parent:r,text:D})),Ct.set(D,0),kt.set(D,r)}return a({attributes:n,children:h,element:r})},li=A.memo(oi,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&kr(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&M.equals(t.selection,e.selection))),ci=t=>{var{attributes:e,children:r,element:a}=t,i=Ee(),s=i.isInline(a)?"span":"div";return A.createElement(s,Object.assign({},e,{style:{position:"relative"}}),r)},Dr=S.createContext(()=>[]),di=()=>S.useContext(Dr),fi=S.createContext(!1),Tr=t=>{for(var{decorations:e,node:r,renderElement:a,renderPlaceholder:i,renderLeaf:s,selection:l}=t,c=di(),d=Ee(),u=g.findPath(d,r),p=[],w=Ye.isElement(r)&&!d.isInline(r)&&v.hasInlines(d,r),h=0;h<r.children.length;h++){var n=u.concat(h),m=r.children[h],E=g.findKey(d,m),O=v.range(d,n),D=l&&M.intersection(O,l),C=c([m,n]);for(var L of e){var _=M.intersection(L,O);_&&C.push(_)}Ye.isElement(m)?p.push(A.createElement(fi.Provider,{key:"provider-".concat(E.id),value:!!D},A.createElement(li,{decorations:C,element:m,key:E.id,renderElement:a,renderPlaceholder:i,renderLeaf:s,selection:D}))):p.push(A.createElement(xr,{decorations:C,key:E.id,isLast:w&&h===r.children.length-1,parent:r,renderPlaceholder:i,renderLeaf:s,text:m})),Ct.set(m,h),kt.set(m,r)}return p},Mr=S.createContext(!1),ui=()=>S.useContext(Mr),Fr=S.createContext(null),Pr=()=>{var t=S.useContext(Fr);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e},hi=3,vi={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},gi={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},pi={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},V=t=>{var e=vi[t],r=gi[t],a=pi[t],i=e&&lt(e),s=r&&lt(r),l=a&&lt(a);return c=>!!(i&&i(c)||Ut&&s&&s(c)||!Ut&&l&&l(c))},G={isBold:V("bold"),isCompose:V("compose"),isMoveBackward:V("moveBackward"),isMoveForward:V("moveForward"),isDeleteBackward:V("deleteBackward"),isDeleteForward:V("deleteForward"),isDeleteLineBackward:V("deleteLineBackward"),isDeleteLineForward:V("deleteLineForward"),isDeleteWordBackward:V("deleteWordBackward"),isDeleteWordForward:V("deleteWordForward"),isExtendBackward:V("extendBackward"),isExtendForward:V("extendForward"),isExtendLineBackward:V("extendLineBackward"),isExtendLineForward:V("extendLineForward"),isItalic:V("italic"),isMoveLineBackward:V("moveLineBackward"),isMoveLineForward:V("moveLineForward"),isMoveWordBackward:V("moveWordBackward"),isMoveWordForward:V("moveWordForward"),isRedo:V("redo"),isSoftBreak:V("insertSoftBreak"),isSplitBlock:V("splitBlock"),isTransposeCharacter:V("transposeCharacter"),isUndo:V("undo")},mi=(t,e)=>{var r=[],a=()=>{r=[]},i=l=>{if(e.current){var c=l.filter(d=>Tt(t,d,l));r.push(...c)}};function s(){r.reverse().forEach(l=>{if(l.type==="characterData"){l.target.textContent=l.oldValue;return}l.removedNodes.forEach(c=>{l.target.insertBefore(c,l.nextSibling)}),l.addedNodes.forEach(c=>{l.target.removeChild(c)})}),a()}return{registerMutations:i,restoreDOM:s,clear:a}},wi={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class Ir extends S.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(r.current,wi)}componentDidMount(){var{receivedUserInput:e}=this.props,r=this.context;this.manager=mi(r,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,r,a,i=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(i!=null&&i.length){var s;(s=this.manager)===null||s===void 0||s.registerMutations(i)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(a=this.manager)===null||a===void 0||a.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}Ir.contextType=Mt;var bi=ue?Ir:t=>{var{children:e}=t;return A.createElement(A.Fragment,null,e)};function yi(t,e){var{path:r,diff:a}=e;if(!v.hasPath(t,r))return!1;var i=ee.get(t,r);if(!pe.isText(i))return!1;if(a.start!==i.text.length||a.text.length===0)return i.text.slice(a.start,a.start+a.text.length)===a.text;var s=q.next(r);if(!v.hasPath(t,s))return!1;var l=ee.get(t,s);return pe.isText(l)&&l.text.startsWith(a.text)}function Ei(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];return r.reduce((i,s)=>i.slice(0,s.start)+s.text+i.slice(s.end),t)}function Si(t,e){for(var r=Math.min(t.length,e.length),a=0;a<r;a++)if(t.charAt(a)!==e.charAt(a))return a;return r}function Oi(t,e,r){for(var a=Math.min(t.length,e.length,r),i=0;i<a;i++)if(t.charAt(t.length-i-1)!==e.charAt(e.length-i-1))return i;return a}function Lr(t,e){var{start:r,end:a,text:i}=e,s=t.slice(r,a),l=Si(s,i),c=Math.min(s.length-l,i.length-l),d=Oi(s,i,c),u={start:r+l,end:a-d,text:i.slice(l,i.length-d)};return u.start===u.end&&u.text.length===0?null:u}function Ci(t,e,r){var a=Math.min(e.start,r.start),i=Math.max(0,Math.min(e.start+e.text.length,r.end)-r.start),s=Ei(t,e,r),l=Math.max(r.start+r.text.length,e.start+e.text.length+(e.start+e.text.length>r.start?r.text.length:0)-i),c=s.slice(a,l),d=Math.max(e.end,r.end-e.text.length+(e.end-e.start));return Lr(t,{start:a,end:d,text:c})}function ki(t){var{path:e,diff:r}=t;return{anchor:{path:e,offset:r.start},focus:{path:e,offset:r.end}}}function yt(t,e){var{path:r,offset:a}=e;if(!v.hasPath(t,r))return null;var i=ee.get(t,r);if(!pe.isText(i))return null;var s=v.above(t,{match:c=>v.isBlock(t,c),at:r});if(!s)return null;for(;a>i.text.length;){var l=v.next(t,{at:r,match:pe.isText});if(!l||!q.isDescendant(l[1],s[1]))return null;a-=i.text.length,i=l[0],r=l[1]}return{path:r,offset:a}}function qt(t,e){var r=yt(t,e.anchor);if(!r)return null;if(M.isCollapsed(e))return{anchor:r,focus:r};var a=yt(t,e.focus);return a?{anchor:r,focus:a}:null}function Et(t,e,r){var a=oe.get(t),i=a==null?void 0:a.find(p=>{var{path:w}=p;return q.equals(w,e.path)});if(!i||e.offset<=i.diff.start)return We.transform(e,r,{affinity:"backward"});var{diff:s}=i;if(e.offset<=s.start+s.text.length){var l={path:e.path,offset:s.start},c=We.transform(l,r,{affinity:"backward"});return c?{path:c.path,offset:c.offset+e.offset-s.start}:null}var d={path:e.path,offset:e.offset-s.text.length+s.end-s.start},u=We.transform(d,r,{affinity:"backward"});return u?r.type==="split_node"&&q.equals(r.path,e.path)&&d.offset<r.position&&s.start<r.position?u:{path:u.path,offset:u.offset+s.text.length-s.end+s.start}:null}function $t(t,e,r){var a=Et(t,e.anchor,r);if(!a)return null;if(M.isCollapsed(e))return{anchor:a,focus:a};var i=Et(t,e.focus,r);return i?{anchor:a,focus:i}:null}function xi(t,e){var{path:r,diff:a,id:i}=t;switch(e.type){case"insert_text":return!q.equals(e.path,r)||e.offset>=a.end?t:e.offset<=a.start?{diff:{start:e.text.length+a.start,end:e.text.length+a.end,text:a.text},id:i,path:r}:{diff:{start:a.start,end:a.end+e.text.length,text:a.text},id:i,path:r};case"remove_text":return!q.equals(e.path,r)||e.offset>=a.end?t:e.offset+e.text.length<=a.start?{diff:{start:a.start-e.text.length,end:a.end-e.text.length,text:a.text},id:i,path:r}:{diff:{start:a.start,end:a.end-e.text.length,text:a.text},id:i,path:r};case"split_node":return!q.equals(e.path,r)||e.position>=a.end?{diff:a,id:i,path:q.transform(r,e,{affinity:"backward"})}:e.position>a.start?{diff:{start:a.start,end:Math.min(e.position,a.end),text:a.text},id:i,path:r}:{diff:{start:a.start-e.position,end:a.end-e.position,text:a.text},id:i,path:q.transform(r,e,{affinity:"forward"})};case"merge_node":return q.equals(e.path,r)?{diff:{start:a.start+e.position,end:a.end+e.position,text:a.text},id:i,path:q.transform(r,e)}:{diff:a,id:i,path:q.transform(r,e)}}var s=q.transform(r,e);return s?{diff:a,path:s,id:i}:null}function zt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,a)}return r}function Ke(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zt(Object(r),!0).forEach(function(a){Ze(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var Di=25,Ti=200,Mi=function(){};function Fi(t){var{editor:e,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:a}=t,i=!1,s=null,l=null,c=null,d=0,u=!1,p=()=>{var I=ye.get(e);if(ye.delete(e),I){var{selection:T}=e,F=qt(e,I);F&&(!T||!M.equals(F,T))&&j.select(e,F)}},w=()=>{var I=be.get(e);if(be.delete(e),!!I){if(I.at){var T=We.isPoint(I.at)?yt(e,I.at):qt(e,I.at);if(!T)return;var F=v.range(e,T);(!e.selection||!M.equals(e.selection,F))&&j.select(e,T)}I.run()}},h=()=>{var I;if(l&&(clearTimeout(l),l=null),c&&(clearTimeout(c),c=null),!_()&&!L()){p();return}i||(i=!0,setTimeout(()=>i=!1)),L()&&(i="action");var T=e.selection&&v.rangeRef(e,e.selection,{affinity:"forward"});ge.set(e,e.marks),Mi("flush",be.get(e),oe.get(e));for(var F=!!((I=oe.get(e))!==null&&I!==void 0&&I.length),x;x=(Y=oe.get(e))===null||Y===void 0?void 0:Y[0];){var Y,f,b=fe.get(e);b!==void 0&&(fe.delete(e),e.marks=b),b&&u===!1&&(u=null);var y=ki(x);(!e.selection||!M.equals(e.selection,y))&&j.select(e,y),x.diff.text?v.insertText(e,x.diff.text):v.deleteFragment(e),oe.set(e,(f=oe.get(e))===null||f===void 0?void 0:f.filter(H=>{var{id:U}=H;return U!==x.id})),yi(e,x)||(F=!1,be.delete(e),ge.delete(e),i="action",ye.delete(e),r.cancel(),a.cancel(),T==null||T.unref())}var P=T==null?void 0:T.unref();if(P&&!ye.get(e)&&(!e.selection||!M.equals(P,e.selection))&&j.select(e,P),L()){w();return}F&&r(),r.flush(),a.flush(),p();var R=ge.get(e);ge.delete(e),R!==void 0&&(e.marks=R,e.onChange())},n=I=>{s&&clearTimeout(s),s=setTimeout(()=>{ke.set(e,!1),h()},Di)},m=I=>{ke.set(e,!0),s&&(clearTimeout(s),s=null)},E=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,F=ze.get(e);if(F){if(_()||T){F.style.display="none";return}F.style.removeProperty("display")}},O=(I,T)=>{var F,x=(F=oe.get(e))!==null&&F!==void 0?F:[];oe.set(e,x);var Y=ee.leaf(e,I),f=x.findIndex(P=>q.equals(P.path,I));if(f<0){var b=Lr(Y.text,T);b&&x.push({path:I,diff:T,id:d++}),E();return}var y=Ci(Y.text,x[f].diff,T);if(!y){x.splice(f,1),E();return}x[f]=Ke(Ke({},x[f]),{},{diff:y})},D=function(T){var{at:F}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};u=!1,ye.delete(e),r.cancel(),a.cancel(),L()&&h(),be.set(e,{at:F,run:T}),c=setTimeout(h)},C=I=>{var T;l&&(clearTimeout(l),l=null);var{inputType:F}=I,x=null,Y=I.dataTransfer||I.data||void 0;u!==!1&&F!=="insertText"&&F!=="insertCompositionText"&&(u=!1);var[f]=I.getTargetRanges();f&&(x=g.toSlateRange(e,f,{exactMatch:!1,suppressThrow:!0}));var b=g.getWindow(e),y=b.getSelection();if(!x&&y&&(f=y,x=g.toSlateRange(e,y,{exactMatch:!1,suppressThrow:!0})),x=(T=x)!==null&&T!==void 0?T:e.selection,!!x){if(M.isExpanded(x)&&F.startsWith("delete")){var[P,R]=M.edges(x),H=ee.leaf(e,P.path);if(H.text.length===P.offset&&R.offset===0){var U=v.next(e,{at:P.path,match:pe.isText});U&&q.equals(U[1],R.path)&&(x={anchor:R,focus:R})}}if(M.isExpanded(x)&&F.startsWith("delete")){if(q.equals(x.anchor.path,x.focus.path)){var[z,te]=M.edges(x);return O(x.anchor.path,{text:"",end:te.offset,start:z.offset})}var X=F.endsWith("Backward")?"backward":"forward";return D(()=>v.deleteFragment(e,{direction:X}),{at:x})}switch(F){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return D(()=>v.deleteFragment(e),{at:x});case"deleteContent":case"deleteContentForward":{var{anchor:$}=x;if(M.isCollapsed(x)){var ie=ee.leaf(e,$.path);if($.offset<ie.text.length)return O($.path,{text:"",start:$.offset,end:$.offset+1})}return D(()=>v.deleteForward(e),{at:x})}case"deleteContentBackward":{var re,{anchor:ae}=x,le=wt(f)?f.isCollapsed:!!((re=f)!==null&&re!==void 0&&re.collapsed);return le&&M.isCollapsed(x)&&ae.offset>0?O(ae.path,{text:"",start:ae.offset-1,end:ae.offset}):D(()=>v.deleteBackward(e),{at:x})}case"deleteEntireSoftLine":return D(()=>{v.deleteBackward(e,{unit:"line"}),v.deleteForward(e,{unit:"line"})},{at:x});case"deleteHardLineBackward":return D(()=>v.deleteBackward(e,{unit:"block"}),{at:x});case"deleteSoftLineBackward":return D(()=>v.deleteBackward(e,{unit:"line"}),{at:x});case"deleteHardLineForward":return D(()=>v.deleteForward(e,{unit:"block"}),{at:x});case"deleteSoftLineForward":return D(()=>v.deleteForward(e,{unit:"line"}),{at:x});case"deleteWordBackward":return D(()=>v.deleteBackward(e,{unit:"word"}),{at:x});case"deleteWordForward":return D(()=>v.deleteForward(e,{unit:"word"}),{at:x});case"insertLineBreak":return D(()=>v.insertSoftBreak(e),{at:x});case"insertParagraph":return D(()=>v.insertBreak(e),{at:x});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if((Y==null?void 0:Y.constructor.name)==="DataTransfer")return D(()=>g.insertData(e,Y),{at:x});if(typeof Y=="string"&&Y.includes(`
`))return D(()=>v.insertSoftBreak(e),{at:M.end(x)});var ne=Y??"";if(fe.get(e)&&(ne=ne.replace("\uFEFF","")),q.equals(x.anchor.path,x.focus.path)){var[J,Te]=M.edges(x),he={start:J.offset,end:Te.offset,text:ne};if(ne&&u&&F==="insertCompositionText"){var je=u.start+u.text.search(/\S|$/),et=he.start+he.text.search(/\S|$/);et===je+1&&he.end===u.start+u.text.length?(he.start-=1,u=null,Q()):u=!1}else F==="insertText"?u===null?u=he:u&&M.isCollapsed(x)&&u.end+u.text.length===J.offset?u=Ke(Ke({},u),{},{text:u.text+ne}):u=!1:u=!1;O(J.path,he);return}return D(()=>v.insertText(e,ne),{at:x})}}}},L=()=>!!be.get(e),_=()=>{var I;return!!((I=oe.get(e))!==null&&I!==void 0&&I.length)},B=()=>L()||_(),W=()=>i,N=I=>{ye.set(e,I),l&&(clearTimeout(l),l=null);var{selection:T}=e;if(I){var F=!T||!q.equals(T.anchor.path,I.anchor.path),x=!T||!q.equals(T.anchor.path.slice(0,-1),I.anchor.path.slice(0,-1));(F&&u||x)&&(u=!1),(F||!_())&&(l=setTimeout(h,Ti))}},k=()=>{(L()||!_())&&h()},K=I=>{_()||(E(!0),setTimeout(E))},Q=()=>{L()||(c=setTimeout(h))},de=I=>{if(!(_()||L())&&I.some(F=>Tt(e,F,I))){var T;(T=br.get(e))===null||T===void 0||T()}};return{flush:h,scheduleFlush:Q,hasPendingDiffs:_,hasPendingAction:L,hasPendingChanges:B,isFlushing:W,handleUserSelect:N,handleCompositionEnd:n,handleCompositionStart:m,handleDOMBeforeInput:C,handleKeyDown:K,handleDomMutations:de,handleInput:k}}function Pi(){var t=S.useRef(!1);return S.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}function Ii(t,e,r){var[a]=S.useState(()=>new MutationObserver(e));xe(()=>{a.takeRecords()}),S.useEffect(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(t.current,r),()=>a.disconnect()},[])}var Li=["node"];function Vt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,a)}return r}function Ai(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vt(Object(r),!0).forEach(function(a){Ze(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var Bi={subtree:!0,childList:!0,characterData:!0};function Ri(t){var{node:e}=t,r=Pe(t,Li);if(!ue)return null;var a=Ee(),i=Pi(),[s]=S.useState(()=>Fi(Ai({editor:a},r)));return Ii(e,s.handleDomMutations,Bi),xt.set(a,s.scheduleFlush),i&&s.flush(),s}function Wi(){var t=Ee(),e=S.useRef(!1),r=S.useRef(0),a=S.useCallback(()=>{if(!e.current){e.current=!0;var i=g.getWindow(t);i.cancelAnimationFrame(r.current),r.current=i.requestAnimationFrame(()=>{e.current=!1})}},[]);return S.useEffect(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:e,onUserInput:a}}var _i=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as"],ji=["text"];function Yt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,a)}return r}function ft(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yt(Object(r),!0).forEach(function(a){Ze(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var Ni=t=>A.createElement(A.Fragment,null,Tr(t)),qe=0,Hi=t=>{var{autoFocus:e,decorate:r=Ui,onDOMBeforeInput:a,placeholder:i,readOnly:s=!1,renderElement:l,renderLeaf:c,renderPlaceholder:d=f=>A.createElement(Ar,Object.assign({},f)),scrollSelectionIntoView:u=Ki,style:p={},as:w="div"}=t,h=Pe(t,_i),n=Pr(),[m,E]=S.useState(!1),O=S.useRef(null),D=S.useRef([]),{onUserInput:C,receivedUserInput:L}=Wi(),[,_]=S.useReducer(f=>f+1,0);br.set(n,_),pt.set(n,s);var B=S.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);S.useEffect(()=>{O.current&&e&&O.current.focus()},[e]);var W=S.useCallback(Dn(()=>{if((ue||!g.isComposing(n))&&(!B.isUpdatingSelection||k!=null&&k.isFlushing())&&!B.isDraggingInternally){var f=g.findDocumentOrShadowRoot(n),{activeElement:b}=f,y=g.toDOMNode(n,n),P=f.getSelection();if(b===y?(B.latestElement=b,Ce.set(n,!0)):Ce.delete(n),!P)return j.deselect(n);var{anchorNode:R,focusNode:H}=P,U=g.hasEditableTarget(n,R)||g.isTargetInsideNonReadonlyVoid(n,R),z=g.hasEditableTarget(n,H)||g.isTargetInsideNonReadonlyVoid(n,H);if(U&&z){var te=g.toSlateRange(n,P,{exactMatch:!1,suppressThrow:!0});te&&(!g.isComposing(n)&&!(k!=null&&k.hasPendingChanges())&&!(k!=null&&k.isFlushing())?j.select(n,te):k==null||k.handleUserSelect(te))}s&&(!U||!z)&&j.deselect(n)}},100),[s]),N=S.useMemo(()=>ur(W,0),[W]),k=Ri({node:O,onDOMSelectionChange:W,scheduleOnDOMSelectionChange:N});xe(()=>{var f;O.current&&(f=Dt(O.current))?(wr.set(n,f),vt.set(n,O.current),Ie.set(n,O.current),Je.set(O.current,n)):Ie.delete(n);var{selection:b}=n,y=g.findDocumentOrShadowRoot(n),P=y.getSelection();if(!(!P||!g.isFocused(n)||k!=null&&k.hasPendingAction())){var R=X=>{var $=P.type!=="None";if(!(!b&&!$)){var ie=vt.get(n),re=!1;if(ie.contains(P.anchorNode)&&ie.contains(P.focusNode)&&(re=!0),$&&re&&b&&!X){var ae=g.toSlateRange(n,P,{exactMatch:!0,suppressThrow:!0});if(ae&&M.equals(ae,b)){var le;if(!B.hasMarkPlaceholder)return;var{anchorNode:ne}=P;if(ne!=null&&(le=ne.parentElement)!==null&&le!==void 0&&le.hasAttribute("data-slate-mark-placeholder"))return}}if(b&&!g.hasRange(n,b)){n.selection=g.toSlateRange(n,P,{exactMatch:!1,suppressThrow:!0});return}B.isUpdatingSelection=!0;var J=b&&g.toDOMRange(n,b);return J?(M.isBackward(b)?P.setBaseAndExtent(J.endContainer,J.endOffset,J.startContainer,J.startOffset):P.setBaseAndExtent(J.startContainer,J.startOffset,J.endContainer,J.endOffset),u(n,J)):P.removeAllRanges(),J}},H=R(),U=(k==null?void 0:k.isFlushing())==="action";if(!ue||!U){setTimeout(()=>{if(H&&bt){var X=g.toDOMNode(n,n);X.focus()}B.isUpdatingSelection=!1});return}var z=null,te=requestAnimationFrame(()=>{if(U){var X=$=>{try{var ie=g.toDOMNode(n,n);ie.focus(),R($)}catch{}};X(),z=setTimeout(()=>{X(!0),B.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(te),z&&clearTimeout(z)}}});var K=S.useCallback(f=>{if(C(),!s&&g.hasEditableTarget(n,f.target)&&!qi(f,a)){var b;if(k)return k.handleDOMBeforeInput(f);N.flush(),W.flush();var{selection:y}=n,{inputType:P}=f,R=f.dataTransfer||f.data||void 0,H=P==="insertCompositionText"||P==="deleteCompositionText";if(H&&g.isComposing(n))return;var U=!1;if(P==="insertText"&&y&&M.isCollapsed(y)&&f.data&&f.data.length===1&&/[a-z ]/i.test(f.data)&&y.anchor.offset!==0){var z,te;U=!0,n.marks&&(U=!1);var{anchor:X}=y,[$,ie]=g.toDOMPoint(n,X),re=(z=$.parentElement)===null||z===void 0?void 0:z.closest("a"),ae=g.getWindow(n);if(U&&re&&g.hasDOMNode(n,re)){var le,ne=ae==null?void 0:ae.document.createTreeWalker(re,NodeFilter.SHOW_TEXT).lastChild();ne===$&&((le=ne.textContent)===null||le===void 0?void 0:le.length)===ie&&(U=!1)}if(U&&$.parentElement&&(ae==null||(te=ae.getComputedStyle($.parentElement))===null||te===void 0?void 0:te.whiteSpace)==="pre"){var J=v.above(n,{at:X.path,match:Wr=>v.isBlock(n,Wr)});J&&ee.string(J[0]).includes("	")&&(U=!1)}}if(!P.startsWith("delete")||P.startsWith("deleteBy")){var[Te]=f.getTargetRanges();if(Te){var he=g.toSlateRange(n,Te,{exactMatch:!1,suppressThrow:!1});if(!y||!M.equals(y,he)){U=!1;var je=!H&&n.selection&&v.rangeRef(n,n.selection);j.select(n,he),je&&_e.set(n,je)}}}if(H)return;if(U||f.preventDefault(),y&&M.isExpanded(y)&&P.startsWith("delete")){var et=P.endsWith("Backward")?"backward":"forward";v.deleteFragment(n,{direction:et});return}switch(P){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{v.deleteFragment(n);break}case"deleteContent":case"deleteContentForward":{v.deleteForward(n);break}case"deleteContentBackward":{v.deleteBackward(n);break}case"deleteEntireSoftLine":{v.deleteBackward(n,{unit:"line"}),v.deleteForward(n,{unit:"line"});break}case"deleteHardLineBackward":{v.deleteBackward(n,{unit:"block"});break}case"deleteSoftLineBackward":{v.deleteBackward(n,{unit:"line"});break}case"deleteHardLineForward":{v.deleteForward(n,{unit:"block"});break}case"deleteSoftLineForward":{v.deleteForward(n,{unit:"line"});break}case"deleteWordBackward":{v.deleteBackward(n,{unit:"word"});break}case"deleteWordForward":{v.deleteForward(n,{unit:"word"});break}case"insertLineBreak":v.insertSoftBreak(n);break;case"insertParagraph":{v.insertBreak(n);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{P==="insertFromComposition"&&g.isComposing(n)&&(E(!1),ke.set(n,!1)),(R==null?void 0:R.constructor.name)==="DataTransfer"?g.insertData(n,R):typeof R=="string"&&(U?D.current.push(()=>v.insertText(n,R)):v.insertText(n,R));break}}var tt=(b=_e.get(n))===null||b===void 0?void 0:b.unref();_e.delete(n),tt&&(!n.selection||!M.equals(n.selection,tt))&&j.select(n,tt)}},[s,a]);xe(()=>(O.current&&we&&O.current.addEventListener("beforeinput",K),()=>{O.current&&we&&O.current.removeEventListener("beforeinput",K)}),[K]),xe(()=>{var f=g.getWindow(n);return f.document.addEventListener("selectionchange",N),()=>{f.document.removeEventListener("selectionchange",N)}},[N]);var Q=r([n,[]]);if(i&&n.children.length===1&&Array.from(ee.texts(n)).length===1&&ee.string(n)===""&&!m){var de=v.start(n,[]);Q.push({[Le]:!0,placeholder:i,anchor:de,focus:de})}var{marks:I}=n;if(B.hasMarkPlaceholder=!1,n.selection&&M.isCollapsed(n.selection)&&I){var{anchor:T}=n.selection,F=ee.leaf(n,T.path),x=Pe(F,ji);if(!pe.equals(F,I,{loose:!0})){B.hasMarkPlaceholder=!0;var Y=Object.fromEntries(Object.keys(x).map(f=>[f,null]));Q.push(ft(ft(ft({[yr]:!0},Y),I),{},{anchor:T,focus:T}))}}return S.useEffect(()=>{setTimeout(()=>{var{selection:f}=n;if(f){var{anchor:b}=f,y=ee.leaf(n,b.path);if(I&&!pe.equals(y,I,{loose:!0})){fe.set(n,I);return}}fe.delete(n)})}),S.useEffect(()=>{if(qe++,qe===1){var f=document.createElement("style");f.setAttribute("data-slate-default-styles","true"),f.innerHTML=":where([data-slate-editor]) {position: relative;outline: none;white-space: pre-wrap;word-wrap: break-word;}",document.head.appendChild(f)}return()=>{var b;qe--,qe<=0&&((b=document.querySelector("style[data-slate-default-styles]"))===null||b===void 0||b.remove())}},[]),S.useEffect(()=>{var f=document.createElement("style");return document.head.appendChild(f),Ge.set(n,f),()=>{f.remove(),Ge.delete(n)}},[]),A.createElement(Mr.Provider,{value:s},A.createElement(Dr.Provider,{value:r},A.createElement(bi,{node:O,receivedUserInput:L},A.createElement(w,Object.assign({role:s?void 0:"textbox","aria-multiline":s?void 0:!0},h,{spellCheck:we||!Ve?h.spellCheck:!1,autoCorrect:we||!Ve?h.autoCorrect:"false",autoCapitalize:we||!Ve?h.autoCapitalize:"false","data-slate-editor":!0,"data-slate-editor-id":n.id,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:O,style:p,onBeforeInput:S.useCallback(f=>{if(!we&&!s&&!se(f,h.onBeforeInput)&&g.hasSelectableTarget(n,f.target)&&(f.preventDefault(),!g.isComposing(n))){var b=f.data;v.insertText(n,b)}},[s]),onInput:S.useCallback(f=>{if(k){k.handleInput();return}for(var b of D.current)b();D.current=[]},[]),onBlur:S.useCallback(f=>{if(!(s||B.isUpdatingSelection||!g.hasSelectableTarget(n,f.target)||se(f,h.onBlur))){var b=g.findDocumentOrShadowRoot(n);if(B.latestElement!==b.activeElement){var{relatedTarget:y}=f,P=g.toDOMNode(n,n);if(y!==P&&!(ce(y)&&y.hasAttribute("data-slate-spacer"))){if(y!=null&&De(y)&&g.hasDOMNode(n,y)){var R=g.toSlateNode(n,y);if(Ye.isElement(R)&&!n.isVoid(R))return}if(ct){var H=b.getSelection();H==null||H.removeAllRanges()}Ce.delete(n)}}}},[s,h.onBlur]),onClick:S.useCallback(f=>{if(g.hasTarget(n,f.target)&&!se(f,h.onClick)&&De(f.target)){var b=g.toSlateNode(n,f.target),y=g.findPath(n,b);if(!v.hasPath(n,y)||ee.get(n,y)!==b)return;if(f.detail===hi&&y.length>=1){var P=y;if(!v.isBlock(n,b)){var R,H=v.above(n,{match:re=>v.isBlock(n,re),at:y});P=(R=H==null?void 0:H[1])!==null&&R!==void 0?R:y.slice(0,1)}var U=v.range(n,P);j.select(n,U);return}if(s)return;var z=v.start(n,y),te=v.end(n,y),X=v.void(n,{at:z}),$=v.void(n,{at:te});if(X&&$&&q.equals(X[1],$[1])){var ie=v.range(n,z);j.select(n,ie)}}},[s,h.onClick]),onCompositionEnd:S.useCallback(f=>{if(g.hasSelectableTarget(n,f.target)){if(g.isComposing(n)&&(E(!1),ke.set(n,!1)),k==null||k.handleCompositionEnd(f),se(f,h.onCompositionEnd)||ue)return;if(!ct&&!Xn&&!Vn&&!Jn&&!Zn&&f.data){var b=fe.get(n);fe.delete(n),b!==void 0&&(ge.set(n,n.marks),n.marks=b),v.insertText(n,f.data);var y=ge.get(n);ge.delete(n),y!==void 0&&(n.marks=y)}}},[h.onCompositionEnd]),onCompositionUpdate:S.useCallback(f=>{g.hasSelectableTarget(n,f.target)&&!se(f,h.onCompositionUpdate)&&(g.isComposing(n)||(E(!0),ke.set(n,!0)))},[h.onCompositionUpdate]),onCompositionStart:S.useCallback(f=>{if(g.hasSelectableTarget(n,f.target)){if(k==null||k.handleCompositionStart(f),se(f,h.onCompositionStart)||ue)return;E(!0);var{selection:b}=n;if(b){if(M.isExpanded(b)){v.deleteFragment(n);return}var y=v.above(n,{match:H=>v.isInline(n,H),mode:"highest"});if(y){var[,P]=y;if(v.isEnd(n,b.anchor,P)){var R=v.after(n,P);j.setSelection(n,{anchor:R,focus:R})}}}}},[h.onCompositionStart]),onCopy:S.useCallback(f=>{g.hasSelectableTarget(n,f.target)&&!se(f,h.onCopy)&&(f.preventDefault(),g.setFragmentData(n,f.clipboardData,"copy"))},[h.onCopy]),onCut:S.useCallback(f=>{if(!s&&g.hasSelectableTarget(n,f.target)&&!se(f,h.onCut)){f.preventDefault(),g.setFragmentData(n,f.clipboardData,"cut");var{selection:b}=n;if(b)if(M.isExpanded(b))v.deleteFragment(n);else{var y=ee.parent(n,b.anchor.path);v.isVoid(n,y)&&j.delete(n)}}},[s,h.onCut]),onDragOver:S.useCallback(f=>{if(g.hasTarget(n,f.target)&&!se(f,h.onDragOver)){var b=g.toSlateNode(n,f.target);v.isVoid(n,b)&&f.preventDefault()}},[h.onDragOver]),onDragStart:S.useCallback(f=>{if(!s&&g.hasTarget(n,f.target)&&!se(f,h.onDragStart)){var b=g.toSlateNode(n,f.target),y=g.findPath(n,b),P=v.isVoid(n,b)||v.void(n,{at:y,voids:!0});if(P){var R=v.range(n,y);j.select(n,R)}B.isDraggingInternally=!0,g.setFragmentData(n,f.dataTransfer,"drag")}},[s,h.onDragStart]),onDrop:S.useCallback(f=>{if(!s&&g.hasTarget(n,f.target)&&!se(f,h.onDrop)){f.preventDefault();var b=n.selection,y=g.findEventRange(n,f),P=f.dataTransfer;j.select(n,y),B.isDraggingInternally&&b&&!M.equals(b,y)&&!v.void(n,{at:y,voids:!0})&&j.delete(n,{at:b}),g.insertData(n,P),g.isFocused(n)||g.focus(n)}B.isDraggingInternally=!1},[s,h.onDrop]),onDragEnd:S.useCallback(f=>{!s&&B.isDraggingInternally&&h.onDragEnd&&g.hasTarget(n,f.target)&&h.onDragEnd(f),B.isDraggingInternally=!1},[s,h.onDragEnd]),onFocus:S.useCallback(f=>{if(!s&&!B.isUpdatingSelection&&g.hasEditableTarget(n,f.target)&&!se(f,h.onFocus)){var b=g.toDOMNode(n,n),y=g.findDocumentOrShadowRoot(n);if(B.latestElement=y.activeElement,bt&&f.target!==b){b.focus();return}Ce.set(n,!0)}},[s,h.onFocus]),onKeyDown:S.useCallback(f=>{if(!s&&g.hasEditableTarget(n,f.target)){k==null||k.handleKeyDown(f);var{nativeEvent:b}=f;if(g.isComposing(n)&&b.isComposing===!1&&(ke.set(n,!1),E(!1)),se(f,h.onKeyDown)||g.isComposing(n))return;var{selection:y}=n,P=n.children[y!==null?y.focus.path[0]:0],R=sr(ee.string(P))==="rtl";if(G.isRedo(b)){f.preventDefault();var H=n;typeof H.redo=="function"&&H.redo();return}if(G.isUndo(b)){f.preventDefault();var U=n;typeof U.undo=="function"&&U.undo();return}if(G.isMoveLineBackward(b)){f.preventDefault(),j.move(n,{unit:"line",reverse:!0});return}if(G.isMoveLineForward(b)){f.preventDefault(),j.move(n,{unit:"line"});return}if(G.isExtendLineBackward(b)){f.preventDefault(),j.move(n,{unit:"line",edge:"focus",reverse:!0});return}if(G.isExtendLineForward(b)){f.preventDefault(),j.move(n,{unit:"line",edge:"focus"});return}if(G.isMoveBackward(b)){f.preventDefault(),y&&M.isCollapsed(y)?j.move(n,{reverse:!R}):j.collapse(n,{edge:"start"});return}if(G.isMoveForward(b)){f.preventDefault(),y&&M.isCollapsed(y)?j.move(n,{reverse:R}):j.collapse(n,{edge:"end"});return}if(G.isMoveWordBackward(b)){f.preventDefault(),y&&M.isExpanded(y)&&j.collapse(n,{edge:"focus"}),j.move(n,{unit:"word",reverse:!R});return}if(G.isMoveWordForward(b)){f.preventDefault(),y&&M.isExpanded(y)&&j.collapse(n,{edge:"focus"}),j.move(n,{unit:"word",reverse:R});return}if(we){if((Cr||ct)&&y&&(G.isDeleteBackward(b)||G.isDeleteForward(b))&&M.isCollapsed(y)){var z=ee.parent(n,y.anchor.path);if(Ye.isElement(z)&&v.isVoid(n,z)&&(v.isInline(n,z)||v.isBlock(n,z))){f.preventDefault(),v.deleteBackward(n,{unit:"block"});return}}}else{if(G.isBold(b)||G.isItalic(b)||G.isTransposeCharacter(b)){f.preventDefault();return}if(G.isSoftBreak(b)){f.preventDefault(),v.insertSoftBreak(n);return}if(G.isSplitBlock(b)){f.preventDefault(),v.insertBreak(n);return}if(G.isDeleteBackward(b)){f.preventDefault(),y&&M.isExpanded(y)?v.deleteFragment(n,{direction:"backward"}):v.deleteBackward(n);return}if(G.isDeleteForward(b)){f.preventDefault(),y&&M.isExpanded(y)?v.deleteFragment(n,{direction:"forward"}):v.deleteForward(n);return}if(G.isDeleteLineBackward(b)){f.preventDefault(),y&&M.isExpanded(y)?v.deleteFragment(n,{direction:"backward"}):v.deleteBackward(n,{unit:"line"});return}if(G.isDeleteLineForward(b)){f.preventDefault(),y&&M.isExpanded(y)?v.deleteFragment(n,{direction:"forward"}):v.deleteForward(n,{unit:"line"});return}if(G.isDeleteWordBackward(b)){f.preventDefault(),y&&M.isExpanded(y)?v.deleteFragment(n,{direction:"backward"}):v.deleteBackward(n,{unit:"word"});return}if(G.isDeleteWordForward(b)){f.preventDefault(),y&&M.isExpanded(y)?v.deleteFragment(n,{direction:"forward"}):v.deleteForward(n,{unit:"word"});return}}}},[s,h.onKeyDown]),onPaste:S.useCallback(f=>{!s&&g.hasSelectableTarget(n,f.target)&&!se(f,h.onPaste)&&(!we||Nn(f.nativeEvent))&&(f.preventDefault(),g.insertData(n,f.clipboardData))},[s,h.onPaste])}),A.createElement(Ni,{decorations:Q,node:n,renderElement:l,renderPlaceholder:d,renderLeaf:c,selection:n.selection})))))},Ar=t=>{var{attributes:e,children:r}=t;return A.createElement("span",Object.assign({},e),r,ue&&A.createElement("br",null))},Ui=()=>[],Ki=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&M.isCollapsed(t.selection))){var r=e.startContainer.parentElement;r.getBoundingClientRect=e.getBoundingClientRect.bind(e),Fn(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},se=(t,e)=>{if(!e)return!1;var r=e(t);return r??(t.isDefaultPrevented()||t.isPropagationStopped())},qi=(t,e)=>{if(!e)return!1;var r=e(t);return r??t.defaultPrevented},$i=S.createContext(!1),zi=S.createContext({});function Vi(t){var e=S.useRef([]).current,r=S.useRef({editor:t}).current,a=S.useCallback(s=>{r.editor=s,e.forEach(l=>l(s))},[]),i=S.useMemo(()=>({getSlate:()=>r.editor,addEventListener:s=>(e.push(s),()=>{e.splice(e.indexOf(s),1)})}),[e,r]);return{selectorContext:i,onChange:a}}var Yi=["editor","children","onChange","value"],Gi=t=>{var{editor:e,children:r,onChange:a,value:i}=t,s=Pe(t,Yi),l=S.useRef(!1),[c,d]=A.useState(()=>{if(!ee.isNodeList(i))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(Re.stringify(i)));if(!v.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(Re.stringify(e)));return e.children=i,Object.assign(e,s),{v:0,editor:e}}),{selectorContext:u,onChange:p}=Vi(e),w=S.useCallback(()=>{a&&a(e.children),d(m=>({v:m.v+1,editor:e})),p(e)},[a]);mt.set(e,w),S.useEffect(()=>()=>{mt.set(e,()=>{}),l.current=!0},[]);var[h,n]=S.useState(g.isFocused(e));return S.useEffect(()=>{n(g.isFocused(e))}),xe(()=>{var m=()=>n(g.isFocused(e));return zn?(document.addEventListener("focusin",m),document.addEventListener("focusout",m),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",m)}):(document.addEventListener("focus",m,!0),document.addEventListener("blur",m,!0),()=>{document.removeEventListener("focus",m,!0),document.removeEventListener("blur",m,!0)})},[]),A.createElement(zi.Provider,{value:u},A.createElement(Fr.Provider,{value:c},A.createElement(Mt.Provider,{value:c.editor},A.createElement($i.Provider,{value:h},r))))},Gt=(t,e)=>{var r=(e.top+e.bottom)/2;return t.top<=r&&t.bottom>=r},Xt=(t,e,r)=>{var a=g.toDOMRange(t,e).getBoundingClientRect(),i=g.toDOMRange(t,r).getBoundingClientRect();return Gt(a,i)&&Gt(i,a)},Xi=(t,e)=>{var r=v.range(t,M.end(e)),a=Array.from(v.positions(t,{at:e})),i=0,s=a.length,l=Math.floor(s/2);if(Xt(t,v.range(t,a[i]),r))return v.range(t,a[i],r);if(a.length<2)return v.range(t,a[a.length-1],r);for(;l!==a.length&&l!==i;)Xt(t,v.range(t,a[l]),r)?s=l:i=l,l=Math.floor((i+s)/2);return v.range(t,a[s],r)};function Zt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,a)}return r}function Jt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zt(Object(r),!0).forEach(function(a){Ze(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var Zi=t=>{var e=t,{apply:r,onChange:a,deleteBackward:i,addMark:s,removeMark:l}=e;return Qe.set(e,new WeakMap),e.addMark=(c,d)=>{var u,p;(u=xt.get(e))===null||u===void 0||u(),!fe.get(e)&&(p=oe.get(e))!==null&&p!==void 0&&p.length&&fe.set(e,null),ge.delete(e),s(c,d)},e.removeMark=c=>{var d;!fe.get(e)&&(d=oe.get(e))!==null&&d!==void 0&&d.length&&fe.set(e,null),ge.delete(e),l(c)},e.deleteBackward=c=>{if(c!=="line")return i(c);if(e.selection&&M.isCollapsed(e.selection)){var d=v.above(e,{match:h=>v.isBlock(e,h),at:e.selection});if(d){var[,u]=d,p=v.range(e,u,e.selection.anchor),w=Xi(e,p);M.isCollapsed(w)||j.delete(e,{at:w})}}},e.apply=c=>{var d=[],u=oe.get(e);if(u!=null&&u.length){var p=u.map(_=>xi(_,c)).filter(Boolean);oe.set(e,p)}var w=ye.get(e);w&&ye.set(e,$t(e,w,c));var h=be.get(e);if(h!=null&&h.at){var n=We.isPoint(h==null?void 0:h.at)?Et(e,h.at,c):$t(e,h.at,c);be.set(e,n?Jt(Jt({},h),{},{at:n}):null)}switch(c.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{d.push(...$e(e,c.path));break}case"set_selection":{var m;(m=_e.get(e))===null||m===void 0||m.unref(),_e.delete(e);break}case"insert_node":case"remove_node":{d.push(...$e(e,q.parent(c.path)));break}case"merge_node":{var E=q.previous(c.path);d.push(...$e(e,E));break}case"move_node":{var O=q.common(q.parent(c.path),q.parent(c.newPath));d.push(...$e(e,O));break}}r(c);for(var[D,C]of d){var[L]=v.node(e,D);gt.set(L,C)}},e.setFragmentData=c=>{var{selection:d}=e;if(d){var[u,p]=M.edges(d),w=v.void(e,{at:u.path}),h=v.void(e,{at:p.path});if(!(M.isCollapsed(d)&&!w)){var n=g.toDOMRange(e,d),m=n.cloneContents(),E=m.childNodes[0];if(m.childNodes.forEach(k=>{k.textContent&&k.textContent.trim()!==""&&(E=k)}),h){var[O]=h,D=n.cloneRange(),C=g.toDOMNode(e,O);D.setEndAfter(C),m=D.cloneContents()}if(w&&(E=m.querySelector("[data-slate-spacer]")),Array.from(m.querySelectorAll("[data-slate-zero-width]")).forEach(k=>{var K=k.getAttribute("data-slate-zero-width")==="n";k.textContent=K?`
`:""}),Er(E)){var L=E.ownerDocument.createElement("span");L.style.whiteSpace="pre",L.appendChild(E),m.appendChild(L),E=L}var _=e.getFragment(),B=JSON.stringify(_),W=window.btoa(encodeURIComponent(B));E.setAttribute("data-slate-fragment",W),c.setData("application/x-slate-fragment",W);var N=m.ownerDocument.createElement("div");return N.appendChild(m),N.setAttribute("hidden","true"),m.ownerDocument.body.appendChild(N),c.setData("text/html",N.innerHTML),c.setData("text/plain",Or(N)),m.ownerDocument.body.removeChild(N),c}}},e.insertData=c=>{e.insertFragmentData(c)||e.insertTextData(c)},e.insertFragmentData=c=>{var d=c.getData("application/x-slate-fragment")||$n(c);if(d){var u=decodeURIComponent(window.atob(d)),p=JSON.parse(u);return e.insertFragment(p),!0}return!1},e.insertTextData=c=>{var d=c.getData("text/plain");if(d){var u=d.split(/\r\n|\r|\n/),p=!1;for(var w of u)p&&j.splitNodes(e,{always:!0}),e.insertText(w),p=!0;return!0}return!1},e.onChange=()=>{Kr.unstable_batchedUpdates(()=>{var c=mt.get(e);c&&c(),a()})},e},$e=(t,e)=>{var r=[];for(var[a,i]of v.levels(t,{at:e})){var s=g.findKey(t,a);r.push([i,s])}return r};const Ji=(...t)=>t.filter(e=>e!=null&&e!==""&&typeof e!="boolean").join(" "),Qi=({suggestionState:{candidates:t,selection:e,rawInput:r},suggestionDispatch:a,inputStart:i,avro:s})=>{const l=Pr(),{x:c,y:d,reference:u,floating:p,strategy:w,refs:h}=qr({placement:"bottom-start",middleware:[$r(),zr(),Vr(({placement:n})=>({crossAxis:n.endsWith("start")?-9:0,mainAxis:3}))]});return S.useLayoutEffect(()=>{const{selection:n}=l,m=i;if(m!==null&&r!==""&&n!==null&&M.isCollapsed(n)){const{x:E,y:O,width:D,height:C}=g.toDOMRange(l,v.range(l,m,M.end(n))).getBoundingClientRect(),{scrollX:L,scrollY:_}=window;u({getBoundingClientRect:()=>DOMRectReadOnly.fromRect({x:E+L-window.scrollX,y:O+_-window.scrollY,width:D,height:C})})}else u(null)},[u,l,i,r]),h.reference.current!==null&&t.length>1?er("div",{ref:p,style:{position:w,top:d??"",left:c??""},className:"popper",children:[Oe("div",{className:"px-2",children:r}),Oe("ol",{className:"list-decimal list-inside p-px border-t dark:border-black horizontal:flex horizontal:flex-wrap",children:t.map((n,m)=>Oe("li",{className:Ji("px-2 py-px",m===e?"bg-green-300 dark:bg-rose-700":"hover:bg-green-200 dark:hover:bg-rose-600"),onClick:()=>{Rr(l,i,n),s.commit(r,n),a({type:"clearSuggestion"}),g.focus(l)},children:n},n))})]}):null},es=A.memo(Qi),Br={candidates:[],selection:null,rawInput:""},ts=(t,e)=>{switch(e.type){case"setSuggestion":{const{candidates:r,prevSelection:a,rawInput:i}=e.payload;if(r.length&&a in r)return{candidates:r,selection:a,rawInput:i};throw new Error("Invalid payload")}case"clearSuggestion":return Br;case"selectNext":return{candidates:t.candidates,selection:t.candidates.length===0||t.selection===null?null:(t.selection+1)%t.candidates.length,rawInput:t.rawInput};case"selectPrevious":return{candidates:t.candidates,selection:t.candidates.length===0||t.selection===null?null:(t.selection||t.candidates.length)-1,rawInput:t.rawInput};default:throw new Error}},rs=({initialValue:t})=>{const e=S.useMemo(()=>wa(Zi(Yr())),[]),r=Gr(Xr),a=Zr(()=>new pa),i=Jr(),[s,l]=S.useReducer(ts,Br),c=S.useRef(null),d=S.useCallback(p=>{const{key:w}=p;if(!(!r||p.nativeEvent.isComposing||as.has(w)||w==="Unidentified")){if(/^[^\P{ASCII} ]$/u.test(w)&&!(p.ctrlKey||p.altKey||p.metaKey)){p.preventDefault();const{selection:h}=e;h&&(M.isCollapsed(h)?a.ongoingInputSession||(c.current=M.start(h)):(j.insertText(e,""),c.current=M.start(h)));const n=a.getSuggestionForKey(w);l({type:"setSuggestion",payload:n});return}if(a.ongoingInputSession){if(s.candidates.length>1){const h=window.innerHeight<360;if(w===(h?"ArrowRight":"ArrowDown")||w==="Tab"||w==="n"&&p.ctrlKey){p.preventDefault(),l({type:"selectNext"});return}else if(w===(h?"ArrowLeft":"ArrowUp")||w==="p"&&p.ctrlKey){p.preventDefault(),l({type:"selectPrevious"});return}}switch(w){case"Backspace":{const h=a.getSuggestionForBackspace();h!==null?(p.preventDefault(),l({type:"setSuggestion",payload:h})):l({type:"clearSuggestion"});return}case"Enter":Qt(a,s,p);break;default:Qt(a,s)}}l({type:"clearSuggestion"})}},[a,i,e,r,s]),u=S.useCallback(()=>{s.selection!==null?a.commit(s.rawInput,s.candidates[s.selection]):a.closeInputSession(),l({type:"clearSuggestion"})},[a,s.candidates,s.rawInput,s.selection]);return S.useEffect(()=>{g.isFocused(e)||(g.focus(e),j.select(e,v.range(e,v.end(e,[]))))},[e]),S.useEffect(()=>{s.selection!==null&&Rr(e,c.current,s.candidates[s.selection])},[e,s.candidates,s.selection]),er(Gi,{editor:e,value:t,onChange:p=>{e.operations.some(h=>h.type!=="set_selection")&&(i(Qr()),i(ea(p)))},children:[Oe(Hi,{"aria-label":"slate",inputMode:"none",onKeyDown:d,onClick:u,placeholder:"Write Here",renderPlaceholder:p=>(p.attributes.style.opacity="0.54",Oe(Ar,{...p})),className:"p-3 flex-grow md:max-h-screen overflow-y-auto"}),Oe(ta,{children:r&&Oe(es,{suggestionState:s,suggestionDispatch:l,inputStart:c.current,avro:a})})]})},Rr=(t,e,r)=>{const{selection:a}=t;e!==null&&a&&M.isCollapsed(a)&&(j.setSelection(t,{anchor:e}),j.insertText(t,r))},Qt=(t,{candidates:e,selection:r,rawInput:a},i)=>{r!==null?(i==null||i.preventDefault(),t.commit(a,e[r])):t.closeInputSession()},as=new Set(["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","NumLock","OS","ScrollLock","Shift","Super","Symbol","SymbolLock"]),ss=A.memo(rs);export{ss as default,Rr as updatePreEdit};
