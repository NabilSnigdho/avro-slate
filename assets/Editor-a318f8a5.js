var gn=Object.defineProperty;var mn=(t,e,r)=>e in t?gn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var De=(t,e,r)=>(mn(t,typeof e!="symbol"?e+"":e,r),r);import{P as wn,d as Ae,t as bn,T as W,E as p,O as Ct,a as q,i as En,c as Xe,R,S as Ke,b as M,e as de,r as S,N as te,f as Ee,g as qe,h as yn,u as On,j as Sn,k as xn,l as Cn,m as kr,n as Te,o as kn,p as Dn,q as Tn,s as Mn,v as Fn,w as Pn,x as Bn,y as Rn,$ as In}from"./index-13ce38e3.js";var kt=(t=>(t[t.Prefix=0]="Prefix",t[t.Suffix=1]="Suffix",t))(kt||{}),Ue=(t=>(t[t.Vowel=0]="Vowel",t[t.Consonant=1]="Consonant",t[t.Punctuation=2]="Punctuation",t[t.Exact=3]="Exact",t))(Ue||{});const J="‍",o="‌",Dr=[{find:"chchh",replace:"((চ্ছ)|((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?(((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?((হ|ঃ|(হ্"+o+"?)))?)|([চছ]্?((হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?))))|([চছ]্?(হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?)))))|((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?(হ|ঃ|(হ্"+o+"?)))|([চছ]্?(হ|ঃ|(হ্"+o+"?))্?[চছ]্?(হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngkkh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?)))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngksh",replace:"(((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"kkhm",replace:"((((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))))্?ম)|((ক্?ক?)্?((হ|ঃ|(হ্"+o+"?))্?ম))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))্?ম)|(ক্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?))))্?ম))"},{find:"kkhn",replace:"((((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|((ক্?ক?)্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং])|(ক্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং]))"},{find:"kshm",replace:"((((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|(ক্?(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|([সশষ]্?((হ|ঃ|(হ্"+o+"?))্?ম))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?ম)))|((ক্?[সশষ])্?((হ|ঃ|(হ্"+o+"?))্?ম))|(ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))্?ম))"},{find:"kshn",replace:"((((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|(ক্?(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|([সশষ]্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং])))|((ক্?[সশষ])্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|(ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))"},{find:"ngch",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?)))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?[চছ])|([নণঁঙঞং]্?(গ|(জ্ঞ))্?[চছ]))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?[চছ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nggh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|([নণঁঙঞং]্?((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?((((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))্?(হ|ঃ|(হ্"+o+"?)))|((গ|(জ্ঞ))্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|((গ|(জ্ঞ))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))|(((ঙ্গ)|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(গ|(জ্ঞ)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(গ|(জ্ঞ))))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngjh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?)))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?([জয]|(জ়)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?([জয]|(জ়))))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngkh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?(হ|ঃ|(হ্"+o+"?)))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngkx",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্ষ)|(ক্?((ক্স)|ষ))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?((ক্স)|ষ))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?((ক্ষ)|(ক্?((ক্স)|ষ))))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?((ক্স)|ষ)))"},{find:"shsh",replace:"((((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))?্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"thth",replace:"((ত্থ)|(((থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))?্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))|([তটৎ]্?(হ|ঃ|(হ্"+o+"?))্?[তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"bbh",replace:"((ব?্?(ভ|(ব্?(হ|ঃ|(হ্"+o+"?)))))|((ব্?ব?)্?(হ|ঃ|(হ্"+o+"?)))|(ব্?ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"bdh",replace:"((ব্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|((ব্?[দড])্?(হ|ঃ|(হ্"+o+"?)))|(ব্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"bhl",replace:"(((ভ|(ব্?(হ|ঃ|(হ্"+o+"?))))্?ল)|(ব্?((হ|ঃ|(হ্"+o+"?))্?ল))|(ব্?(হ|ঃ|(হ্"+o+"?))্?ল))"},{find:"cch",replace:"(([চছ]্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?)))))|([চছ]্?[চছ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"chh",replace:"(((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))্?((হ|ঃ|(হ্"+o+"?)))?)|([চছ]্?((হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?))))|([চছ]্?(হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"cng",replace:"((চ্ঞ)|([চছ]্?(ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ)))))|([চছ]্?[নণঁঙঞং]্?(গ|(জ্ঞ)))|(([চছ]্?[নণঁঙঞং])্?(গ|(জ্ঞ))))"},{find:"dbh",replace:"(([দড]্?(ভ|(ব্?(হ|ঃ|(হ্"+o+"?)))))|(([দড]্?ব)্?(হ|ঃ|(হ্"+o+"?)))|([দড]্?ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ddh",replace:"(([দড]?্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|(([দড]্?[দড]?)্?(হ|ঃ|(হ্"+o+"?)))|([দড]্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"dgh",replace:"(([দড]্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|(([দড]্?(গ|(জ্ঞ)))্?(হ|ঃ|(হ্"+o+"?)))|([দড]্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"dhm",replace:"(((ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|([দড]্?((হ|ঃ|(হ্"+o+"?))্?ম))|([দড]্?(হ|ঃ|(হ্"+o+"?))্?ম))"},{find:"dhn",replace:"(((ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|([দড]্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|([দড]্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))"},{find:"gdh",replace:"(((গ|(জ্ঞ))্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|((গ|(জ্ঞ))্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ggh",replace:"((((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))্?(হ|ঃ|(হ্"+o+"?)))|((গ|(জ্ঞ))্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|((গ|(জ্ঞ))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ghn",replace:"(((ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|((গ|(জ্ঞ))্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))"},{find:"jjh",replace:"(((([জয]|(জ়)))?্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?)))))|(হ্য)|(((হ্য)|(([জয]|(জ়))্?(([জয]|(জ়)))?))্?(হ|ঃ|(হ্"+o+"?)))|(([জয]|(জ়))্?([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"jng",replace:"((জ্ঞ)|(([জয]|(জ়))্?(ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ)))))|(([জয]|(জ়))্?[নণঁঙঞং]্?(গ|(জ্ঞ))))"},{find:"kkh",replace:"((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+o+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ksh",replace:"((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+o+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"kxm",replace:"((((ক্ষ)|(ক্?((ক্স)|ষ)))্?ম)|(ক্?(((ক্স)|ষ)্?ম))|(ক্?((ক্স)|ষ)্?ম))"},{find:"kxn",replace:"((((ক্ষ)|(ক্?((ক্স)|ষ)))্?[নণঁঙঞং])|(ক্?(((ক্স)|ষ)্?[নণঁঙঞং]))|(ক্?((ক্স)|ষ)্?[নণঁঙঞং]))"},{find:"lbh",replace:"((ল্?(ভ|(ব্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?ব)্?(হ|ঃ|(হ্"+o+"?)))|(ল্?ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ldh",replace:"((ল্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?[দড])্?(হ|ঃ|(হ্"+o+"?)))|(ল্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"lgh",replace:"((ল্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?(গ|(জ্ঞ)))্?(হ|ঃ|(হ্"+o+"?)))|(ল্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"lkh",replace:"((ল্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?ক)্?(হ|ঃ|(হ্"+o+"?)))|(ল্?ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"lph",replace:"((ল্?(ফ|(প্?(হ|ঃ|(হ্"+o+"?)))))|((ল্?প)্?(হ|ঃ|(হ্"+o+"?)))|(ল্?প্?(হ|ঃ|(হ্"+o+"?))))"},{find:"mbh",replace:"((ম্?(ভ|(ব্?(হ|ঃ|(হ্"+o+"?)))))|((ম্?ব)্?(হ|ঃ|(হ্"+o+"?)))|(ম্?ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"mph",replace:"((ম্?(ফ|(প্?(হ|ঃ|(হ্"+o+"?)))))|((ম্?প)্?(হ|ঃ|(হ্"+o+"?)))|(ম্?প্?(হ|ঃ|(হ্"+o+"?))))"},{find:"mth",replace:"((ম্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))|((ম্?[তটৎ])্?(হ|ঃ|(হ্"+o+"?)))|(ম্?[তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nch",replace:"(([নণঁঙঞং]্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?)))))|(((ঞ্চ)|([নণঁঙঞং]্?[চছ]))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?[চছ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ndh",replace:"(([নণঁঙঞং]্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?)))))|(([নণঁঙঞং]্?[দড])্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?[দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngc",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?[চছ])|([নণঁঙঞং]্?(গ|(জ্ঞ))্?[চছ]))"},{find:"ngg",replace:"((ঙ্গ)|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(গ|(জ্ঞ)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(গ|(জ্ঞ))))"},{find:"ngh",replace:"((ঙ্ঘ)|([নণঁঙঞং]্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?)))))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ngj",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?([জয]|(জ়)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?([জয]|(জ়))))"},{find:"ngk",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))"},{find:"ngm",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ম)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ম))"},{find:"ngx",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্স)|ষ))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?((ক্স)|ষ)))"},{find:"njh",replace:"(([নণঁঙঞং]্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?)))))|(((ঞ্জ)|([নণঁঙঞং]্?([জয]|(জ়))))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nkh",replace:"(([নণঁঙঞং]্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?)))))|(((ঙ্ক)|([নণঁঙঞং]্?ক))্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nsh",replace:"(([নণঁঙঞং]্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|([নণঁঙঞং]্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"nth",replace:"(([নণঁঙঞং]্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))|(([নণঁঙঞং]্?[তটৎ])্?(হ|ঃ|(হ্"+o+"?)))|([নণঁঙঞং]্?[তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"phl",replace:"(((ফ|(প্?(হ|ঃ|(হ্"+o+"?))))্?ল)|(প্?((হ|ঃ|(হ্"+o+"?))্?ল))|(প্?(হ|ঃ|(হ্"+o+"?))্?ল))"},{find:"rri",replace:"(ঋ|ৃ|(([রড়ঢ়]|(হ্র))([রড়ঢ়]|(হ্র))([ইঈিী]|(য়[িী]))))"},{find:"shm",replace:"(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?ম)|([সশষ]্?((হ|ঃ|(হ্"+o+"?))্?ম))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?ম))"},{find:"shn",replace:"(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))্?[নণঁঙঞং])|([সশষ]্?((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))|([সশষ]্?(হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং]))"},{find:"ssh",replace:"(([সশষ]?্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?)))))|([সশষ]্?[সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"t``",replace:"ৎ"},{find:"tth",replace:"((([তটৎ]?(্?)(থ|ঠ|([তটৎ](্?)(হ|ঃ|(হ্"+o+"?)))))|(([তটৎ](্?)[তটৎ]?)(্?)(হ|ঃ|(হ্"+o+"?)))|([তটৎ](্?)[তটৎ](্?)(হ|ঃ|(হ্"+o+"?)))))"},{find:"tth",replace:"(([তটৎ]?্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?)))))|(([তটৎ]্?[তটৎ]?)্?(হ|ঃ|(হ্"+o+"?)))|([তটৎ]্?[তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"zzh",replace:"((হ্য)|((জ|য|(জ়)|(["+o+J+"]?্য))্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?)))))|(((হ্য)|((জ|য|(জ়)|(["+o+J+"]?্য))্?((জ|য|(জ়)|(["+o+J+"]?্য)))?))্?(হ|ঃ|(হ্"+o+"?)))|((জ|য|(জ়)|(["+o+J+"]?্য))্?(জ|য|(জ়)|(["+o+J+"]?্য))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"aa",replace:"(আ|(য়া)|া|((([অএ]্যা?)|[আএ]|(["+o+J+"]?(্য)?া)|(য়া))((([অএ]্যা?)|[আএ]|(["+o+J+"]?(্য)?া)|(য়া)))?))"},{find:"ai",replace:"(ঐ|ৈ|(([অএ]্যা?)|[আএ]|(["+o+J+"]?(্য)?া)|(য়া))([ইঈিী]|(য়[িী])))"},{find:"au",replace:"(ঔ|ৌ(([অএ]্যা?)|[আএ]|(["+o+J+"]?(্য)?া)|(য়া))([উঊুূ]|(য়[ুূ])))"},{find:"az",replace:"((([অএ]্যা?)|[আএ]|(["+o+J+"]?(্য)?া)|(য়া))((জ|য|(জ়)|(["+o+J+"]?্য)))?)"},{find:"bb",replace:"(ব্?ব?)"},{find:"bd",replace:"(ব্?[দড])"},{find:"bh",replace:"(ভ|(ব্?(হ|ঃ|(হ্"+o+"?))))"},{find:"bv",replace:"(ব?্?ভ)"},{find:"cc",replace:"([চছ]্?[চছ]?)"},{find:"ch",replace:"(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ck",replace:"(ক|([চছ]্?ক))"},{find:"cn",replace:"([চছ]্?[নণঁঙঞং])"},{find:"db",replace:"([দড]্?ব)"},{find:"dd",replace:"([দড]্?[দড]?)"},{find:"dg",replace:"([দড]্?(গ|(জ্ঞ)))"},{find:"dh",replace:"(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ee",replace:"(ই|ঈ|ি|ী|(য়েই)|(((এ্যা?)|[এে]|(["+o+J+"]?(্য)া)|(য়ে))((এ্যা?)|[এে]|(["+o+J+"]?(্য)া)|(য়ে))))"},{find:"ey",replace:"(এ|ই|ে|(েই)|(এই)|ঈ|ী|(((এ্যা?)|[এে]|(["+o+J+"]?(্য)া)|(য়ে))(য়|(ইয়)|(["+o+J+"]?্য))))"},{find:"ff",replace:"(ফ্?ফ?)"},{find:"gg",replace:"((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))"},{find:"gh",replace:"(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"hh",replace:"((হ|ঃ|(হ্"+o+"?))্?(হ|ঃ|(হ্"+o+"?)))"},{find:"hl",replace:"((হ|ঃ|(হ্"+o+"?))্?ল)"},{find:"hm",replace:"((হ|ঃ|(হ্"+o+"?))্?ম)"},{find:"hn",replace:"((হ|ঃ|(হ্"+o+"?))্?[নণঁঙঞং])"},{find:"ia",replace:"((ঞা)|(([ইঈিী]|(য়[িী]))(([অএ]্যা?)|[আএ]|(["+o+J+"]?(্য)?া)|(য়া))))"},{find:"jh",replace:"(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"jj",replace:"((হ্য)|(([জয]|(জ়))্?(([জয]|(জ়)))?))"},{find:"kh",replace:"(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+o+"?))))"},{find:"kk",replace:"(ক্?ক?)"},{find:"ks",replace:"(ক্?[সশষ])"},{find:"kx",replace:"((ক্ষ)|(ক্?((ক্স)|ষ)))"},{find:"lb",replace:"(ল্?ব)"},{find:"ld",replace:"(ল্?[দড])"},{find:"lg",replace:"(ল্?(গ|(জ্ঞ)))"},{find:"lk",replace:"(ল্?ক)"},{find:"ll",replace:"((হ্ল)|(ল?্?ল)|(ল্?ল))"},{find:"lp",replace:"(ল্?প)"},{find:"mb",replace:"(ম্?ব)"},{find:"mm",replace:"((হ্ম)|(ম্?ম?))"},{find:"mp",replace:"(ম্?প)"},{find:"mt",replace:"(ম্?[তটৎ])"},{find:"nc",replace:"((ঞ্চ)|([নণঁঙঞং]্?[চছ]))"},{find:"nd",replace:"([নণঁঙঞং]্?[দড])"},{find:"ng",replace:"(ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))"},{find:"nj",replace:"((ঞ্জ)|([নণঁঙঞং]্?([জয]|(জ়))))"},{find:"nk",replace:"((ঙ্ক)|([নণঁঙঞং]্?ক))"},{find:"nn",replace:"((হ্ণ)|(হ্ন)|([নণঁঙঞং]্?[নণঁঙঞং]?))"},{find:"nt",replace:"([নণঁঙঞং]্?[তটৎ])"},{find:"oi",replace:"(ঐ|ৈ|(([ওোঅ]|(অ্য)|(য়ো?))?([ইঈিী]|(য়[িী]))))"},{find:"oo",replace:"((([উঊুূ]|(য়[ুূ])))|(([ওোঅ]|(অ্য)|(য়ো?))?([ওোঅ]|(অ্য)|(য়ো?))?))"},{find:"ou",replace:"(ঔ|ৌ|(([ওোঅ]|(অ্য)|(য়ো?))?([উঊুূ]|(য়[ুূ]))))"},{find:"ph",replace:"(ফ|(প্?(হ|ঃ|(হ্"+o+"?))))"},{find:"pp",replace:"(প্?প?)"},{find:"qq",replace:"(ক্?ক?)"},{find:"rh",replace:"((([রড়ঢ়]|(হ্র)))|(([রড়ঢ়]|(হ্র))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ri",replace:"(ঋ|ৃ|(হৃ)|(([রড়ঢ়]|(হ্র))([ইঈিী]|(য়[িী]))))"},{find:"sh",replace:"(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"ss",replace:"([সশষ]্?[সশষ]?)"},{find:"th",replace:"(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+o+"?))))"},{find:"tt",replace:"([তটৎ]্?[তটৎ]?)"},{find:"uu",replace:"(ঊ|ূ|(([উঊুূ]|(য়[ুূ]))(([উঊুূ]|(য়[ুূ])))?))"},{find:"vv",replace:"(ভ্?ভ?)"},{find:"xm",replace:"(((ক্স)|ষ)্?ম)"},{find:"xn",replace:"(((ক্স)|ষ)্?[নণঁঙঞং])"},{find:"zh",replace:"(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+o+"?))))"},{find:"zz",replace:"((হ্য)|((জ|য|(জ়)|(["+o+J+"]?্য))্?((জ|য|(জ়)|(["+o+J+"]?্য)))?))"},{find:"0",replace:"(০|(0)|(শূন্য))"},{find:"1",replace:"(১|(1)|(এক))"},{find:"2",replace:"(২|(2)|(দুই))"},{find:"3",replace:"(৩|(3)|(তিন))"},{find:"4",replace:"(৪|(4)|(চার))"},{find:"5",replace:"(৫|(5)|(পাঁচ))"},{find:"6",replace:"((6)|৬|(ছয়))"},{find:"7",replace:"(৭|(7)|(সাত))"},{find:"8",replace:"(৮|(8)|(আট))"},{find:"9",replace:"(৯|(9)|(নয়))"},{find:"`",replace:""},{find:"a",replace:"(([অএ]্যা?)|[আএ]|(["+o+J+"]?(্য)?া)|(য়া))"},{find:"b",replace:"ব"},{find:"c",replace:"([চছ])"},{find:"d",replace:"([দড])"},{find:"e",replace:"((এ্যা?)|[এে]|(["+o+J+"]?(্য)া)|(য়ে))"},{find:"f",replace:"ফ"},{find:"g",replace:"(গ|(জ্ঞ))"},{find:"h",replace:"(হ|ঃ|(হ্"+o+"?))"},{find:"i",replace:"([ইঈিী]|(য়[িী]))"},{find:"j",replace:"([জয]|(জ়))"},{find:"k",replace:"ক"},{find:"l",replace:"ল"},{find:"m",replace:"ম"},{find:"n",replace:"([নণঁঙঞং])"},{find:"o",replace:"(([ওোঅ]|(অ্য)|(য়ো?))?)",rules:[{matches:[{type:0,scope:2,value:"",negative:!1}],replace:"([ওোঅ]|(অ্য)|(য়ো?))"}]},{find:"p",replace:"প"},{find:"q",replace:"ক"},{find:"r",replace:"([রড়ঢ়]|(হ্র))"},{find:"s",replace:"([সশষ])"},{find:"t",replace:"([তটৎ])"},{find:"u",replace:"([উঊুূ]|(য়[ুূ]))"},{find:"v",replace:"ভ"},{find:"w",replace:"(ও|(ওয়)|(্ব))"},{find:"x",replace:"((ক্স)|ষ)"},{find:"y",replace:"(য়|(ইয়)|(["+o+J+"]?্য))"},{find:"z",replace:"(জ|য|(জ়)|(["+o+J+"]?্য))"}],Ln=t=>t.split("").filter(e=>!Nn(e)).join(""),An=t=>t.replaceAll(/\P{ASCII}/gu,e=>`\\u0${e.charCodeAt(0).toString(16)}`),Tr=t=>"aeiou".includes(t.toLowerCase()),Mr=t=>"bcdfghjklmnpqrstvwxyz".includes(t.toLowerCase()),_n=t=>!(Tr(t)||Mr(t)),Wn=(t,e,r,n)=>r>=0&&n<e.length&&e.substring(r,n)===t,Nn=t=>"|()[]{}^$*+?.~!@#%&-_='\";<>/\\,:`".includes(t.toLowerCase()),jn=(t,e,r,n)=>{const a=e[r-1],s=e[n];e:for(const c of t){for(const l of c.matches){const d=l.type===kt.Prefix?a:s,u=l.negative;switch(l.scope){case Ue.Punctuation:if((d===void 0||_n(d))===u)continue e;break;case Ue.Vowel:if((d&&Tr(d))===u)continue e;break;case Ue.Consonant:if((d&&Mr(d))===u)continue e;break;case Ue.Exact:{const w=l.value;let m,h;if(l.type===kt.Prefix?(m=r-w.length,h=r):(m=n,h=n+w.length),Wn(w,e,m,h)===u)continue e;break}}}return c.replace}return!1},zn=new RegExp(Dr.map(t=>t.find).join("|"),"g"),Fr=Object.create(null);for(const t of Dr)Fr[t.find]=t;const Hn=t=>{const e=Ln(t);let r="",n=0;for(const{0:a,index:s}of e.matchAll(zn)){r+=e.substring(n,s),n=s+a.length;const c=Fr[a];let l=c.replace;if(c.rules){const d=jn(c.rules,e,s,n);d!==!1&&(l=d)}r+=l+"(্[যবম])?(্?)([ঃঁ]?)"}return r+=e.substring(n,e.length),An(r)},we=new Uint32Array(65536),Un=(t,e)=>{const r=t.length,n=e.length,a=1<<r-1;let s=-1,c=0,l=r,d=r;for(;d--;)we[t.charCodeAt(d)]|=1<<d;for(d=0;d<n;d++){let u=we[e.charCodeAt(d)];const w=u|c;u|=(u&s)+s^s,c|=~(u|s),s&=u,c&a&&l++,s&a&&l--,c=c<<1|1,s=s<<1|~(w|c),c&=w}for(d=r;d--;)we[t.charCodeAt(d)]=0;return l},Kn=(t,e)=>{const r=e.length,n=t.length,a=[],s=[],c=Math.ceil(r/32),l=Math.ceil(n/32);for(let f=0;f<c;f++)s[f]=-1,a[f]=0;let d=0;for(;d<l-1;d++){let f=0,b=-1;const i=d*32,x=Math.min(32,n)+i;for(let C=i;C<x;C++)we[t.charCodeAt(C)]|=1<<C;for(let C=0;C<r;C++){const D=we[e.charCodeAt(C)],L=s[C/32|0]>>>C&1,U=a[C/32|0]>>>C&1,_=D|f,K=((D|U)&b)+b^b|D|U;let F=f|~(K|b),j=b&K;F>>>31^L&&(s[C/32|0]^=1<<C),j>>>31^U&&(a[C/32|0]^=1<<C),F=F<<1|L,j=j<<1|U,b=j|~(_|F),f=F&_}for(let C=i;C<x;C++)we[t.charCodeAt(C)]=0}let u=0,w=-1;const m=d*32,h=Math.min(32,n-m)+m;for(let f=m;f<h;f++)we[t.charCodeAt(f)]|=1<<f;let E=n;for(let f=0;f<r;f++){const b=we[e.charCodeAt(f)],i=s[f/32|0]>>>f&1,x=a[f/32|0]>>>f&1,C=b|u,D=((b|x)&w)+w^w|b|x;let L=u|~(D|w),U=w&D;E+=L>>>n-1&1,E-=U>>>n-1&1,L>>>31^i&&(s[f/32|0]^=1<<f),U>>>31^x&&(a[f/32|0]^=1<<f),L=L<<1|i,U=U<<1|x,w=U|~(C|L),u=L&C}for(let f=m;f<h;f++)we[t.charCodeAt(f)]=0;return E},Gt=(t,e)=>{if(t.length<e.length){const r=e;e=t,t=r}return e.length===0?t.length:t.length<=32?Un(t,e):Kn(t,e)};class qn{constructor(){De(this,"phonetic");De(this,"dictionaryCache");De(this,"tempSuffixCache");this.phonetic=new wn,this.dictionaryCache=Object.create(null),this.tempSuffixCache=Object.create(null)}getAutocorrect(e,r){const n=Ae.autocorrect[e];if(n)return this.phonetic.convert(n);{const a=Ae.autocorrect[Vn(r.middle)];if(a)return r.begin+this.phonetic.convert(a)+r.end}return null}addToTempSuffixCache(e,r,n){e in this.tempSuffixCache||(this.tempSuffixCache[e]={base:r,eng:n})}addSuffix(e){var a;const r=((a=this.dictionaryCache[e])==null?void 0:a.slice(0))??[];this.tempSuffixCache=Object.create(null);const n=e.length;if(n>=2)for(let s=1;s<=n;s++){const c=Ae.suffixes[e.substring(s)];if(c===void 0)continue;const l=e.substring(0,s);if(this.dictionaryCache[l]!==void 0)for(const d of this.dictionaryCache[l]){const u=d.substring(d.length-1),w=c.substring(0,1);let m=d;if(Xt(u)&&Yt(w))m+="য়";else if(u=="ৎ")m=d.substring(0,d.length-1)+"ত";else if(u=="ং"){m=d.substring(0,d.length-1)+"ঙ"+c,r.push(m);continue}m+=c,r.push(m),this.addToTempSuffixCache(m,d,l)}}return r}getPreviousSelection(e,r,n){const a=e.middle,s=a.length;let c="";if(n[a])c=n[a];else if(s>=2)for(let d=1;d<s;d++){const u=a.substring(a.length-d).toLowerCase(),w=Ae.suffixes[u];if(w){const m=a.substring(0,a.length-u.length);if(n[m]){const h=n[m],E=h.substring(a.length- -1),f=w.substring(0,1);c=h,Xt(E)&&Yt(f)?c+="য়":E=="ৎ"?c=h.substring(0,h.length-1)+"ত":E=="ং"&&(c=h.substring(0,h.length-1)+"ঙ"),c+=w,n[a]=c;break}}}const l=r.indexOf(c);return l<0?0:l}isInSuffixCache(e){return e in this.tempSuffixCache}getFromSuffixCache(e){return this.tempSuffixCache[e]}suggest(e,r){var b;const n=Pr(e);n.begin=this.phonetic.convert(n.begin),n.end=this.phonetic.convert(n.end);const a=this.phonetic.convert(n.middle),s=n.middle.toLowerCase(),c=((b=this.dictionaryCache[s])==null?void 0:b.slice(0))??$n(s),l=this.getAutocorrect(e,n),d=new Set;l!==null&&(d.add(l),c.push(l)),this.dictionaryCache[s]||c.length>0&&(this.dictionaryCache[s]=c.slice(0));const u=this.addSuffix(n.middle.toLowerCase()),w=Gn(a,u);for(const i of w)if(d.add(i),d.size>=10)break;const m=[...d],h=[];m.includes(a)||h.push(ht(n.begin+a+n.end));const E=m.map(i=>ht(n.begin+i+n.end));E.includes(e)||(Ae.emoticons.has(e)?(m.unshift(e),E.unshift(e)):h.includes(e)||h.push(e));const f=10-h.length;return m.splice(f,m.length-f,...h),E.splice(f,E.length-f,...h),{prevSelection:this.getPreviousSelection(n,m,r),candidates:E,rawInput:e}}suggestWithoutDictionary(e){return{candidates:[ht(this.phonetic.convert(e))],prevSelection:0,rawInput:e}}}const Vn=t=>t.replaceAll(/[oiudgjnrstyz]/gi,e=>e.toLowerCase()),Pr=t=>{const e=t.match(/(^(?::`|\.`|[-\]~!@#%&*()_=+[{}'";<>/?|.,])*?(?=(?:,{2,}))|^(?::`|\.`|[-\]~!@#%&*()_=+[{}'";<>/?|.,])*)(.*?(?:,,)*)((?::`|\.`|[-\]~!@#%&*()_=+[{}'";<>/?|.,])*$)/)??[];return{begin:e[1]??"",middle:e[2]??"",end:e[3]??""}},Yt=t=>/^[\u09be\u09bf\u09c0\u09c1\u09c2\u09c3\u09c7\u09c8\u09cb\u09cc\u09c4]$/.test(t),Xt=t=>/^[\u0985\u0986\u0987\u0988\u0989\u098a\u098b\u098f\u0990\u0993\u0994\u098c\u09e1\u09be\u09bf\u09c0\u09c1\u09c2\u09c3\u09c7\u09c8\u09cb\u09cc]$/u.test(t),$n=t=>{const e=new RegExp(`^${Hn(t)}$`),r=bn[t.toLowerCase().charAt(0)]??[],n=[];for(const a of r)for(const s of Ae.dictionary[a])e.test(s)&&n.push(s);return n},ht=t=>/^([\p{L}\p{M}]+।){2,}$/u.test(t)?t.replaceAll("।","."):t,Gn=(t,e)=>e.slice(0).sort((r,n)=>{const a=Gt(t,r),s=Gt(t,n);return a<s?-1:a>s?1:0});class Yn{constructor(){De(this,"buffer","");De(this,"suggestionBuilder");De(this,"userSelections");this.suggestionBuilder=new qn;try{const e=localStorage.getItem("AvroUserSelections");e===null?this.userSelections=Object.create(null):this.userSelections=JSON.parse(e)}catch(e){this.userSelections=Object.create(null),console.error(e,"Error while loading user selections")}}saveUserSelections(){try{localStorage.setItem("AvroUserSelections",JSON.stringify(this.userSelections))}catch(e){console.error(e,"Error while saving user selections")}}addUserSelection(e,r){const n=Pr(e);this.userSelections[n.middle]=r}commit(e,r){if(this.addUserSelection(e,r),this.suggestionBuilder.isInSuffixCache(r)){const{base:n,eng:a}=this.suggestionBuilder.getFromSuffixCache(r);this.userSelections[a]||(this.userSelections[a]=n)}this.saveUserSelections(),this.closeInputSession()}get ongoingInputSession(){return this.buffer!==""}closeInputSession(){this.buffer=""}suggest(){return this.suggestionBuilder.suggest(this.buffer,this.userSelections)}getSuggestionForKey(e){return this.buffer+=e,this.suggest()}getSuggestionForBackspace(){const e=this.buffer;return this.buffer=e.substring(0,e.length-1),this.buffer===""?null:this.suggest()}}var Xn={isHistory(t){return En(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||Ct.isOperationList(t.redos[0].operations))&&(t.undos.length===0||Ct.isOperationList(t.undos[0].operations))}},pt=new WeakMap,gt=new WeakMap,_e={isHistoryEditor(t){return Xn.isHistory(t.history)&&p.isEditor(t)},isMerging(t){return gt.get(t)},isSaving(t){return pt.get(t)},redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var r=_e.isMerging(t);gt.set(t,!1),e(),gt.set(t,r)},withoutSaving(t,e){var r=_e.isSaving(t);pt.set(t,!1),e(),pt.set(t,r)}},Zn=t=>{var e=t,{apply:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:n}=e,{redos:a}=n;if(a.length>0){var s=a[a.length-1];s.selectionBefore&&W.setSelection(e,s.selectionBefore),_e.withoutSaving(e,()=>{p.withoutNormalizing(e,()=>{for(var c of s.operations)e.apply(c)})}),n.redos.pop(),n.undos.push(s)}},e.undo=()=>{var{history:n}=e,{undos:a}=n;if(a.length>0){var s=a[a.length-1];_e.withoutSaving(e,()=>{p.withoutNormalizing(e,()=>{var c=s.operations.map(Ct.inverse).reverse();for(var l of c)e.apply(l);s.selectionBefore&&W.setSelection(e,s.selectionBefore)})}),n.redos.push(s),n.undos.pop()}},e.apply=n=>{var{operations:a,history:s}=e,{undos:c}=s,l=c[c.length-1],d=l&&l.operations[l.operations.length-1],u=_e.isSaving(e),w=_e.isMerging(e);if(u==null&&(u=Qn(n)),u){if(w==null&&(l==null?w=!1:a.length!==0?w=!0:w=Jn(n,d)),l&&w)l.operations.push(n);else{var m={operations:[n],selectionBefore:e.selection};c.push(m)}for(;c.length>100;)c.shift();s.redos=[]}r(n)},e},Jn=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&q.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&q.equals(t.path,e.path)),Qn=(t,e)=>t.type!=="set_selection",Br=ra,Rr="֑-߿יִ-﷽ﹰ-ﻼ",Ir="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",ea=new RegExp("^[^"+Ir+"]*["+Rr+"]"),ta=new RegExp("^[^"+Rr+"]*["+Ir+"]");function ra(t){return t=String(t||""),ea.test(t)?"rtl":ta.test(t)?"ltr":"neutral"}function na(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Lt=na,aa=typeof Xe=="object"&&Xe&&Xe.Object===Object&&Xe,ia=aa,sa=ia,oa=typeof self=="object"&&self&&self.Object===Object&&self,la=sa||oa||Function("return this")(),Lr=la,ca=Lr,da=function(){return ca.Date.now()},ua=da,fa=/\s/;function va(t){for(var e=t.length;e--&&fa.test(t.charAt(e)););return e}var ha=va,pa=ha,ga=/^\s+/;function ma(t){return t&&t.slice(0,pa(t)+1).replace(ga,"")}var wa=ma,ba=Lr,Ea=ba.Symbol,Ar=Ea,Zt=Ar,_r=Object.prototype,ya=_r.hasOwnProperty,Oa=_r.toString,He=Zt?Zt.toStringTag:void 0;function Sa(t){var e=ya.call(t,He),r=t[He];try{t[He]=void 0;var n=!0}catch{}var a=Oa.call(t);return n&&(e?t[He]=r:delete t[He]),a}var xa=Sa,Ca=Object.prototype,ka=Ca.toString;function Da(t){return ka.call(t)}var Ta=Da,Jt=Ar,Ma=xa,Fa=Ta,Pa="[object Null]",Ba="[object Undefined]",Qt=Jt?Jt.toStringTag:void 0;function Ra(t){return t==null?t===void 0?Ba:Pa:Qt&&Qt in Object(t)?Ma(t):Fa(t)}var Ia=Ra;function La(t){return t!=null&&typeof t=="object"}var Aa=La,_a=Ia,Wa=Aa,Na="[object Symbol]";function ja(t){return typeof t=="symbol"||Wa(t)&&_a(t)==Na}var za=ja,Ha=wa,er=Lt,Ua=za,tr=0/0,Ka=/^[-+]0x[0-9a-f]+$/i,qa=/^0b[01]+$/i,Va=/^0o[0-7]+$/i,$a=parseInt;function Ga(t){if(typeof t=="number")return t;if(Ua(t))return tr;if(er(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=er(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Ha(t);var r=qa.test(t);return r||Va.test(t)?$a(t.slice(2),r?2:8):Ka.test(t)?tr:+t}var Ya=Ga,Xa=Lt,mt=ua,rr=Ya,Za="Expected a function",Ja=Math.max,Qa=Math.min;function ei(t,e,r){var n,a,s,c,l,d,u=0,w=!1,m=!1,h=!0;if(typeof t!="function")throw new TypeError(Za);e=rr(e)||0,Xa(r)&&(w=!!r.leading,m="maxWait"in r,s=m?Ja(rr(r.maxWait)||0,e):s,h="trailing"in r?!!r.trailing:h);function E(_){var K=n,F=a;return n=a=void 0,u=_,c=t.apply(F,K),c}function f(_){return u=_,l=setTimeout(x,e),w?E(_):c}function b(_){var K=_-d,F=_-u,j=e-K;return m?Qa(j,s-F):j}function i(_){var K=_-d,F=_-u;return d===void 0||K>=e||K<0||m&&F>=s}function x(){var _=mt();if(i(_))return C(_);l=setTimeout(x,b(_))}function C(_){return l=void 0,h&&n?E(_):(n=a=void 0,c)}function D(){l!==void 0&&clearTimeout(l),u=0,n=d=a=l=void 0}function L(){return l===void 0?c:C(mt())}function U(){var _=mt(),K=i(_);if(n=arguments,a=this,d=_,K){if(l===void 0)return f(d);if(m)return clearTimeout(l),l=setTimeout(x,e),E(d)}return l===void 0&&(l=setTimeout(x,e)),c}return U.cancel=D,U.flush=L,U}var Wr=ei,ti=Wr,ri=Lt,ni="Expected a function";function ai(t,e,r){var n=!0,a=!0;if(typeof t!="function")throw new TypeError(ni);return ri(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),ti(t,e,{leading:n,maxWait:e,trailing:a})}var ii=ai;function nr(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function ar(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function wt(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return ar(r.overflowY,e)||ar(r.overflowX,e)||function(n){var a=function(s){if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}}(n);return!!a&&(a.clientHeight<n.scrollHeight||a.clientWidth<n.scrollWidth)}(t)}return!1}function Ze(t,e,r,n,a,s,c,l){return s<t&&c>e||s>t&&c<e?0:s<=t&&l<=r||c>=e&&l>=r?s-t-n:c>e&&l<r||s<t&&l>r?c-e+a:0}var ir=function(t,e){var r=window,n=e.scrollMode,a=e.block,s=e.inline,c=e.boundary,l=e.skipOverflowHiddenElements,d=typeof c=="function"?c:function(ve){return ve!==c};if(!nr(t))throw new TypeError("Invalid target");for(var u,w,m=document.scrollingElement||document.documentElement,h=[],E=t;nr(E)&&d(E);){if((E=(w=(u=E).parentElement)==null?u.getRootNode().host||null:w)===m){h.push(E);break}E!=null&&E===document.body&&wt(E)&&!wt(document.documentElement)||E!=null&&wt(E,l)&&h.push(E)}for(var f=r.visualViewport?r.visualViewport.width:innerWidth,b=r.visualViewport?r.visualViewport.height:innerHeight,i=window.scrollX||pageXOffset,x=window.scrollY||pageYOffset,C=t.getBoundingClientRect(),D=C.height,L=C.width,U=C.top,_=C.right,K=C.bottom,F=C.left,j=a==="start"||a==="nearest"?U:a==="end"?K:U+D/2,G=s==="center"?F+L/2:s==="end"?_:F,A=[],B=0;B<h.length;B++){var T=h[B],P=T.getBoundingClientRect(),k=P.height,V=P.width,Y=P.top,fe=P.right,oe=P.bottom,ne=P.left;if(n==="if-needed"&&U>=0&&F>=0&&K<=b&&_<=f&&U>=Y&&K<=oe&&F>=ne&&_<=fe)return A;var v=getComputedStyle(T),y=parseInt(v.borderLeftWidth,10),O=parseInt(v.borderTopWidth,10),I=parseInt(v.borderRightWidth,10),N=parseInt(v.borderBottomWidth,10),H=0,z=0,$="offsetWidth"in T?T.offsetWidth-T.clientWidth-y-I:0,Q="offsetHeight"in T?T.offsetHeight-T.clientHeight-O-N:0,ee="offsetWidth"in T?T.offsetWidth===0?0:V/T.offsetWidth:0,ae="offsetHeight"in T?T.offsetHeight===0?0:k/T.offsetHeight:0;if(m===T)H=a==="start"?j:a==="end"?j-b:a==="nearest"?Ze(x,x+b,b,O,N,x+j,x+j+D,D):j-b/2,z=s==="start"?G:s==="center"?G-f/2:s==="end"?G-f:Ze(i,i+f,f,y,I,i+G,i+G+L,L),H=Math.max(0,H+x),z=Math.max(0,z+i);else{H=a==="start"?j-Y-O:a==="end"?j-oe+N+Q:a==="nearest"?Ze(Y,oe,k,O,N+Q,j,j+D,D):j-(Y+k/2)+Q/2,z=s==="start"?G-ne-y:s==="center"?G-(ne+V/2)+$/2:s==="end"?G-fe+I+$:Ze(ne,fe,V,y,I+$,G,G+L,L);var re=T.scrollLeft,ie=T.scrollTop;j+=ie-(H=Math.max(0,Math.min(ie+H/ae,T.scrollHeight-k/ae+Q))),G+=re-(z=Math.max(0,Math.min(re+z/ee,T.scrollWidth-V/ee+$)))}A.push({el:T,top:H,left:z})}return A};function Nr(t){return t===Object(t)&&Object.keys(t).length!==0}function si(t,e){e===void 0&&(e="auto");var r="scrollBehavior"in document.body.style;t.forEach(function(n){var a=n.el,s=n.top,c=n.left;a.scroll&&r?a.scroll({top:s,left:c,behavior:e}):(a.scrollTop=s,a.scrollLeft=c)})}function oi(t){return t===!1?{block:"end",inline:"nearest"}:Nr(t)?t:{block:"start",inline:"nearest"}}function li(t,e){var r=t.isConnected||t.ownerDocument.documentElement.contains(t);if(Nr(e)&&typeof e.behavior=="function")return e.behavior(r?ir(t,e):[]);if(r){var n=oi(e);return si(ir(t,n),n.behavior)}}var Pe=[],ci=function(){return Pe.some(function(t){return t.activeTargets.length>0})},di=function(){return Pe.some(function(t){return t.skippedTargets.length>0})},sr="ResizeObserver loop completed with undelivered notifications.",ui=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:sr}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=sr),window.dispatchEvent(t)},Ye;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Ye||(Ye={}));var Be=function(t){return Object.freeze(t)},fi=function(){function t(e,r){this.inlineSize=e,this.blockSize=r,Be(this)}return t}(),jr=function(){function t(e,r,n,a){return this.x=e,this.y=r,this.width=n,this.height=a,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Be(this)}return t.prototype.toJSON=function(){var e=this,r=e.x,n=e.y,a=e.top,s=e.right,c=e.bottom,l=e.left,d=e.width,u=e.height;return{x:r,y:n,top:a,right:s,bottom:c,left:l,width:d,height:u}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),At=function(t){return t instanceof SVGElement&&"getBBox"in t},zr=function(t){if(At(t)){var e=t.getBBox(),r=e.width,n=e.height;return!r&&!n}var a=t,s=a.offsetWidth,c=a.offsetHeight;return!(s||c||t.getClientRects().length)},or=function(t){var e;if(t instanceof Element)return!0;var r=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},vi=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Ve=typeof window<"u"?window:{},Je=new WeakMap,lr=/auto|scroll/,hi=/^tb|vertical/,pi=/msie|trident/i.test(Ve.navigator&&Ve.navigator.userAgent),me=function(t){return parseFloat(t||"0")},We=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=!1),new fi((r?e:t)||0,(r?t:e)||0)},cr=Be({devicePixelContentBoxSize:We(),borderBoxSize:We(),contentBoxSize:We(),contentRect:new jr(0,0,0,0)}),Hr=function(t,e){if(e===void 0&&(e=!1),Je.has(t)&&!e)return Je.get(t);if(zr(t))return Je.set(t,cr),cr;var r=getComputedStyle(t),n=At(t)&&t.ownerSVGElement&&t.getBBox(),a=!pi&&r.boxSizing==="border-box",s=hi.test(r.writingMode||""),c=!n&&lr.test(r.overflowY||""),l=!n&&lr.test(r.overflowX||""),d=n?0:me(r.paddingTop),u=n?0:me(r.paddingRight),w=n?0:me(r.paddingBottom),m=n?0:me(r.paddingLeft),h=n?0:me(r.borderTopWidth),E=n?0:me(r.borderRightWidth),f=n?0:me(r.borderBottomWidth),b=n?0:me(r.borderLeftWidth),i=m+u,x=d+w,C=b+E,D=h+f,L=l?t.offsetHeight-D-t.clientHeight:0,U=c?t.offsetWidth-C-t.clientWidth:0,_=a?i+C:0,K=a?x+D:0,F=n?n.width:me(r.width)-_-U,j=n?n.height:me(r.height)-K-L,G=F+i+U+C,A=j+x+L+D,B=Be({devicePixelContentBoxSize:We(Math.round(F*devicePixelRatio),Math.round(j*devicePixelRatio),s),borderBoxSize:We(G,A,s),contentBoxSize:We(F,j,s),contentRect:new jr(m,d,F,j)});return Je.set(t,B),B},Ur=function(t,e,r){var n=Hr(t,r),a=n.borderBoxSize,s=n.contentBoxSize,c=n.devicePixelContentBoxSize;switch(e){case Ye.DEVICE_PIXEL_CONTENT_BOX:return c;case Ye.BORDER_BOX:return a;default:return s}},gi=function(){function t(e){var r=Hr(e);this.target=e,this.contentRect=r.contentRect,this.borderBoxSize=Be([r.borderBoxSize]),this.contentBoxSize=Be([r.contentBoxSize]),this.devicePixelContentBoxSize=Be([r.devicePixelContentBoxSize])}return t}(),Kr=function(t){if(zr(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e},mi=function(){var t=1/0,e=[];Pe.forEach(function(c){if(c.activeTargets.length!==0){var l=[];c.activeTargets.forEach(function(u){var w=new gi(u.target),m=Kr(u.target);l.push(w),u.lastReportedSize=Ur(u.target,u.observedBox),m<t&&(t=m)}),e.push(function(){c.callback.call(c.observer,l,c.observer)}),c.activeTargets.splice(0,c.activeTargets.length)}});for(var r=0,n=e;r<n.length;r++){var a=n[r];a()}return t},dr=function(t){Pe.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(a){a.isActive()&&(Kr(a.target)>t?r.activeTargets.push(a):r.skippedTargets.push(a))})})},wi=function(){var t=0;for(dr(t);ci();)t=mi(),dr(t);return di()&&ui(),t>0},bt,qr=[],bi=function(){return qr.splice(0).forEach(function(t){return t()})},Ei=function(t){if(!bt){var e=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return bi()}).observe(r,n),bt=function(){r.textContent="".concat(e?e--:e++)}}qr.push(t),bt()},yi=function(t){Ei(function(){requestAnimationFrame(t)})},it=0,Oi=function(){return!!it},Si=250,xi={attributes:!0,characterData:!0,childList:!0,subtree:!0},ur=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],fr=function(t){return t===void 0&&(t=0),Date.now()+t},Et=!1,Ci=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var r=this;if(e===void 0&&(e=Si),!Et){Et=!0;var n=fr(e);yi(function(){var a=!1;try{a=wi()}finally{if(Et=!1,e=n-fr(),!Oi())return;a?r.run(1e3):e>0?r.run(e):r.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,r=function(){return e.observer&&e.observer.observe(document.body,xi)};document.body?r():Ve.addEventListener("DOMContentLoaded",r)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ur.forEach(function(r){return Ve.addEventListener(r,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),ur.forEach(function(r){return Ve.removeEventListener(r,e.listener,!0)}),this.stopped=!0)},t}(),Dt=new Ci,vr=function(t){!it&&t>0&&Dt.start(),it+=t,!it&&Dt.stop()},ki=function(t){return!At(t)&&!vi(t)&&getComputedStyle(t).display==="inline"},Di=function(){function t(e,r){this.target=e,this.observedBox=r||Ye.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=Ur(this.target,this.observedBox,!0);return ki(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),Ti=function(){function t(e,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=r}return t}(),Qe=new WeakMap,hr=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},et=function(){function t(){}return t.connect=function(e,r){var n=new Ti(e,r);Qe.set(e,n)},t.observe=function(e,r,n){var a=Qe.get(e),s=a.observationTargets.length===0;hr(a.observationTargets,r)<0&&(s&&Pe.push(a),a.observationTargets.push(new Di(r,n&&n.box)),vr(1),Dt.schedule())},t.unobserve=function(e,r){var n=Qe.get(e),a=hr(n.observationTargets,r),s=n.observationTargets.length===1;a>=0&&(s&&Pe.splice(Pe.indexOf(n),1),n.observationTargets.splice(a,1),vr(-1))},t.disconnect=function(e){var r=this,n=Qe.get(e);n.observationTargets.slice().forEach(function(a){return r.unobserve(e,a.target)}),n.activeTargets.splice(0,n.activeTargets.length)},t}(),Mi=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");et.connect(this,e)}return t.prototype.observe=function(e,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!or(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");et.observe(this,e,r)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!or(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");et.unobserve(this,e)},t.prototype.disconnect=function(){et.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),ye={};Object.defineProperty(ye,"__esModule",{value:!0});var Fi=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),yt={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Pi={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Fi?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Vr={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var tt=1;tt<20;tt++)Vr["f"+tt]=111+tt;function ct(t,e,r){e&&!("byKey"in e)&&(r=e,e=null),Array.isArray(t)||(t=[t]);var n=t.map(function(c){return $r(c,e)}),a=function(l){return n.some(function(d){return Gr(d,l)})},s=r==null?a:a(r);return s}function Bi(t,e){return ct(t,e)}function Ri(t,e){return ct(t,{byKey:!0},e)}function $r(t,e){var r=e&&e.byKey,n={};t=t.replace("++","+add");var a=t.split("+"),s=a.length;for(var c in yt)n[yt[c]]=!1;var l=!0,d=!1,u=void 0;try{for(var w=a[Symbol.iterator](),m;!(l=(m=w.next()).done);l=!0){var h=m.value,E=h.endsWith("?")&&h.length>1;E&&(h=h.slice(0,-1));var f=_t(h),b=yt[f];(s===1||!b)&&(r?n.key=f:n.which=Yr(h)),b&&(n[b]=E?null:!0)}}catch(i){d=!0,u=i}finally{try{!l&&w.return&&w.return()}finally{if(d)throw u}}return n}function Gr(t,e){for(var r in t){var n=t[r],a=void 0;if(n!=null&&(r==="key"&&e.key!=null?a=e.key.toLowerCase():r==="which"?a=n===91&&e.which===93?91:e.which:a=e[r],!(a==null&&n===!1)&&a!==n))return!1}return!0}function Yr(t){t=_t(t);var e=Vr[t]||t.toUpperCase().charCodeAt(0);return e}function _t(t){return t=t.toLowerCase(),t=Pi[t]||t,t}ye.default=ct;ye.isHotkey=ct;ye.isCodeHotkey=Bi;var Ot=ye.isKeyHotkey=Ri;ye.parseHotkey=$r;ye.compareHotkey=Gr;ye.toKeyCode=Yr;ye.toKeyName=_t;function dt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ii(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,s;for(s=0;s<n.length;s++)a=n[s],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Ne(t,e){if(t==null)return{};var r=Ii(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var Li=0;class Ai{constructor(){this.id="".concat(Li++)}}var Wt=new WeakMap,Nt=new WeakMap,Xr=new WeakMap,Tt=new WeakMap,$e=new WeakMap,ut=new WeakMap,je=new WeakMap,Mt=new WeakMap,ft=new WeakMap,Ft=new WeakMap,Me=new WeakMap,Fe=new WeakMap,Ge=new WeakMap,Pt=new WeakMap,jt=new WeakMap,pe=new WeakMap,be=new WeakMap,ue=new WeakMap,xe=new WeakMap,Ce=new WeakMap,ot=new WeakMap,ze=Symbol("placeholder"),Zr=Symbol("mark-placeholder"),_i=globalThis.Text,zt=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,Wi=t=>Ie(t)&&t.nodeType===8,he=t=>Ie(t)&&t.nodeType===1,Ie=t=>{var e=zt(t);return!!e&&t instanceof e.Node},Bt=t=>{var e=t&&t.anchorNode&&zt(t.anchorNode);return!!e&&t instanceof e.Selection},Jr=t=>Ie(t)&&t.nodeType===3,Ni=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,ji=t=>{var[e,r]=t;if(he(e)&&e.childNodes.length){var n=r===e.childNodes.length,a=n?r-1:r;for([e,a]=Qr(e,a,n?"backward":"forward"),n=a<r;he(e)&&e.childNodes.length;){var s=n?e.childNodes.length-1:0;e=Hi(e,s,n?"backward":"forward")}r=n&&e.textContent!=null?e.textContent.length:0}return[e,r]},zi=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},Qr=(t,e,r)=>{for(var{childNodes:n}=t,a=n[e],s=e,c=!1,l=!1;(Wi(a)||he(a)&&a.childNodes.length===0||he(a)&&a.getAttribute("contenteditable")==="false")&&!(c&&l);){if(s>=n.length){c=!0,s=e-1,r="backward";continue}if(s<0){l=!0,s=e+1,r="forward";continue}a=n[s],e=s,s+=r==="forward"?1:-1}return[a,e]},Hi=(t,e,r)=>{var[n]=Qr(t,e,r);return n},en=t=>{var e="";if(Jr(t)&&t.nodeValue)return t.nodeValue;if(he(t)){for(var r of Array.from(t.childNodes))e+=en(r);var n=getComputedStyle(t).getPropertyValue("display");(n==="block"||n==="list"||t.tagName==="BR")&&(e+=`
`)}return e},Ui=/data-slate-fragment="(.+?)"/m,Ki=t=>{var e=t.getData("text/html"),[,r]=e.match(Ui)||[];return r},Ht=(t,e,r)=>{var{target:n}=e;if(he(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:a}=g.getWindow(t);if(a.contains(n))return g.hasDOMNode(t,n,{editable:!0});var s=r.find(c=>{var{addedNodes:l,removedNodes:d}=c;for(var u of l)if(u===n||u.contains(n))return!0;for(var w of d)if(w===n||w.contains(n))return!0});return!s||s===e?!1:Ht(t,s,r)},qi=parseInt(R.version.split(".")[0],10)>=17,Vi=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,pr=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),ge=typeof navigator<"u"&&/Android/.test(navigator.userAgent),lt=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),St=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),$i=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),tn=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Gi=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Yi=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Xi=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),Zi=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),st=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Se=!Gi&&!$i&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",g={isComposing(t){return!!Fe.get(t)},getWindow(t){var e=Xr.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},findKey(t,e){var r=Mt.get(e);return r||(r=new Ai,Mt.set(e,r)),r},findPath(t,e){for(var r=[],n=e;;){var a=Nt.get(n);if(a==null){if(p.isEditor(n))return r;break}var s=Wt.get(n);if(s==null)break;r.unshift(s),n=a}throw new Error("Unable to find the path for Slate node: ".concat(Ke.stringify(e)))},findDocumentOrShadowRoot(t){var e=g.toDOMNode(t,t),r=e.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&r.getSelection!=null?r:e.ownerDocument},isFocused(t){return!!Me.get(t)},isReadOnly(t){return!!Ft.get(t)},blur(t){var e=g.toDOMNode(t,t),r=g.findDocumentOrShadowRoot(t);Me.set(t,!1),r.activeElement===e&&e.blur()},focus(t){var e=g.toDOMNode(t,t),r=g.findDocumentOrShadowRoot(t);Me.set(t,!0),r.activeElement!==e&&e.focus({preventScroll:!0})},deselect(t){var{selection:e}=t,r=g.findDocumentOrShadowRoot(t),n=r.getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),e&&W.deselect(t)},hasDOMNode(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:n=!1}=r,a=g.toDOMNode(t,t),s;try{s=he(e)?e:e.parentElement}catch(c){if(!c.message.includes('Permission denied to access property "nodeType"'))throw c}return s?s.closest("[data-slate-editor]")===a&&(!n||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===a||!!s.getAttribute("data-slate-zero-width")):!1},insertData(t,e){t.insertData(e)},insertFragmentData(t,e){return t.insertFragmentData(e)},insertTextData(t,e){return t.insertTextData(e)},setFragmentData(t,e,r){t.setFragmentData(e,r)},toDOMNode(t,e){var r=ft.get(t),n=p.isEditor(e)?Tt.get(t):r==null?void 0:r.get(g.findKey(t,e));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Ke.stringify(e)));return n},toDOMPoint(t,e){var[r]=p.node(t,e.path),n=g.toDOMNode(t,r),a;p.void(t,{at:e})&&(e={path:e.path,offset:0});for(var s="[data-slate-string], [data-slate-zero-width]",c=Array.from(n.querySelectorAll(s)),l=0,d=0;d<c.length;d++){var u=c[d],w=u.childNodes[0];if(!(w==null||w.textContent==null)){var{length:m}=w.textContent,h=u.getAttribute("data-slate-length"),E=h==null?m:parseInt(h,10),f=l+E,b=c[d+1];if(e.offset===f&&b!==null&&b!==void 0&&b.hasAttribute("data-slate-mark-placeholder")){var i,x=b.childNodes[0];a=[x instanceof _i?x:b,(i=b.textContent)!==null&&i!==void 0&&i.startsWith("\uFEFF")?1:0];break}if(e.offset<=f){var C=Math.min(m,Math.max(0,e.offset-l));a=[w,C];break}l=f}}if(!a)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Ke.stringify(e)));return a},toDOMRange(t,e){var{anchor:r,focus:n}=e,a=M.isBackward(e),s=g.toDOMPoint(t,r),c=M.isCollapsed(e)?s:g.toDOMPoint(t,n),l=g.getWindow(t),d=l.document.createRange(),[u,w]=a?c:s,[m,h]=a?s:c,E=he(u)?u:u.parentElement,f=!!E.getAttribute("data-slate-zero-width"),b=he(m)?m:m.parentElement,i=!!b.getAttribute("data-slate-zero-width");return d.setStart(u,f?1:w),d.setEnd(m,i?1:h),d},toSlateNode(t,e){var r=he(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?ut.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},findEventRange(t,e){"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:r,clientY:n,target:a}=e;if(r==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var s=g.toSlateNode(t,e.target),c=g.findPath(t,s);if(de.isElement(s)&&p.isVoid(t,s)){var l=a.getBoundingClientRect(),d=t.isInline(s)?r-l.left<l.left+l.width-r:n-l.top<l.top+l.height-n,u=p.point(t,c,{edge:d?"start":"end"}),w=d?p.before(t,u):p.after(t,u);if(w){var m=p.range(t,w);return m}}var h,{document:E}=g.getWindow(t);if(E.caretRangeFromPoint)h=E.caretRangeFromPoint(r,n);else{var f=E.caretPositionFromPoint(r,n);f&&(h=E.createRange(),h.setStart(f.offsetNode,f.offset),h.setEnd(f.offsetNode,f.offset))}if(!h)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var b=g.toSlateRange(t,h,{exactMatch:!1,suppressThrow:!1});return b},toSlatePoint(t,e,r){var{exactMatch:n,suppressThrow:a}=r,[s,c]=n?e:ji(e),l=s.parentNode,d=null,u=0;if(l){var w,m,h=g.toDOMNode(t,t),E=l.closest('[data-slate-void="true"]'),f=E&&h.contains(E)?E:null,b=l.closest("[data-slate-leaf]"),i=null;if(b){if(d=b.closest('[data-slate-node="text"]'),d){var x=g.getWindow(t),C=x.document.createRange();C.setStart(d,0),C.setEnd(s,c);var D=C.cloneContents(),L=[...Array.prototype.slice.call(D.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(D.querySelectorAll("[contenteditable=false]"))];L.forEach(P=>{if(ge&&!n&&P.hasAttribute("data-slate-zero-width")&&P.textContent.length>0&&P.textContext!=="\uFEFF"){P.textContent.startsWith("\uFEFF")&&(P.textContent=P.textContent.slice(1));return}P.parentNode.removeChild(P)}),u=D.textContent.length,i=d}}else if(f){for(var U=f.querySelectorAll("[data-slate-leaf]"),_=0;_<U.length;_++){var K=U[_];if(g.hasDOMNode(t,K)){b=K;break}}b?(d=b.closest('[data-slate-node="text"]'),i=b,u=i.textContent.length,i.querySelectorAll("[data-slate-zero-width]").forEach(P=>{u-=P.textContent.length})):u=1}i&&u===i.textContent.length&&ge&&i.getAttribute("data-slate-zero-width")==="z"&&(w=i.textContent)!==null&&w!==void 0&&w.startsWith("\uFEFF")&&(l.hasAttribute("data-slate-zero-width")||lt&&(m=i.textContent)!==null&&m!==void 0&&m.endsWith(`

`))&&u--}if(ge&&!d&&!n){var F=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(F&&g.hasDOMNode(t,F,{editable:!0})){var j=g.toSlateNode(t,F),{path:G,offset:A}=p.start(t,g.findPath(t,j));return F.querySelector("[data-slate-leaf]")||(A=c),{path:G,offset:A}}}if(!d){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var B=g.toSlateNode(t,d),T=g.findPath(t,B);return{path:T,offset:u}},toSlateRange(t,e,r){var{exactMatch:n,suppressThrow:a}=r,s=Bt(e)?e.anchorNode:e.startContainer,c,l,d,u,w;if(s&&(Bt(e)?(c=e.anchorNode,l=e.anchorOffset,d=e.focusNode,u=e.focusOffset,tn&&zi(c)?w=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:w=e.isCollapsed):(c=e.startContainer,l=e.startOffset,d=e.endContainer,u=e.endOffset,w=e.collapsed)),c==null||d==null||l==null||u==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));var m=g.toSlatePoint(t,[c,l],{exactMatch:n,suppressThrow:a});if(!m)return null;var h=w?m:g.toSlatePoint(t,[d,u],{exactMatch:n,suppressThrow:a});if(!h)return null;if(lt&&!w&&c!==d){var E=p.isEnd(t,m,m.path),f=p.isStart(t,h,h.path);if(E){var b=p.after(t,m);m=b||m}if(f){var i=p.before(t,h);h=i||h}}var x={anchor:m,focus:h};return M.isExpanded(x)&&M.isForward(x)&&he(d)&&p.void(t,{at:x.focus,mode:"highest"})&&(x=p.unhangRange(t,x,{voids:!0})),x},hasRange(t,e){var{anchor:r,focus:n}=e;return p.hasPath(t,r.path)&&p.hasPath(t,n.path)},hasTarget(t,e){return Ie(e)&&g.hasDOMNode(t,e)},hasEditableTarget(t,e){return Ie(e)&&g.hasDOMNode(t,e,{editable:!0})},hasSelectableTarget(t,e){return g.hasEditableTarget(t,e)||g.isTargetInsideNonReadonlyVoid(t,e)},isTargetInsideNonReadonlyVoid(t,e){if(Ft.get(t))return!1;var r=g.hasTarget(t,e)&&g.toSlateNode(t,e);return de.isElement(r)&&p.isVoid(t,r)},androidScheduleFlush(t){var e;(e=jt.get(t))===null||e===void 0||e()},androidPendingDiffs(t){return ue.get(t)}},Re=st?S.useLayoutEffect:S.useEffect,Ji=["anchor","focus"],Qi=["anchor","focus"],es=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>e.hasOwnProperty(r)&&t[r]===e[r]),rn=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],a=e[r],s=Ne(n,Ji),c=Ne(a,Qi);if(!M.equals(n,a)||n[ze]!==a[ze]||!es(s,c))return!1}return!0},ts=t=>{var{isLast:e,leaf:r,parent:n,text:a}=t,s=ke(),c=g.findPath(s,a),l=q.parent(c),d=r[Zr]===!0;return s.isVoid(n)?R.createElement(xt,{length:te.string(n).length}):r.text===""&&n.children[n.children.length-1]===a&&!s.isInline(n)&&p.string(s,l)===""?R.createElement(xt,{isLineBreak:!0,isMarkPlaceholder:d}):r.text===""?R.createElement(xt,{isMarkPlaceholder:d}):e&&r.text.slice(-1)===`
`?R.createElement(gr,{isTrailing:!0,text:r.text}):R.createElement(gr,{text:r.text})},gr=t=>{var{text:e,isTrailing:r=!1}=t,n=S.useRef(null),a=()=>"".concat(e??"").concat(r?`
`:"");return Re(()=>{var s=a();n.current&&n.current.textContent!==s&&(n.current.textContent=s)}),n.current?R.createElement("span",{"data-slate-string":!0,ref:n}):R.createElement("span",{"data-slate-string":!0,ref:n},a())},xt=t=>{var{length:e=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=t,a={"data-slate-zero-width":r?"n":"z","data-slate-length":e};return n&&(a["data-slate-mark-placeholder"]=!0),R.createElement("span",Object.assign({},a),!ge||!r?"\uFEFF":null,r?R.createElement("br",null):null)},Ut=S.createContext(null),ke=()=>{var t=S.useContext(Ut);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},rs=t=>{var{leaf:e,isLast:r,text:n,parent:a,renderPlaceholder:s,renderLeaf:c=f=>R.createElement(as,Object.assign({},f))}=t,l=S.useRef(null),d=S.useRef(null),u=ke(),w=S.useRef(null);S.useEffect(()=>()=>{w.current&&w.current.disconnect()},[]),S.useEffect(()=>{var f=d==null?void 0:d.current;if(f?$e.set(u,f):$e.delete(u),w.current)w.current.disconnect(),f&&w.current.observe(f);else if(f){var b=window.ResizeObserver||Mi;w.current=new b(()=>{var x=ot.get(u);x==null||x()}),w.current.observe(f)}if(!f&&l.current){var i=ot.get(u);i==null||i()}return l.current=d.current,()=>{$e.delete(u)}},[d,e]);var m=R.createElement(ts,{isLast:r,leaf:e,parent:a,text:n});if(e[ze]){var h={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:d}};m=R.createElement(R.Fragment,null,s(h),m)}var E={"data-slate-leaf":!0};return c({attributes:E,children:m,leaf:e,text:n})},ns=R.memo(rs,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Ee.equals(e.leaf,t.leaf)&&e.leaf[ze]===t.leaf[ze]),as=t=>{var{attributes:e,children:r}=t;return R.createElement("span",Object.assign({},e),r)},is=t=>{for(var{decorations:e,isLast:r,parent:n,renderPlaceholder:a,renderLeaf:s,text:c}=t,l=ke(),d=S.useRef(null),u=Ee.decorations(c,e),w=g.findKey(l,c),m=[],h=0;h<u.length;h++){var E=u[h];m.push(R.createElement(ns,{isLast:r&&h===u.length-1,key:"".concat(w.id,"-").concat(h),renderPlaceholder:a,leaf:E,text:c,parent:n,renderLeaf:s}))}return Re(()=>{var f=ft.get(l);d.current?(f==null||f.set(w,d.current),je.set(c,d.current),ut.set(d.current,c)):(f==null||f.delete(w),je.delete(c))}),R.createElement("span",{"data-slate-node":"text",ref:d},m)},nn=R.memo(is,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.text===t.text&&rn(e.decorations,t.decorations)),ss=t=>{var{decorations:e,element:r,renderElement:n=C=>R.createElement(ls,Object.assign({},C)),renderPlaceholder:a,renderLeaf:s,selection:c}=t,l=ke(),d=us(),u=l.isInline(r),w=g.findKey(l,r),m=S.useCallback(C=>{var D=ft.get(l);C?(D==null||D.set(w,C),je.set(r,C),ut.set(C,r)):(D==null||D.delete(w),je.delete(r))},[l,w,r]),h=sn({decorations:e,node:r,renderElement:n,renderPlaceholder:a,renderLeaf:s,selection:c}),E={"data-slate-node":"element",ref:m};if(u&&(E["data-slate-inline"]=!0),!u&&p.hasInlines(l,r)){var f=te.string(r),b=Br(f);b==="rtl"&&(E.dir=b)}if(p.isVoid(l,r)){E["data-slate-void"]=!0,!d&&u&&(E.contentEditable=!1);var i=u?"span":"div",[[x]]=te.texts(r);h=R.createElement(i,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},R.createElement(nn,{renderPlaceholder:a,decorations:[],isLast:!1,parent:r,text:x})),Wt.set(x,0),Nt.set(x,r)}return n({attributes:E,children:h,element:r})},os=R.memo(ss,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&rn(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&M.equals(t.selection,e.selection))),ls=t=>{var{attributes:e,children:r,element:n}=t,a=ke(),s=a.isInline(n)?"span":"div";return R.createElement(s,Object.assign({},e,{style:{position:"relative"}}),r)},an=S.createContext(()=>[]),cs=()=>S.useContext(an),ds=S.createContext(!1),sn=t=>{for(var{decorations:e,node:r,renderElement:n,renderPlaceholder:a,renderLeaf:s,selection:c}=t,l=cs(),d=ke(),u=g.findPath(d,r),w=[],m=de.isElement(r)&&!d.isInline(r)&&p.hasInlines(d,r),h=0;h<r.children.length;h++){var E=u.concat(h),f=r.children[h],b=g.findKey(d,f),i=p.range(d,E),x=c&&M.intersection(i,c),C=l([f,E]);for(var D of e){var L=M.intersection(D,i);L&&C.push(L)}de.isElement(f)?w.push(R.createElement(ds.Provider,{key:"provider-".concat(b.id),value:!!x},R.createElement(os,{decorations:C,element:f,key:b.id,renderElement:n,renderPlaceholder:a,renderLeaf:s,selection:x}))):w.push(R.createElement(nn,{decorations:C,key:b.id,isLast:m&&h===r.children.length-1,parent:r,renderPlaceholder:a,renderLeaf:s,text:f})),Wt.set(f,h),Nt.set(f,r)}return w},on=S.createContext(!1),us=()=>S.useContext(on),ln=S.createContext(null),cn=()=>{var t=S.useContext(ln);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e},fs=3,vs={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},hs={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},ps={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},X=t=>{var e=vs[t],r=hs[t],n=ps[t],a=e&&Ot(e),s=r&&Ot(r),c=n&&Ot(n);return l=>!!(a&&a(l)||pr&&s&&s(l)||!pr&&c&&c(l))},Z={isBold:X("bold"),isCompose:X("compose"),isMoveBackward:X("moveBackward"),isMoveForward:X("moveForward"),isDeleteBackward:X("deleteBackward"),isDeleteForward:X("deleteForward"),isDeleteLineBackward:X("deleteLineBackward"),isDeleteLineForward:X("deleteLineForward"),isDeleteWordBackward:X("deleteWordBackward"),isDeleteWordForward:X("deleteWordForward"),isExtendBackward:X("extendBackward"),isExtendForward:X("extendForward"),isExtendLineBackward:X("extendLineBackward"),isExtendLineForward:X("extendLineForward"),isItalic:X("italic"),isMoveLineBackward:X("moveLineBackward"),isMoveLineForward:X("moveLineForward"),isMoveWordBackward:X("moveWordBackward"),isMoveWordForward:X("moveWordForward"),isRedo:X("redo"),isSoftBreak:X("insertSoftBreak"),isSplitBlock:X("splitBlock"),isTransposeCharacter:X("transposeCharacter"),isUndo:X("undo")},gs=(t,e)=>{var r=[],n=()=>{r=[]},a=c=>{if(e.current){var l=c.filter(d=>Ht(t,d,c));r.push(...l)}};function s(){r.reverse().forEach(c=>{if(c.type==="characterData"){c.target.textContent=c.oldValue;return}c.removedNodes.forEach(l=>{c.target.insertBefore(l,c.nextSibling)}),c.addedNodes.forEach(l=>{c.target.removeChild(l)})}),n()}return{registerMutations:a,restoreDOM:s,clear:n}},ms={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class dn extends S.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(r.current,ms)}componentDidMount(){var{receivedUserInput:e}=this.props,r=this.context;this.manager=gs(r,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,r,n,a=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(a!=null&&a.length){var s;(s=this.manager)===null||s===void 0||s.registerMutations(a)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}dn.contextType=Ut;var ws=ge?dn:t=>{var{children:e}=t;return R.createElement(R.Fragment,null,e)};function bs(t,e){var{path:r,diff:n}=e;if(!p.hasPath(t,r))return!1;var a=te.get(t,r);if(!Ee.isText(a))return!1;if(n.start!==a.text.length||n.text.length===0)return a.text.slice(n.start,n.start+n.text.length)===n.text;var s=q.next(r);if(!p.hasPath(t,s))return!1;var c=te.get(t,s);return Ee.isText(c)&&c.text.startsWith(n.text)}function Es(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.reduce((a,s)=>a.slice(0,s.start)+s.text+a.slice(s.end),t)}function ys(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n))return n;return r}function Os(t,e,r){for(var n=Math.min(t.length,e.length,r),a=0;a<n;a++)if(t.charAt(t.length-a-1)!==e.charAt(e.length-a-1))return a;return n}function un(t,e){var{start:r,end:n,text:a}=e,s=t.slice(r,n),c=ys(s,a),l=Math.min(s.length-c,a.length-c),d=Os(s,a,l),u={start:r+c,end:n-d,text:a.slice(c,a.length-d)};return u.start===u.end&&u.text.length===0?null:u}function Ss(t,e,r){var n=Math.min(e.start,r.start),a=Math.max(0,Math.min(e.start+e.text.length,r.end)-r.start),s=Es(t,e,r),c=Math.max(r.start+r.text.length,e.start+e.text.length+(e.start+e.text.length>r.start?r.text.length:0)-a),l=s.slice(n,c),d=Math.max(e.end,r.end-e.text.length+(e.end-e.start));return un(t,{start:n,end:d,text:l})}function xs(t){var{path:e,diff:r}=t;return{anchor:{path:e,offset:r.start},focus:{path:e,offset:r.end}}}function Rt(t,e){var{path:r,offset:n}=e;if(!p.hasPath(t,r))return null;var a=te.get(t,r);if(!Ee.isText(a))return null;var s=p.above(t,{match:l=>de.isElement(l)&&p.isBlock(t,l),at:r});if(!s)return null;for(;n>a.text.length;){var c=p.next(t,{at:r,match:Ee.isText});if(!c||!q.isDescendant(c[1],s[1]))return null;n-=a.text.length,a=c[0],r=c[1]}return{path:r,offset:n}}function mr(t,e){var r=Rt(t,e.anchor);if(!r)return null;if(M.isCollapsed(e))return{anchor:r,focus:r};var n=Rt(t,e.focus);return n?{anchor:r,focus:n}:null}function It(t,e,r){var n=ue.get(t),a=n==null?void 0:n.find(w=>{var{path:m}=w;return q.equals(m,e.path)});if(!a||e.offset<=a.diff.start)return qe.transform(e,r,{affinity:"backward"});var{diff:s}=a;if(e.offset<=s.start+s.text.length){var c={path:e.path,offset:s.start},l=qe.transform(c,r,{affinity:"backward"});return l?{path:l.path,offset:l.offset+e.offset-s.start}:null}var d={path:e.path,offset:e.offset-s.text.length+s.end-s.start},u=qe.transform(d,r,{affinity:"backward"});return u?r.type==="split_node"&&q.equals(r.path,e.path)&&d.offset<r.position&&s.start<r.position?u:{path:u.path,offset:u.offset+s.text.length-s.end+s.start}:null}function wr(t,e,r){var n=It(t,e.anchor,r);if(!n)return null;if(M.isCollapsed(e))return{anchor:n,focus:n};var a=It(t,e.focus,r);return a?{anchor:n,focus:a}:null}function Cs(t,e){var{path:r,diff:n,id:a}=t;switch(e.type){case"insert_text":return!q.equals(e.path,r)||e.offset>=n.end?t:e.offset<=n.start?{diff:{start:e.text.length+n.start,end:e.text.length+n.end,text:n.text},id:a,path:r}:{diff:{start:n.start,end:n.end+e.text.length,text:n.text},id:a,path:r};case"remove_text":return!q.equals(e.path,r)||e.offset>=n.end?t:e.offset+e.text.length<=n.start?{diff:{start:n.start-e.text.length,end:n.end-e.text.length,text:n.text},id:a,path:r}:{diff:{start:n.start,end:n.end-e.text.length,text:n.text},id:a,path:r};case"split_node":return!q.equals(e.path,r)||e.position>=n.end?{diff:n,id:a,path:q.transform(r,e,{affinity:"backward"})}:e.position>n.start?{diff:{start:n.start,end:Math.min(e.position,n.end),text:n.text},id:a,path:r}:{diff:{start:n.start-e.position,end:n.end-e.position,text:n.text},id:a,path:q.transform(r,e,{affinity:"forward"})};case"merge_node":return q.equals(e.path,r)?{diff:{start:n.start+e.position,end:n.end+e.position,text:n.text},id:a,path:q.transform(r,e)}:{diff:n,id:a,path:q.transform(r,e)}}var s=q.transform(r,e);return s?{diff:n,path:s,id:a}:null}function br(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?br(Object(r),!0).forEach(function(n){dt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ks=25,Ds=200,Ts=function(){};function Ms(t){var{editor:e,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=t,a=!1,s=null,c=null,l=null,d=0,u=!1,w=()=>{var B=Ce.get(e);if(Ce.delete(e),B){var{selection:T}=e,P=mr(e,B);P&&(!T||!M.equals(P,T))&&W.select(e,P)}},m=()=>{var B=xe.get(e);if(xe.delete(e),!!B){if(B.at){var T=qe.isPoint(B.at)?Rt(e,B.at):mr(e,B.at);if(!T)return;var P=p.range(e,T);(!e.selection||!M.equals(e.selection,P))&&W.select(e,T)}B.run()}},h=()=>{var B;if(c&&(clearTimeout(c),c=null),l&&(clearTimeout(l),l=null),!L()&&!D()){w();return}a||(a=!0,setTimeout(()=>a=!1)),D()&&(a="action");var T=e.selection&&p.rangeRef(e,e.selection,{affinity:"forward"});be.set(e,e.marks),Ts("flush",xe.get(e),ue.get(e));for(var P=!!((B=ue.get(e))!==null&&B!==void 0&&B.length),k;k=(V=ue.get(e))===null||V===void 0?void 0:V[0];){var V,Y,fe=pe.get(e);fe!==void 0&&(pe.delete(e),e.marks=fe),fe&&u===!1&&(u=null);var oe=xs(k);(!e.selection||!M.equals(e.selection,oe))&&W.select(e,oe),k.diff.text?p.insertText(e,k.diff.text):p.deleteFragment(e),ue.set(e,(Y=ue.get(e))===null||Y===void 0?void 0:Y.filter(y=>{var{id:O}=y;return O!==k.id})),bs(e,k)||(P=!1,xe.delete(e),be.delete(e),a="action",Ce.delete(e),r.cancel(),n.cancel(),T==null||T.unref())}var ne=T==null?void 0:T.unref();if(ne&&!Ce.get(e)&&(!e.selection||!M.equals(ne,e.selection))&&W.select(e,ne),D()){m();return}P&&r(),r.flush(),n.flush(),w();var v=be.get(e);be.delete(e),v!==void 0&&(e.marks=v,e.onChange())},E=B=>{s&&clearTimeout(s),s=setTimeout(()=>{Fe.set(e,!1),h()},ks)},f=B=>{Fe.set(e,!0),s&&(clearTimeout(s),s=null)},b=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,P=$e.get(e);if(P){if(L()||T){P.style.display="none";return}P.style.removeProperty("display")}},i=(B,T)=>{var P,k=(P=ue.get(e))!==null&&P!==void 0?P:[];ue.set(e,k);var V=te.leaf(e,B),Y=k.findIndex(ne=>q.equals(ne.path,B));if(Y<0){var fe=un(V.text,T);fe&&k.push({path:B,diff:T,id:d++}),b();return}var oe=Ss(V.text,k[Y].diff,T);if(!oe){k.splice(Y,1),b();return}k[Y]=rt(rt({},k[Y]),{},{diff:oe})},x=function(T){var{at:P}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};u=!1,Ce.delete(e),r.cancel(),n.cancel(),D()&&h(),xe.set(e,{at:P,run:T}),l=setTimeout(h)},C=B=>{var T;c&&(clearTimeout(c),c=null);var{inputType:P}=B,k=null,V=B.dataTransfer||B.data||void 0;u!==!1&&P!=="insertText"&&P!=="insertCompositionText"&&(u=!1);var[Y]=B.getTargetRanges();Y&&(k=g.toSlateRange(e,Y,{exactMatch:!1,suppressThrow:!0}));var fe=g.getWindow(e),oe=fe.getSelection();if(!k&&oe&&(Y=oe,k=g.toSlateRange(e,oe,{exactMatch:!1,suppressThrow:!0})),k=(T=k)!==null&&T!==void 0?T:e.selection,!!k){if(M.isExpanded(k)&&P.startsWith("delete")){var[ne,v]=M.edges(k),y=te.leaf(e,ne.path);if(y.text.length===ne.offset&&v.offset===0){var O=p.next(e,{at:ne.path,match:Ee.isText});O&&q.equals(O[1],v.path)&&(k={anchor:v,focus:v})}}if(M.isExpanded(k)&&P.startsWith("delete")){if(q.equals(k.anchor.path,k.focus.path)){var[I,N]=M.edges(k);return i(k.anchor.path,{text:"",end:N.offset,start:I.offset})}var H=P.endsWith("Backward")?"backward":"forward";return x(()=>p.deleteFragment(e,{direction:H}),{at:k})}switch(P){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return x(()=>p.deleteFragment(e),{at:k});case"deleteContent":case"deleteContentForward":{var{anchor:z}=k;if(M.isCollapsed(k)){var $=te.leaf(e,z.path);if(z.offset<$.text.length)return i(z.path,{text:"",start:z.offset,end:z.offset+1})}return x(()=>p.deleteForward(e),{at:k})}case"deleteContentBackward":{var Q,{anchor:ee}=k,ae=Bt(Y)?Y.isCollapsed:!!((Q=Y)!==null&&Q!==void 0&&Q.collapsed);return ae&&M.isCollapsed(k)&&ee.offset>0?i(ee.path,{text:"",start:ee.offset-1,end:ee.offset}):x(()=>p.deleteBackward(e),{at:k})}case"deleteEntireSoftLine":return x(()=>{p.deleteBackward(e,{unit:"line"}),p.deleteForward(e,{unit:"line"})},{at:k});case"deleteHardLineBackward":return x(()=>p.deleteBackward(e,{unit:"block"}),{at:k});case"deleteSoftLineBackward":return x(()=>p.deleteBackward(e,{unit:"line"}),{at:k});case"deleteHardLineForward":return x(()=>p.deleteForward(e,{unit:"block"}),{at:k});case"deleteSoftLineForward":return x(()=>p.deleteForward(e,{unit:"line"}),{at:k});case"deleteWordBackward":return x(()=>p.deleteBackward(e,{unit:"word"}),{at:k});case"deleteWordForward":return x(()=>p.deleteForward(e,{unit:"word"}),{at:k});case"insertLineBreak":return x(()=>p.insertSoftBreak(e),{at:k});case"insertParagraph":return x(()=>p.insertBreak(e),{at:k});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if((V==null?void 0:V.constructor.name)==="DataTransfer")return x(()=>g.insertData(e,V),{at:k});if(typeof V=="string"&&V.includes(`
`))return x(()=>p.insertSoftBreak(e),{at:M.end(k)});var re=V??"";if(pe.get(e)&&(re=re.replace("\uFEFF","")),q.equals(k.anchor.path,k.focus.path)){var[ie,ve]=M.edges(k),le={start:ie.offset,end:ve.offset,text:re};if(re&&u&&P==="insertCompositionText"){var Oe=u.start+u.text.search(/\S|$/),se=le.start+le.text.search(/\S|$/);se===Oe+1&&le.end===u.start+u.text.length?(le.start-=1,u=null,G()):u=!1}else P==="insertText"?u===null?u=le:u&&M.isCollapsed(k)&&u.end+u.text.length===ie.offset?u=rt(rt({},u),{},{text:u.text+re}):u=!1:u=!1;i(ie.path,le);return}return x(()=>p.insertText(e,re),{at:k})}}}},D=()=>!!xe.get(e),L=()=>{var B;return!!((B=ue.get(e))!==null&&B!==void 0&&B.length)},U=()=>D()||L(),_=()=>a,K=B=>{Ce.set(e,B),c&&(clearTimeout(c),c=null);var{selection:T}=e;if(B){var P=!T||!q.equals(T.anchor.path,B.anchor.path),k=!T||!q.equals(T.anchor.path.slice(0,-1),B.anchor.path.slice(0,-1));(P&&u||k)&&(u=!1),(P||!L())&&(c=setTimeout(h,Ds))}},F=()=>{(D()||!L())&&h()},j=B=>{L()||(b(!0),setTimeout(b))},G=()=>{D()||(l=setTimeout(h))},A=B=>{if(!(L()||D())&&B.some(P=>Ht(e,P,B))){var T;(T=ot.get(e))===null||T===void 0||T()}};return{flush:h,scheduleFlush:G,hasPendingDiffs:L,hasPendingAction:D,hasPendingChanges:U,isFlushing:_,handleUserSelect:K,handleCompositionEnd:E,handleCompositionStart:f,handleDOMBeforeInput:C,handleKeyDown:j,handleDomMutations:A,handleInput:F}}function Fs(){var t=S.useRef(!1);return S.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}function Ps(t,e,r){var[n]=S.useState(()=>new MutationObserver(e));Re(()=>{n.takeRecords()}),S.useEffect(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(t.current,r),()=>n.disconnect()},[])}var Bs=["node"];function Er(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Er(Object(r),!0).forEach(function(n){dt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Er(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Is={subtree:!0,childList:!0,characterData:!0};function Ls(t){var{node:e}=t,r=Ne(t,Bs);if(!ge)return null;var n=ke(),a=Fs(),[s]=S.useState(()=>Ms(Rs({editor:n},r)));return Ps(e,s.handleDomMutations,Is),jt.set(n,s.scheduleFlush),a&&s.flush(),s}function As(){var t=ke(),e=S.useRef(!1),r=S.useRef(0),n=S.useCallback(()=>{if(!e.current){e.current=!0;var a=g.getWindow(t);a.cancelAnimationFrame(r.current),r.current=a.requestAnimationFrame(()=>{e.current=!1})}},[]);return S.useEffect(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:e,onUserInput:n}}var _s=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],Ws=["text"];function yr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Le(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yr(Object(r),!0).forEach(function(n){dt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ns=t=>R.createElement(R.Fragment,null,sn(t)),js=t=>{var e,r,{autoFocus:n,decorate:a=zs,onDOMBeforeInput:s,placeholder:c,readOnly:l=!1,renderElement:d,renderLeaf:u,renderPlaceholder:w=v=>R.createElement(fn,Object.assign({},v)),scrollSelectionIntoView:m=Hs,style:h={},as:E="div",disableDefaultStyles:f=!1}=t,b=Ne(t,_s),i=cn(),[x,C]=S.useState(!1),D=S.useRef(null),L=S.useRef([]),{onUserInput:U,receivedUserInput:_}=As(),[,K]=S.useReducer(v=>v+1,0);ot.set(i,K),Ft.set(i,l);var F=S.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);S.useEffect(()=>{D.current&&n&&D.current.focus()},[n]);var j=S.useCallback(ii(()=>{if((ge||!g.isComposing(i))&&(!F.isUpdatingSelection||A!=null&&A.isFlushing())&&!F.isDraggingInternally){var v=g.findDocumentOrShadowRoot(i),{activeElement:y}=v,O=g.toDOMNode(i,i),I=v.getSelection();if(y===O?(F.latestElement=y,Me.set(i,!0)):Me.delete(i),!I)return W.deselect(i);var{anchorNode:N,focusNode:H}=I,z=g.hasEditableTarget(i,N)||g.isTargetInsideNonReadonlyVoid(i,N),$=g.hasEditableTarget(i,H)||g.isTargetInsideNonReadonlyVoid(i,H);if(z&&$){var Q=g.toSlateRange(i,I,{exactMatch:!1,suppressThrow:!0});Q&&(!g.isComposing(i)&&!(A!=null&&A.hasPendingChanges())&&!(A!=null&&A.isFlushing())?W.select(i,Q):A==null||A.handleUserSelect(Q))}l&&(!z||!$)&&W.deselect(i)}},100),[l]),G=S.useMemo(()=>Wr(j,0),[j]),A=Ls({node:D,onDOMSelectionChange:j,scheduleOnDOMSelectionChange:G});Re(()=>{var v;D.current&&(v=zt(D.current))?(Xr.set(i,v),Tt.set(i,D.current),je.set(i,D.current),ut.set(D.current,i)):je.delete(i);var{selection:y}=i,O=g.findDocumentOrShadowRoot(i),I=O.getSelection();if(!(!I||!g.isFocused(i)||A!=null&&A.hasPendingAction())){var N=ee=>{var ae=I.type!=="None";if(!(!y&&!ae)){var re=Tt.get(i),ie=!1;if(re.contains(I.anchorNode)&&re.contains(I.focusNode)&&(ie=!0),ae&&ie&&y&&!ee){var ve=g.toSlateRange(i,I,{exactMatch:!0,suppressThrow:!0});if(ve&&M.equals(ve,y)){var le;if(!F.hasMarkPlaceholder)return;var{anchorNode:Oe}=I;if(Oe!=null&&(le=Oe.parentElement)!==null&&le!==void 0&&le.hasAttribute("data-slate-mark-placeholder"))return}}if(y&&!g.hasRange(i,y)){i.selection=g.toSlateRange(i,I,{exactMatch:!1,suppressThrow:!0});return}F.isUpdatingSelection=!0;var se=y&&g.toDOMRange(i,y);return se?(M.isBackward(y)?I.setBaseAndExtent(se.endContainer,se.endOffset,se.startContainer,se.startOffset):I.setBaseAndExtent(se.startContainer,se.startOffset,se.endContainer,se.endOffset),m(i,se)):I.removeAllRanges(),se}},H=N(),z=(A==null?void 0:A.isFlushing())==="action";if(!ge||!z){setTimeout(()=>{if(H&&lt){var ee=g.toDOMNode(i,i);ee.focus()}F.isUpdatingSelection=!1});return}var $=null,Q=requestAnimationFrame(()=>{if(z){var ee=ae=>{try{var re=g.toDOMNode(i,i);re.focus(),N(ae)}catch{}};ee(),$=setTimeout(()=>{ee(!0),F.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Q),$&&clearTimeout($)}}});var B=S.useCallback(v=>{if(U(),!l&&g.hasEditableTarget(i,v.target)&&!Us(v,s)){var y;if(A)return A.handleDOMBeforeInput(v);G.flush(),j.flush();var{selection:O}=i,{inputType:I}=v,N=v.dataTransfer||v.data||void 0,H=I==="insertCompositionText"||I==="deleteCompositionText";if(H&&g.isComposing(i))return;var z=!1;if(I==="insertText"&&O&&M.isCollapsed(O)&&v.data&&v.data.length===1&&/[a-z ]/i.test(v.data)&&O.anchor.offset!==0){var $,Q;z=!0,i.marks&&(z=!1);var{anchor:ee}=O,[ae,re]=g.toDOMPoint(i,ee),ie=($=ae.parentElement)===null||$===void 0?void 0:$.closest("a"),ve=g.getWindow(i);if(z&&ie&&g.hasDOMNode(i,ie)){var le,Oe=ve==null?void 0:ve.document.createTreeWalker(ie,NodeFilter.SHOW_TEXT).lastChild();Oe===ae&&((le=Oe.textContent)===null||le===void 0?void 0:le.length)===re&&(z=!1)}if(z&&ae.parentElement&&(ve==null||(Q=ve.getComputedStyle(ae.parentElement))===null||Q===void 0?void 0:Q.whiteSpace)==="pre"){var se=p.above(i,{at:ee.path,match:$t=>de.isElement($t)&&p.isBlock(i,$t)});se&&te.string(se[0]).includes("	")&&(z=!1)}}if(!I.startsWith("delete")||I.startsWith("deleteBy")){var[Kt]=v.getTargetRanges();if(Kt){var qt=g.toSlateRange(i,Kt,{exactMatch:!1,suppressThrow:!1});if(!O||!M.equals(O,qt)){z=!1;var Vt=!H&&i.selection&&p.rangeRef(i,i.selection);W.select(i,qt),Vt&&Ge.set(i,Vt)}}}if(H)return;if(z||v.preventDefault(),O&&M.isExpanded(O)&&I.startsWith("delete")){var pn=I.endsWith("Backward")?"backward":"forward";p.deleteFragment(i,{direction:pn});return}switch(I){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{p.deleteFragment(i);break}case"deleteContent":case"deleteContentForward":{p.deleteForward(i);break}case"deleteContentBackward":{p.deleteBackward(i);break}case"deleteEntireSoftLine":{p.deleteBackward(i,{unit:"line"}),p.deleteForward(i,{unit:"line"});break}case"deleteHardLineBackward":{p.deleteBackward(i,{unit:"block"});break}case"deleteSoftLineBackward":{p.deleteBackward(i,{unit:"line"});break}case"deleteHardLineForward":{p.deleteForward(i,{unit:"block"});break}case"deleteSoftLineForward":{p.deleteForward(i,{unit:"line"});break}case"deleteWordBackward":{p.deleteBackward(i,{unit:"word"});break}case"deleteWordForward":{p.deleteForward(i,{unit:"word"});break}case"insertLineBreak":p.insertSoftBreak(i);break;case"insertParagraph":{p.insertBreak(i);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{I==="insertFromComposition"&&g.isComposing(i)&&(C(!1),Fe.set(i,!1)),(N==null?void 0:N.constructor.name)==="DataTransfer"?g.insertData(i,N):typeof N=="string"&&(z?L.current.push(()=>p.insertText(i,N)):p.insertText(i,N));break}}var vt=(y=Ge.get(i))===null||y===void 0?void 0:y.unref();Ge.delete(i),vt&&(!i.selection||!M.equals(i.selection,vt))&&W.select(i,vt)}},[l,s]);Re(()=>(D.current&&Se&&D.current.addEventListener("beforeinput",B),()=>{D.current&&Se&&D.current.removeEventListener("beforeinput",B)}),[B]),Re(()=>{var v=g.getWindow(i);return v.document.addEventListener("selectionchange",G),()=>{v.document.removeEventListener("selectionchange",G)}},[G]);var T=a([i,[]]);if(c&&i.children.length===1&&Array.from(te.texts(i)).length===1&&te.string(i)===""&&!x){var P=p.start(i,[]);T.push({[ze]:!0,placeholder:c,anchor:P,focus:P})}var{marks:k}=i;if(F.hasMarkPlaceholder=!1,i.selection&&M.isCollapsed(i.selection)&&k){var{anchor:V}=i.selection,Y=te.leaf(i,V.path),fe=Ne(Y,Ws);if(!Ee.equals(Y,k,{loose:!0})){F.hasMarkPlaceholder=!0;var oe=Object.fromEntries(Object.keys(fe).map(v=>[v,null]));T.push(Le(Le(Le({[Zr]:!0},oe),k),{},{anchor:V,focus:V}))}}S.useEffect(()=>{setTimeout(()=>{var{selection:v}=i;if(v){var{anchor:y}=v,O=te.leaf(i,y.path);if(k&&!Ee.equals(O,k,{loose:!0})){pe.set(i,k);return}}pe.delete(i)})});var ne=(e=$e.get(i))===null||e===void 0||(r=e.getBoundingClientRect())===null||r===void 0?void 0:r.height;return R.createElement(on.Provider,{value:l},R.createElement(an.Provider,{value:a},R.createElement(ws,{node:D,receivedUserInput:_},R.createElement(E,Object.assign({role:l?void 0:"textbox","aria-multiline":l?void 0:!0},b,{spellCheck:Se||!st?b.spellCheck:!1,autoCorrect:Se||!st?b.autoCorrect:"false",autoCapitalize:Se||!st?b.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!l,zindex:-1,suppressContentEditableWarning:!0,ref:D,style:Le(Le({},f?{}:Le({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},ne?{minHeight:ne}:{})),h),onBeforeInput:S.useCallback(v=>{if(!Se&&!l&&!ce(v,b.onBeforeInput)&&g.hasSelectableTarget(i,v.target)&&(v.preventDefault(),!g.isComposing(i))){var y=v.data;p.insertText(i,y)}},[l]),onInput:S.useCallback(v=>{if(A){A.handleInput();return}for(var y of L.current)y();L.current=[]},[]),onBlur:S.useCallback(v=>{if(!(l||F.isUpdatingSelection||!g.hasSelectableTarget(i,v.target)||ce(v,b.onBlur))){var y=g.findDocumentOrShadowRoot(i);if(F.latestElement!==y.activeElement){var{relatedTarget:O}=v,I=g.toDOMNode(i,i);if(O!==I&&!(he(O)&&O.hasAttribute("data-slate-spacer"))){if(O!=null&&Ie(O)&&g.hasDOMNode(i,O)){var N=g.toSlateNode(i,O);if(de.isElement(N)&&!i.isVoid(N))return}if(St){var H=y.getSelection();H==null||H.removeAllRanges()}Me.delete(i)}}}},[l,b.onBlur]),onClick:S.useCallback(v=>{if(g.hasTarget(i,v.target)&&!ce(v,b.onClick)&&Ie(v.target)){var y=g.toSlateNode(i,v.target),O=g.findPath(i,y);if(!p.hasPath(i,O)||te.get(i,O)!==y)return;if(v.detail===fs&&O.length>=1){var I=O;if(!(de.isElement(y)&&p.isBlock(i,y))){var N,H=p.above(i,{match:ie=>de.isElement(ie)&&p.isBlock(i,ie),at:O});I=(N=H==null?void 0:H[1])!==null&&N!==void 0?N:O.slice(0,1)}var z=p.range(i,I);W.select(i,z);return}if(l)return;var $=p.start(i,O),Q=p.end(i,O),ee=p.void(i,{at:$}),ae=p.void(i,{at:Q});if(ee&&ae&&q.equals(ee[1],ae[1])){var re=p.range(i,$);W.select(i,re)}}},[l,b.onClick]),onCompositionEnd:S.useCallback(v=>{if(g.hasSelectableTarget(i,v.target)){if(g.isComposing(i)&&(C(!1),Fe.set(i,!1)),A==null||A.handleCompositionEnd(v),ce(v,b.onCompositionEnd)||ge)return;if(!St&&!Yi&&!Vi&&!Zi&&!Xi&&v.data){var y=pe.get(i);pe.delete(i),y!==void 0&&(be.set(i,i.marks),i.marks=y),p.insertText(i,v.data);var O=be.get(i);be.delete(i),O!==void 0&&(i.marks=O)}}},[b.onCompositionEnd]),onCompositionUpdate:S.useCallback(v=>{g.hasSelectableTarget(i,v.target)&&!ce(v,b.onCompositionUpdate)&&(g.isComposing(i)||(C(!0),Fe.set(i,!0)))},[b.onCompositionUpdate]),onCompositionStart:S.useCallback(v=>{if(g.hasSelectableTarget(i,v.target)){if(A==null||A.handleCompositionStart(v),ce(v,b.onCompositionStart)||ge)return;C(!0);var{selection:y}=i;if(y){if(M.isExpanded(y)){p.deleteFragment(i);return}var O=p.above(i,{match:H=>de.isElement(H)&&p.isInline(i,H),mode:"highest"});if(O){var[,I]=O;if(p.isEnd(i,y.anchor,I)){var N=p.after(i,I);W.setSelection(i,{anchor:N,focus:N})}}}}},[b.onCompositionStart]),onCopy:S.useCallback(v=>{g.hasSelectableTarget(i,v.target)&&!ce(v,b.onCopy)&&(v.preventDefault(),g.setFragmentData(i,v.clipboardData,"copy"))},[b.onCopy]),onCut:S.useCallback(v=>{if(!l&&g.hasSelectableTarget(i,v.target)&&!ce(v,b.onCut)){v.preventDefault(),g.setFragmentData(i,v.clipboardData,"cut");var{selection:y}=i;if(y)if(M.isExpanded(y))p.deleteFragment(i);else{var O=te.parent(i,y.anchor.path);p.isVoid(i,O)&&W.delete(i)}}},[l,b.onCut]),onDragOver:S.useCallback(v=>{if(g.hasTarget(i,v.target)&&!ce(v,b.onDragOver)){var y=g.toSlateNode(i,v.target);de.isElement(y)&&p.isVoid(i,y)&&v.preventDefault()}},[b.onDragOver]),onDragStart:S.useCallback(v=>{if(!l&&g.hasTarget(i,v.target)&&!ce(v,b.onDragStart)){var y=g.toSlateNode(i,v.target),O=g.findPath(i,y),I=de.isElement(y)&&p.isVoid(i,y)||p.void(i,{at:O,voids:!0});if(I){var N=p.range(i,O);W.select(i,N)}F.isDraggingInternally=!0,g.setFragmentData(i,v.dataTransfer,"drag")}},[l,b.onDragStart]),onDrop:S.useCallback(v=>{if(!l&&g.hasTarget(i,v.target)&&!ce(v,b.onDrop)){v.preventDefault();var y=i.selection,O=g.findEventRange(i,v),I=v.dataTransfer;W.select(i,O),F.isDraggingInternally&&y&&!M.equals(y,O)&&!p.void(i,{at:O,voids:!0})&&W.delete(i,{at:y}),g.insertData(i,I),g.isFocused(i)||g.focus(i)}F.isDraggingInternally=!1},[l,b.onDrop]),onDragEnd:S.useCallback(v=>{!l&&F.isDraggingInternally&&b.onDragEnd&&g.hasTarget(i,v.target)&&b.onDragEnd(v),F.isDraggingInternally=!1},[l,b.onDragEnd]),onFocus:S.useCallback(v=>{if(!l&&!F.isUpdatingSelection&&g.hasEditableTarget(i,v.target)&&!ce(v,b.onFocus)){var y=g.toDOMNode(i,i),O=g.findDocumentOrShadowRoot(i);if(F.latestElement=O.activeElement,lt&&v.target!==y){y.focus();return}Me.set(i,!0)}},[l,b.onFocus]),onKeyDown:S.useCallback(v=>{if(!l&&g.hasEditableTarget(i,v.target)){A==null||A.handleKeyDown(v);var{nativeEvent:y}=v;if(g.isComposing(i)&&y.isComposing===!1&&(Fe.set(i,!1),C(!1)),ce(v,b.onKeyDown)||g.isComposing(i))return;var{selection:O}=i,I=i.children[O!==null?O.focus.path[0]:0],N=Br(te.string(I))==="rtl";if(Z.isRedo(y)){v.preventDefault();var H=i;typeof H.redo=="function"&&H.redo();return}if(Z.isUndo(y)){v.preventDefault();var z=i;typeof z.undo=="function"&&z.undo();return}if(Z.isMoveLineBackward(y)){v.preventDefault(),W.move(i,{unit:"line",reverse:!0});return}if(Z.isMoveLineForward(y)){v.preventDefault(),W.move(i,{unit:"line"});return}if(Z.isExtendLineBackward(y)){v.preventDefault(),W.move(i,{unit:"line",edge:"focus",reverse:!0});return}if(Z.isExtendLineForward(y)){v.preventDefault(),W.move(i,{unit:"line",edge:"focus"});return}if(Z.isMoveBackward(y)){v.preventDefault(),O&&M.isCollapsed(O)?W.move(i,{reverse:!N}):W.collapse(i,{edge:"start"});return}if(Z.isMoveForward(y)){v.preventDefault(),O&&M.isCollapsed(O)?W.move(i,{reverse:N}):W.collapse(i,{edge:"end"});return}if(Z.isMoveWordBackward(y)){v.preventDefault(),O&&M.isExpanded(O)&&W.collapse(i,{edge:"focus"}),W.move(i,{unit:"word",reverse:!N});return}if(Z.isMoveWordForward(y)){v.preventDefault(),O&&M.isExpanded(O)&&W.collapse(i,{edge:"focus"}),W.move(i,{unit:"word",reverse:N});return}if(Se){if((tn||St)&&O&&(Z.isDeleteBackward(y)||Z.isDeleteForward(y))&&M.isCollapsed(O)){var $=te.parent(i,O.anchor.path);if(de.isElement($)&&p.isVoid(i,$)&&(p.isInline(i,$)||p.isBlock(i,$))){v.preventDefault(),p.deleteBackward(i,{unit:"block"});return}}}else{if(Z.isBold(y)||Z.isItalic(y)||Z.isTransposeCharacter(y)){v.preventDefault();return}if(Z.isSoftBreak(y)){v.preventDefault(),p.insertSoftBreak(i);return}if(Z.isSplitBlock(y)){v.preventDefault(),p.insertBreak(i);return}if(Z.isDeleteBackward(y)){v.preventDefault(),O&&M.isExpanded(O)?p.deleteFragment(i,{direction:"backward"}):p.deleteBackward(i);return}if(Z.isDeleteForward(y)){v.preventDefault(),O&&M.isExpanded(O)?p.deleteFragment(i,{direction:"forward"}):p.deleteForward(i);return}if(Z.isDeleteLineBackward(y)){v.preventDefault(),O&&M.isExpanded(O)?p.deleteFragment(i,{direction:"backward"}):p.deleteBackward(i,{unit:"line"});return}if(Z.isDeleteLineForward(y)){v.preventDefault(),O&&M.isExpanded(O)?p.deleteFragment(i,{direction:"forward"}):p.deleteForward(i,{unit:"line"});return}if(Z.isDeleteWordBackward(y)){v.preventDefault(),O&&M.isExpanded(O)?p.deleteFragment(i,{direction:"backward"}):p.deleteBackward(i,{unit:"word"});return}if(Z.isDeleteWordForward(y)){v.preventDefault(),O&&M.isExpanded(O)?p.deleteFragment(i,{direction:"forward"}):p.deleteForward(i,{unit:"word"});return}}}},[l,b.onKeyDown]),onPaste:S.useCallback(v=>{!l&&g.hasSelectableTarget(i,v.target)&&!ce(v,b.onPaste)&&(!Se||Ni(v.nativeEvent))&&(v.preventDefault(),g.insertData(i,v.clipboardData))},[l,b.onPaste])}),R.createElement(Ns,{decorations:T,node:i,renderElement:d,renderPlaceholder:w,renderLeaf:u,selection:i.selection})))))},fn=t=>{var{attributes:e,children:r}=t;return R.createElement("span",Object.assign({},e),r,ge&&R.createElement("br",null))},zs=()=>[],Hs=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&M.isCollapsed(t.selection))){var r=e.startContainer.parentElement;r.getBoundingClientRect=e.getBoundingClientRect.bind(e),li(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},ce=(t,e)=>{if(!e)return!1;var r=e(t);return r??(t.isDefaultPrevented()||t.isPropagationStopped())},Us=(t,e)=>{if(!e)return!1;var r=e(t);return r??t.defaultPrevented},Ks=S.createContext(!1),qs=S.createContext({});function Vs(t){var e=S.useRef([]).current,r=S.useRef({editor:t}).current,n=S.useCallback(s=>{r.editor=s,e.forEach(c=>c(s))},[]),a=S.useMemo(()=>({getSlate:()=>r.editor,addEventListener:s=>(e.push(s),()=>{e.splice(e.indexOf(s),1)})}),[e,r]);return{selectorContext:a,onChange:n}}var $s=["editor","children","onChange","value"],Gs=t=>{var{editor:e,children:r,onChange:n,value:a}=t,s=Ne(t,$s),c=S.useRef(!1),[l,d]=R.useState(()=>{if(!te.isNodeList(a))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(Ke.stringify(a)));if(!p.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(Ke.stringify(e)));return e.children=a,Object.assign(e,s),{v:0,editor:e}}),{selectorContext:u,onChange:w}=Vs(e),m=S.useCallback(()=>{n&&n(e.children),d(f=>({v:f.v+1,editor:e})),w(e)},[n]);S.useEffect(()=>(Pt.set(e,m),()=>{Pt.set(e,()=>{}),c.current=!0}),[]);var[h,E]=S.useState(g.isFocused(e));return S.useEffect(()=>{E(g.isFocused(e))}),Re(()=>{var f=()=>E(g.isFocused(e));return qi?(document.addEventListener("focusin",f),document.addEventListener("focusout",f),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",f)}):(document.addEventListener("focus",f,!0),document.addEventListener("blur",f,!0),()=>{document.removeEventListener("focus",f,!0),document.removeEventListener("blur",f,!0)})},[]),R.createElement(qs.Provider,{value:u},R.createElement(ln.Provider,{value:l},R.createElement(Ut.Provider,{value:l.editor},R.createElement(Ks.Provider,{value:h},r))))},Or=(t,e)=>{var r=(e.top+e.bottom)/2;return t.top<=r&&t.bottom>=r},Sr=(t,e,r)=>{var n=g.toDOMRange(t,e).getBoundingClientRect(),a=g.toDOMRange(t,r).getBoundingClientRect();return Or(n,a)&&Or(a,n)},Ys=(t,e)=>{var r=p.range(t,M.end(e)),n=Array.from(p.positions(t,{at:e})),a=0,s=n.length,c=Math.floor(s/2);if(Sr(t,p.range(t,n[a]),r))return p.range(t,n[a],r);if(n.length<2)return p.range(t,n[n.length-1],r);for(;c!==n.length&&c!==a;)Sr(t,p.range(t,n[c]),r)?s=c:a=c,c=Math.floor((a+s)/2);return p.range(t,n[s],r)};function xr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Cr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xr(Object(r),!0).forEach(function(n){dt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Xs=t=>{var e=t,{apply:r,onChange:n,deleteBackward:a,addMark:s,removeMark:c}=e;return ft.set(e,new WeakMap),e.addMark=(l,d)=>{var u,w;(u=jt.get(e))===null||u===void 0||u(),!pe.get(e)&&(w=ue.get(e))!==null&&w!==void 0&&w.length&&pe.set(e,null),be.delete(e),s(l,d)},e.removeMark=l=>{var d;!pe.get(e)&&(d=ue.get(e))!==null&&d!==void 0&&d.length&&pe.set(e,null),be.delete(e),c(l)},e.deleteBackward=l=>{if(l!=="line")return a(l);if(e.selection&&M.isCollapsed(e.selection)){var d=p.above(e,{match:h=>de.isElement(h)&&p.isBlock(e,h),at:e.selection});if(d){var[,u]=d,w=p.range(e,u,e.selection.anchor),m=Ys(e,w);M.isCollapsed(m)||W.delete(e,{at:m})}}},e.apply=l=>{var d=[],u=ue.get(e);if(u!=null&&u.length){var w=u.map(L=>Cs(L,l)).filter(Boolean);ue.set(e,w)}var m=Ce.get(e);m&&Ce.set(e,wr(e,m,l));var h=xe.get(e);if(h!=null&&h.at){var E=qe.isPoint(h==null?void 0:h.at)?It(e,h.at,l):wr(e,h.at,l);xe.set(e,E?Cr(Cr({},h),{},{at:E}):null)}switch(l.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{d.push(...nt(e,l.path));break}case"set_selection":{var f;(f=Ge.get(e))===null||f===void 0||f.unref(),Ge.delete(e);break}case"insert_node":case"remove_node":{d.push(...nt(e,q.parent(l.path)));break}case"merge_node":{var b=q.previous(l.path);d.push(...nt(e,b));break}case"move_node":{var i=q.common(q.parent(l.path),q.parent(l.newPath));d.push(...nt(e,i));break}}r(l);for(var[x,C]of d){var[D]=p.node(e,x);Mt.set(D,C)}},e.setFragmentData=l=>{var{selection:d}=e;if(d){var[u,w]=M.edges(d),m=p.void(e,{at:u.path}),h=p.void(e,{at:w.path});if(!(M.isCollapsed(d)&&!m)){var E=g.toDOMRange(e,d),f=E.cloneContents(),b=f.childNodes[0];if(f.childNodes.forEach(F=>{F.textContent&&F.textContent.trim()!==""&&(b=F)}),h){var[i]=h,x=E.cloneRange(),C=g.toDOMNode(e,i);x.setEndAfter(C),f=x.cloneContents()}if(m&&(b=f.querySelector("[data-slate-spacer]")),Array.from(f.querySelectorAll("[data-slate-zero-width]")).forEach(F=>{var j=F.getAttribute("data-slate-zero-width")==="n";F.textContent=j?`
`:""}),Jr(b)){var D=b.ownerDocument.createElement("span");D.style.whiteSpace="pre",D.appendChild(b),f.appendChild(D),b=D}var L=e.getFragment(),U=JSON.stringify(L),_=window.btoa(encodeURIComponent(U));b.setAttribute("data-slate-fragment",_),l.setData("application/x-slate-fragment",_);var K=f.ownerDocument.createElement("div");return K.appendChild(f),K.setAttribute("hidden","true"),f.ownerDocument.body.appendChild(K),l.setData("text/html",K.innerHTML),l.setData("text/plain",en(K)),f.ownerDocument.body.removeChild(K),l}}},e.insertData=l=>{e.insertFragmentData(l)||e.insertTextData(l)},e.insertFragmentData=l=>{var d=l.getData("application/x-slate-fragment")||Ki(l);if(d){var u=decodeURIComponent(window.atob(d)),w=JSON.parse(u);return e.insertFragment(w),!0}return!1},e.insertTextData=l=>{var d=l.getData("text/plain");if(d){var u=d.split(/\r\n|\r|\n/),w=!1;for(var m of u)w&&W.splitNodes(e,{always:!0}),e.insertText(m),w=!0;return!0}return!1},e.onChange=()=>{yn.unstable_batchedUpdates(()=>{var l=Pt.get(e);l&&l(),n()})},e},nt=(t,e)=>{var r=[];for(var[n,a]of p.levels(t,{at:e})){var s=g.findKey(t,n);r.push([a,s])}return r};const Zs=R.memo(({suggestionState:{candidates:t,selection:e,rawInput:r},suggestionDispatch:n,inputStart:a,avro:s})=>{const c=cn(),{x:l,y:d,reference:u,strategy:w,refs:m}=On({placement:"bottom-start",middleware:[Sn(),xn({boundary:document.querySelector("#slate-editor")??void 0}),Cn(({placement:h})=>({crossAxis:h.endsWith("start")?-9:0,mainAxis:3}))]});return S.useLayoutEffect(()=>{const{selection:h}=c,E=a;if(E!==null&&r!==""&&h!==null&&M.isCollapsed(h)){const{x:f,y:b,width:i,height:x}=g.toDOMRange(c,p.range(c,E,M.end(h))).getBoundingClientRect(),{scrollX:C,scrollY:D}=window;u({getBoundingClientRect:()=>DOMRectReadOnly.fromRect({x:f+C-window.scrollX,y:b+D-window.scrollY,width:i,height:x})})}else u(null)},[u,c,a,r]),m.reference.current!==null&&t.length>1?kr("div",{ref:m.setFloating,style:{position:w,top:d??"",left:l??""},className:"popper",children:[Te("div",{className:"px-2",children:r}),Te("ol",{className:"list-decimal list-inside p-px border-t dark:border-black horizontal:flex horizontal:flex-wrap",children:t.map((h,E)=>Te("li",{className:kn("px-2 py-px",E===e?"bg-green-300 dark:bg-rose-700":"hover:bg-green-200 dark:hover:bg-rose-600"),onClick:()=>{hn(c,a,h),s.commit(r,h),n({type:"clearSuggestion"}),g.focus(c)},children:h},h))})]}):null}),vn={candidates:[],selection:null,rawInput:""},Js=(t,e)=>{switch(e.type){case"setSuggestion":{const{candidates:r,prevSelection:n,rawInput:a}=e.payload;if(r.length&&n in r)return{candidates:r,selection:n,rawInput:a};throw new Error("Invalid payload")}case"clearSuggestion":return vn;case"selectNext":return{candidates:t.candidates,selection:t.candidates.length===0||t.selection===null?null:(t.selection+1)%t.candidates.length,rawInput:t.rawInput};case"selectPrevious":return{candidates:t.candidates,selection:t.candidates.length===0||t.selection===null?null:(t.selection||t.candidates.length)-1,rawInput:t.rawInput};default:throw new Error}},Qs=({initialValue:t})=>{const e=S.useMemo(()=>Zn(Xs(Dn())),[]),r=Tn(Mn),n=Fn(()=>new Yn),a=Pn(),[s,c]=S.useReducer(Js,vn),l=S.useRef(null),d=S.useCallback(m=>{const{key:h}=m;if(!(!r||m.nativeEvent.isComposing||eo.has(h)||h==="Unidentified")){if(/^[^\P{ASCII} ]$/u.test(h)&&!(m.ctrlKey||m.altKey||m.metaKey)){m.preventDefault();const{selection:E}=e;E&&(M.isCollapsed(E)?n.ongoingInputSession||(l.current=M.start(E)):(W.insertText(e,""),l.current=M.start(E)));const f=n.getSuggestionForKey(h);c({type:"setSuggestion",payload:f});return}if(n.ongoingInputSession){if(s.candidates.length>1){const E=window.innerHeight<622;if(h===(E?"ArrowRight":"ArrowDown")||h==="Tab"||h==="n"&&m.ctrlKey){m.preventDefault(),c({type:"selectNext"});return}else if(h===(E?"ArrowLeft":"ArrowUp")||h==="p"&&m.ctrlKey){m.preventDefault(),c({type:"selectPrevious"});return}}switch(h){case"Backspace":{const E=n.getSuggestionForBackspace();E!==null?(m.preventDefault(),c({type:"setSuggestion",payload:E})):c({type:"clearSuggestion"});return}case"Enter":at(n,s,m);break;default:at(n,s)}}c({type:"clearSuggestion"})}},[n,e,r,s]),u=S.useCallback(()=>{s.selection!==null?n.commit(s.rawInput,s.candidates[s.selection]):n.closeInputSession(),c({type:"clearSuggestion"})},[n,s.candidates,s.rawInput,s.selection]),w=S.useCallback(m=>{if(!("detail"in m&&typeof m.detail=="string"))throw new Error("invalid event");const h=m.detail,E=h.match(/^{(.+)}$/);if(E!==null){switch(E[1]){case"backspace":{if(r&&n.ongoingInputSession){const b=n.getSuggestionForBackspace();if(b!==null){c({type:"setSuggestion",payload:b});return}else c({type:"clearSuggestion"})}const{selection:f}=e;f&&(M.isCollapsed(f)?e.deleteBackward("character"):e.deleteFragment()),g.focus(e);return}case"enter":e.insertBreak();break;case"space":e.insertText(" ");break;default:return}r&&n.ongoingInputSession&&at(n,s),c({type:"clearSuggestion"}),g.focus(e)}else{if(r)if(/^[^\P{ASCII} ]$/u.test(h)){const{selection:f}=e;f&&(M.isCollapsed(f)?n.ongoingInputSession||(l.current=M.start(f)):(W.insertText(e,""),l.current=M.start(f)));const b=n.getSuggestionForKey(h);c({type:"setSuggestion",payload:b});return}else n.ongoingInputSession&&at(n,s),c({type:"clearSuggestion"});e.selection&&(e.insertText(h),g.focus(e))}},[n,e,r,s]);return S.useEffect(()=>(window.addEventListener("virtual-keypress",w),()=>{window.removeEventListener("virtual-keypress",w)}),[w]),S.useEffect(()=>{g.isFocused(e)||(g.focus(e),W.select(e,p.range(e,p.end(e,[]))))},[e]),S.useEffect(()=>{s.selection!==null&&hn(e,l.current,s.candidates[s.selection])},[e,s.candidates,s.selection]),kr(Gs,{editor:e,value:t,onChange:m=>{e.operations.some(E=>E.type!=="set_selection")&&(a(Bn()),a(Rn(m)))},children:[Te(js,{id:"slate-editor","aria-label":"slate",inputMode:"none",onKeyDown:d,onClick:u,placeholder:"Write Here",renderPlaceholder:m=>(m.attributes.style.opacity="0.54",Te(fn,{...m})),className:"p-3 flex-grow md:max-h-screen overflow-y-auto"}),Te(In,{children:r&&Te(Zs,{suggestionState:s,suggestionDispatch:c,inputStart:l.current,avro:n})})]})},hn=(t,e,r)=>{const{selection:n}=t;e!==null&&n&&M.isCollapsed(n)&&(W.setSelection(t,{anchor:e}),W.insertText(t,r),g.focus(t))},at=(t,{candidates:e,selection:r,rawInput:n},a)=>{r!==null?(a==null||a.preventDefault(),t.commit(n,e[r])):t.closeInputSession()},eo=new Set(["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","NumLock","OS","ScrollLock","Shift","Super","Symbol","SymbolLock"]),no=R.memo(Qs);export{no as default,hn as updatePreEdit};
