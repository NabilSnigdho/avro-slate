var kn=Object.defineProperty;var Dn=(t,e,r)=>e in t?kn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ae=(t,e,r)=>(Dn(t,typeof e!="symbol"?e+"":e,r),r);import{P as Tn,d as Ue,t as Mn,T as j,E as h,O as Bt,a as q,i as Fn,g as Ut,c as st,R as I,b as oe,S as Ze,e as F,r as S,N as ne,f as ke,h as Je,j as Pn,u as Rn,k as Bn,l as In,D as An,m as xe,n as Ln,o as Wn,s as Nn,p as jn,q as zn,v as _n,w as Hn,x as Un,y as qn}from"./index-a628fc87.js";var It=(t=>(t[t.Prefix=0]="Prefix",t[t.Suffix=1]="Suffix",t))(It||{}),Ge=(t=>(t[t.Vowel=0]="Vowel",t[t.Consonant=1]="Consonant",t[t.Punctuation=2]="Punctuation",t[t.Exact=3]="Exact",t))(Ge||{});const Z="‍",l="‌",Ir=[{find:"chchh",replace:"((চ্ছ)|((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+l+"?))))্?(((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+l+"?))))্?((হ|ঃ|(হ্"+l+"?)))?)|([চছ]্?((হ|ঃ|(হ্"+l+"?))্?(হ|ঃ|(হ্"+l+"?))))|([চছ]্?(হ|ঃ|(হ্"+l+"?))্?(হ|ঃ|(হ্"+l+"?)))))|((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+l+"?))))্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+l+"?))))্?(হ|ঃ|(হ্"+l+"?)))|([চছ]্?(হ|ঃ|(হ্"+l+"?))্?[চছ]্?(হ|ঃ|(হ্"+l+"?))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ngkkh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+l+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+l+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+l+"?)))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+l+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+l+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ক্?ক?)্?(হ|ঃ|(হ্"+l+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?ক্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ngksh",replace:"(((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+l+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+l+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ক্?[সশষ])্?(হ|ঃ|(হ্"+l+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?[সশষ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"kkhm",replace:"((((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+l+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+l+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+l+"?))))্?ম)|((ক্?ক?)্?((হ|ঃ|(হ্"+l+"?))্?ম))|(ক্?ক্?(হ|ঃ|(হ্"+l+"?))্?ম)|(ক্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+l+"?))))্?ম))"},{find:"kkhn",replace:"((((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+l+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+l+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+l+"?))))্?[নণঁঙঞং])|((ক্?ক?)্?((হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং]))|(ক্?ক্?(হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং])|(ক্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+l+"?))))্?[নণঁঙঞং]))"},{find:"kshm",replace:"((((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+l+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+l+"?))))্?ম)|(ক্?(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?))))্?ম)|([সশষ]্?((হ|ঃ|(হ্"+l+"?))্?ম))|([সশষ]্?(হ|ঃ|(হ্"+l+"?))্?ম)))|((ক্?[সশষ])্?((হ|ঃ|(হ্"+l+"?))্?ম))|(ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?))))্?ম)|(ক্?[সশষ]্?(হ|ঃ|(হ্"+l+"?))্?ম))"},{find:"kshn",replace:"((((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+l+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+l+"?))))্?[নণঁঙঞং])|(ক্?(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?))))্?[নণঁঙঞং])|([সশষ]্?((হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং]))|([সশষ]্?(হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং])))|((ক্?[সশষ])্?((হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং]))|(ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?))))্?[নণঁঙঞং])|(ক্?[সশষ]্?(হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং]))"},{find:"ngch",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+l+"?)))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?[চছ])|([নণঁঙঞং]্?(গ|(জ্ঞ))্?[চছ]))্?(হ|ঃ|(হ্"+l+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?[চছ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"nggh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?)))))|([নণঁঙঞং]্?((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))্?(হ|ঃ|(হ্"+l+"?)))|([নণঁঙঞং]্?((((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))্?(হ|ঃ|(হ্"+l+"?)))|((গ|(জ্ঞ))্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?)))))|((গ|(জ্ঞ))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?)))))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?)))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?)))|(((ঙ্গ)|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(গ|(জ্ঞ)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(গ|(জ্ঞ))))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ngjh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+l+"?)))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?([জয]|(জ়)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?([জয]|(জ়))))্?(হ|ঃ|(হ্"+l+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?([জয]|(জ়))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ngkh",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+l+"?)))))|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক্?(হ|ঃ|(হ্"+l+"?)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?(হ|ঃ|(হ্"+l+"?)))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ngkx",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্ষ)|(ক্?((ক্স)|ষ))))|((((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))্?((ক্স)|ষ))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?((ক্ষ)|(ক্?((ক্স)|ষ))))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক্?((ক্স)|ষ)))"},{find:"shsh",replace:"((((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?)))))?্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?)))))|([সশষ]্?(হ|ঃ|(হ্"+l+"?))্?[সশষ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"thth",replace:"((ত্থ)|(((থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+l+"?)))))?্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+l+"?)))))|([তটৎ]্?(হ|ঃ|(হ্"+l+"?))্?[তটৎ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"bbh",replace:"((ব?্?(ভ|(ব্?(হ|ঃ|(হ্"+l+"?)))))|((ব্?ব?)্?(হ|ঃ|(হ্"+l+"?)))|(ব্?ব্?(হ|ঃ|(হ্"+l+"?))))"},{find:"bdh",replace:"((ব্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+l+"?)))))|((ব্?[দড])্?(হ|ঃ|(হ্"+l+"?)))|(ব্?[দড]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"bhl",replace:"(((ভ|(ব্?(হ|ঃ|(হ্"+l+"?))))্?ল)|(ব্?((হ|ঃ|(হ্"+l+"?))্?ল))|(ব্?(হ|ঃ|(হ্"+l+"?))্?ল))"},{find:"cch",replace:"(([চছ]্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+l+"?)))))|([চছ]্?[চছ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"chh",replace:"(((চ|ছ|([চছ]্?(হ|ঃ|(হ্"+l+"?))))্?((হ|ঃ|(হ্"+l+"?)))?)|([চছ]্?((হ|ঃ|(হ্"+l+"?))্?(হ|ঃ|(হ্"+l+"?))))|([চছ]্?(হ|ঃ|(হ্"+l+"?))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"cng",replace:"((চ্ঞ)|([চছ]্?(ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ)))))|([চছ]্?[নণঁঙঞং]্?(গ|(জ্ঞ)))|(([চছ]্?[নণঁঙঞং])্?(গ|(জ্ঞ))))"},{find:"dbh",replace:"(([দড]্?(ভ|(ব্?(হ|ঃ|(হ্"+l+"?)))))|(([দড]্?ব)্?(হ|ঃ|(হ্"+l+"?)))|([দড]্?ব্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ddh",replace:"(([দড]?্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+l+"?)))))|(([দড]্?[দড]?)্?(হ|ঃ|(হ্"+l+"?)))|([দড]্?[দড]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"dgh",replace:"(([দড]্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?)))))|(([দড]্?(গ|(জ্ঞ)))্?(হ|ঃ|(হ্"+l+"?)))|([দড]্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"dhm",replace:"(((ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+l+"?))))্?ম)|([দড]্?((হ|ঃ|(হ্"+l+"?))্?ম))|([দড]্?(হ|ঃ|(হ্"+l+"?))্?ম))"},{find:"dhn",replace:"(((ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+l+"?))))্?[নণঁঙঞং])|([দড]্?((হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং]))|([দড]্?(হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং]))"},{find:"gdh",replace:"(((গ|(জ্ঞ))্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+l+"?)))))|((গ|(জ্ঞ))্?[দড]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ggh",replace:"((((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))্?(হ|ঃ|(হ্"+l+"?)))|((গ|(জ্ঞ))্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?)))))|((গ|(জ্ঞ))্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ghn",replace:"(((ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?))))্?[নণঁঙঞং])|((গ|(জ্ঞ))্?((হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং]))|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং]))"},{find:"jjh",replace:"(((([জয]|(জ়)))?্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+l+"?)))))|(হ্য)|(((হ্য)|(([জয]|(জ়))্?(([জয]|(জ়)))?))্?(হ|ঃ|(হ্"+l+"?)))|(([জয]|(জ়))্?([জয]|(জ়))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"jng",replace:"((জ্ঞ)|(([জয]|(জ়))্?(ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ)))))|(([জয]|(জ়))্?[নণঁঙঞং]্?(গ|(জ্ঞ))))"},{find:"kkh",replace:"((ক্ষ)|((ক্?ক?)্?(হ|ঃ|(হ্"+l+"?)))|(ক?্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+l+"?)))))|(ক্?ক্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ksh",replace:"((ক্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?)))))|((ক্?[সশষ])্?(হ|ঃ|(হ্"+l+"?)))|(ক্?[সশষ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"kxm",replace:"((((ক্ষ)|(ক্?((ক্স)|ষ)))্?ম)|(ক্?(((ক্স)|ষ)্?ম))|(ক্?((ক্স)|ষ)্?ম))"},{find:"kxn",replace:"((((ক্ষ)|(ক্?((ক্স)|ষ)))্?[নণঁঙঞং])|(ক্?(((ক্স)|ষ)্?[নণঁঙঞং]))|(ক্?((ক্স)|ষ)্?[নণঁঙঞং]))"},{find:"lbh",replace:"((ল্?(ভ|(ব্?(হ|ঃ|(হ্"+l+"?)))))|((ল্?ব)্?(হ|ঃ|(হ্"+l+"?)))|(ল্?ব্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ldh",replace:"((ল্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+l+"?)))))|((ল্?[দড])্?(হ|ঃ|(হ্"+l+"?)))|(ল্?[দড]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"lgh",replace:"((ল্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?)))))|((ল্?(গ|(জ্ঞ)))্?(হ|ঃ|(হ্"+l+"?)))|(ল্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"lkh",replace:"((ল্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+l+"?)))))|((ল্?ক)্?(হ|ঃ|(হ্"+l+"?)))|(ল্?ক্?(হ|ঃ|(হ্"+l+"?))))"},{find:"lph",replace:"((ল্?(ফ|(প্?(হ|ঃ|(হ্"+l+"?)))))|((ল্?প)্?(হ|ঃ|(হ্"+l+"?)))|(ল্?প্?(হ|ঃ|(হ্"+l+"?))))"},{find:"mbh",replace:"((ম্?(ভ|(ব্?(হ|ঃ|(হ্"+l+"?)))))|((ম্?ব)্?(হ|ঃ|(হ্"+l+"?)))|(ম্?ব্?(হ|ঃ|(হ্"+l+"?))))"},{find:"mph",replace:"((ম্?(ফ|(প্?(হ|ঃ|(হ্"+l+"?)))))|((ম্?প)্?(হ|ঃ|(হ্"+l+"?)))|(ম্?প্?(হ|ঃ|(হ্"+l+"?))))"},{find:"mth",replace:"((ম্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+l+"?)))))|((ম্?[তটৎ])্?(হ|ঃ|(হ্"+l+"?)))|(ম্?[তটৎ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"nch",replace:"(([নণঁঙঞং]্?(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+l+"?)))))|(((ঞ্চ)|([নণঁঙঞং]্?[চছ]))্?(হ|ঃ|(হ্"+l+"?)))|([নণঁঙঞং]্?[চছ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ndh",replace:"(([নণঁঙঞং]্?(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+l+"?)))))|(([নণঁঙঞং]্?[দড])্?(হ|ঃ|(হ্"+l+"?)))|([নণঁঙঞং]্?[দড]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ngc",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?[চছ])|([নণঁঙঞং]্?(গ|(জ্ঞ))্?[চছ]))"},{find:"ngg",replace:"((ঙ্গ)|((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?(গ|(জ্ঞ)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(গ|(জ্ঞ))))"},{find:"ngh",replace:"((ঙ্ঘ)|([নণঁঙঞং]্?(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?)))))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ngj",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?([জয]|(জ়)))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?([জয]|(জ়))))"},{find:"ngk",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ক)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ক))"},{find:"ngm",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?ম)|([নণঁঙঞং]্?(গ|(জ্ঞ))্?ম))"},{find:"ngx",replace:"(((ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))্?((ক্স)|ষ))|([নণঁঙঞং]্?(গ|(জ্ঞ))্?((ক্স)|ষ)))"},{find:"njh",replace:"(([নণঁঙঞং]্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+l+"?)))))|(((ঞ্জ)|([নণঁঙঞং]্?([জয]|(জ়))))্?(হ|ঃ|(হ্"+l+"?)))|([নণঁঙঞং]্?([জয]|(জ়))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"nkh",replace:"(([নণঁঙঞং]্?(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+l+"?)))))|(((ঙ্ক)|([নণঁঙঞং]্?ক))্?(হ|ঃ|(হ্"+l+"?)))|([নণঁঙঞং]্?ক্?(হ|ঃ|(হ্"+l+"?))))"},{find:"nsh",replace:"(([নণঁঙঞং]্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?)))))|([নণঁঙঞং]্?[সশষ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"nth",replace:"(([নণঁঙঞং]্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+l+"?)))))|(([নণঁঙঞং]্?[তটৎ])্?(হ|ঃ|(হ্"+l+"?)))|([নণঁঙঞং]্?[তটৎ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"phl",replace:"(((ফ|(প্?(হ|ঃ|(হ্"+l+"?))))্?ল)|(প্?((হ|ঃ|(হ্"+l+"?))্?ল))|(প্?(হ|ঃ|(হ্"+l+"?))্?ল))"},{find:"rri",replace:"(ঋ|ৃ|(([রড়ঢ়]|(হ্র))([রড়ঢ়]|(হ্র))([ইঈিী]|(য়[িী]))))"},{find:"shm",replace:"(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?))))্?ম)|([সশষ]্?((হ|ঃ|(হ্"+l+"?))্?ম))|([সশষ]্?(হ|ঃ|(হ্"+l+"?))্?ম))"},{find:"shn",replace:"(((স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?))))্?[নণঁঙঞং])|([সশষ]্?((হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং]))|([সশষ]্?(হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং]))"},{find:"ssh",replace:"(([সশষ]?্?(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?)))))|([সশষ]্?[সশষ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"t``",replace:"ৎ"},{find:"tth",replace:"((([তটৎ]?(্?)(থ|ঠ|([তটৎ](্?)(হ|ঃ|(হ্"+l+"?)))))|(([তটৎ](্?)[তটৎ]?)(্?)(হ|ঃ|(হ্"+l+"?)))|([তটৎ](্?)[তটৎ](্?)(হ|ঃ|(হ্"+l+"?)))))"},{find:"tth",replace:"(([তটৎ]?্?(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+l+"?)))))|(([তটৎ]্?[তটৎ]?)্?(হ|ঃ|(হ্"+l+"?)))|([তটৎ]্?[তটৎ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"zzh",replace:"((হ্য)|((জ|য|(জ়)|(["+l+Z+"]?্য))্?(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+l+"?)))))|(((হ্য)|((জ|য|(জ়)|(["+l+Z+"]?্য))্?((জ|য|(জ়)|(["+l+Z+"]?্য)))?))্?(হ|ঃ|(হ্"+l+"?)))|((জ|য|(জ়)|(["+l+Z+"]?্য))্?(জ|য|(জ়)|(["+l+Z+"]?্য))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"aa",replace:"(আ|(য়া)|া|((([অএ]্যা?)|[আএ]|(["+l+Z+"]?(্য)?া)|(য়া))((([অএ]্যা?)|[আএ]|(["+l+Z+"]?(্য)?া)|(য়া)))?))"},{find:"ai",replace:"(ঐ|ৈ|(([অএ]্যা?)|[আএ]|(["+l+Z+"]?(্য)?া)|(য়া))([ইঈিী]|(য়[িী])))"},{find:"au",replace:"(ঔ|ৌ(([অএ]্যা?)|[আএ]|(["+l+Z+"]?(্য)?া)|(য়া))([উঊুূ]|(য়[ুূ])))"},{find:"az",replace:"((([অএ]্যা?)|[আএ]|(["+l+Z+"]?(্য)?া)|(য়া))((জ|য|(জ়)|(["+l+Z+"]?্য)))?)"},{find:"bb",replace:"(ব্?ব?)"},{find:"bd",replace:"(ব্?[দড])"},{find:"bh",replace:"(ভ|(ব্?(হ|ঃ|(হ্"+l+"?))))"},{find:"bv",replace:"(ব?্?ভ)"},{find:"cc",replace:"([চছ]্?[চছ]?)"},{find:"ch",replace:"(চ|ছ|([চছ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ck",replace:"(ক|([চছ]্?ক))"},{find:"cn",replace:"([চছ]্?[নণঁঙঞং])"},{find:"db",replace:"([দড]্?ব)"},{find:"dd",replace:"([দড]্?[দড]?)"},{find:"dg",replace:"([দড]্?(গ|(জ্ঞ)))"},{find:"dh",replace:"(ধ|ঢ|([দড]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ee",replace:"(ই|ঈ|ি|ী|(য়েই)|(((এ্যা?)|[এে]|(["+l+Z+"]?(্য)া)|(য়ে))((এ্যা?)|[এে]|(["+l+Z+"]?(্য)া)|(য়ে))))"},{find:"ey",replace:"(এ|ই|ে|(েই)|(এই)|ঈ|ী|(((এ্যা?)|[এে]|(["+l+Z+"]?(্য)া)|(য়ে))(য়|(ইয়)|(["+l+Z+"]?্য))))"},{find:"ff",replace:"(ফ্?ফ?)"},{find:"gg",replace:"((জ্ঞ)|((গ|(জ্ঞ))্?((গ|(জ্ঞ)))?))"},{find:"gh",replace:"(ঘ|((গ|(জ্ঞ))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"hh",replace:"((হ|ঃ|(হ্"+l+"?))্?(হ|ঃ|(হ্"+l+"?)))"},{find:"hl",replace:"((হ|ঃ|(হ্"+l+"?))্?ল)"},{find:"hm",replace:"((হ|ঃ|(হ্"+l+"?))্?ম)"},{find:"hn",replace:"((হ|ঃ|(হ্"+l+"?))্?[নণঁঙঞং])"},{find:"ia",replace:"((ঞা)|(([ইঈিী]|(য়[িী]))(([অএ]্যা?)|[আএ]|(["+l+Z+"]?(্য)?া)|(য়া))))"},{find:"jh",replace:"(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"jj",replace:"((হ্য)|(([জয]|(জ়))্?(([জয]|(জ়)))?))"},{find:"kh",replace:"(খ|(ক্ষ)|(ক্?(হ|ঃ|(হ্"+l+"?))))"},{find:"kk",replace:"(ক্?ক?)"},{find:"ks",replace:"(ক্?[সশষ])"},{find:"kx",replace:"((ক্ষ)|(ক্?((ক্স)|ষ)))"},{find:"lb",replace:"(ল্?ব)"},{find:"ld",replace:"(ল্?[দড])"},{find:"lg",replace:"(ল্?(গ|(জ্ঞ)))"},{find:"lk",replace:"(ল্?ক)"},{find:"ll",replace:"((হ্ল)|(ল?্?ল)|(ল্?ল))"},{find:"lp",replace:"(ল্?প)"},{find:"mb",replace:"(ম্?ব)"},{find:"mm",replace:"((হ্ম)|(ম্?ম?))"},{find:"mp",replace:"(ম্?প)"},{find:"mt",replace:"(ম্?[তটৎ])"},{find:"nc",replace:"((ঞ্চ)|([নণঁঙঞং]্?[চছ]))"},{find:"nd",replace:"([নণঁঙঞং]্?[দড])"},{find:"ng",replace:"(ঙ|ং|ঞ|(ঙ্গ)|([নণঁঙঞং]্?(গ|(জ্ঞ))))"},{find:"nj",replace:"((ঞ্জ)|([নণঁঙঞং]্?([জয]|(জ়))))"},{find:"nk",replace:"((ঙ্ক)|([নণঁঙঞং]্?ক))"},{find:"nn",replace:"((হ্ণ)|(হ্ন)|([নণঁঙঞং]্?[নণঁঙঞং]?))"},{find:"nt",replace:"([নণঁঙঞং]্?[তটৎ])"},{find:"oi",replace:"(ঐ|ৈ|(([ওোঅ]|(অ্য)|(য়ো?))?([ইঈিী]|(য়[িী]))))"},{find:"oo",replace:"((([উঊুূ]|(য়[ুূ])))|(([ওোঅ]|(অ্য)|(য়ো?))?([ওোঅ]|(অ্য)|(য়ো?))?))"},{find:"ou",replace:"(ঔ|ৌ|(([ওোঅ]|(অ্য)|(য়ো?))?([উঊুূ]|(য়[ুূ]))))"},{find:"ph",replace:"(ফ|(প্?(হ|ঃ|(হ্"+l+"?))))"},{find:"pp",replace:"(প্?প?)"},{find:"qq",replace:"(ক্?ক?)"},{find:"rh",replace:"((([রড়ঢ়]|(হ্র)))|(([রড়ঢ়]|(হ্র))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ri",replace:"(ঋ|ৃ|(হৃ)|(([রড়ঢ়]|(হ্র))([ইঈিী]|(য়[িী]))))"},{find:"sh",replace:"(স|শ|ষ|([সশষ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"ss",replace:"([সশষ]্?[সশষ]?)"},{find:"th",replace:"(থ|ঠ|([তটৎ]্?(হ|ঃ|(হ্"+l+"?))))"},{find:"tt",replace:"([তটৎ]্?[তটৎ]?)"},{find:"uu",replace:"(ঊ|ূ|(([উঊুূ]|(য়[ুূ]))(([উঊুূ]|(য়[ুূ])))?))"},{find:"vv",replace:"(ভ্?ভ?)"},{find:"xm",replace:"(((ক্স)|ষ)্?ম)"},{find:"xn",replace:"(((ক্স)|ষ)্?[নণঁঙঞং])"},{find:"zh",replace:"(ঝ|(([জয]|(জ়))্?(হ|ঃ|(হ্"+l+"?))))"},{find:"zz",replace:"((হ্য)|((জ|য|(জ়)|(["+l+Z+"]?্য))্?((জ|য|(জ়)|(["+l+Z+"]?্য)))?))"},{find:"0",replace:"(০|(0)|(শূন্য))"},{find:"1",replace:"(১|(1)|(এক))"},{find:"2",replace:"(২|(2)|(দুই))"},{find:"3",replace:"(৩|(3)|(তিন))"},{find:"4",replace:"(৪|(4)|(চার))"},{find:"5",replace:"(৫|(5)|(পাঁচ))"},{find:"6",replace:"((6)|৬|(ছয়))"},{find:"7",replace:"(৭|(7)|(সাত))"},{find:"8",replace:"(৮|(8)|(আট))"},{find:"9",replace:"(৯|(9)|(নয়))"},{find:"`",replace:""},{find:"a",replace:"(([অএ]্যা?)|[আএ]|(["+l+Z+"]?(্য)?া)|(য়া))"},{find:"b",replace:"ব"},{find:"c",replace:"([চছ])"},{find:"d",replace:"([দড])"},{find:"e",replace:"((এ্যা?)|[এে]|(["+l+Z+"]?(্য)া)|(য়ে))"},{find:"f",replace:"ফ"},{find:"g",replace:"(গ|(জ্ঞ))"},{find:"h",replace:"(হ|ঃ|(হ্"+l+"?))"},{find:"i",replace:"([ইঈিী]|(য়[িী]))"},{find:"j",replace:"([জয]|(জ়))"},{find:"k",replace:"ক"},{find:"l",replace:"ল"},{find:"m",replace:"ম"},{find:"n",replace:"([নণঁঙঞং])"},{find:"o",replace:"(([ওোঅ]|(অ্য)|(য়ো?))?)",rules:[{matches:[{type:0,scope:2,value:"",negative:!1}],replace:"([ওোঅ]|(অ্য)|(য়ো?))"}]},{find:"p",replace:"প"},{find:"q",replace:"ক"},{find:"r",replace:"([রড়ঢ়]|(হ্র))"},{find:"s",replace:"([সশষ])"},{find:"t",replace:"([তটৎ])"},{find:"u",replace:"([উঊুূ]|(য়[ুূ]))"},{find:"v",replace:"ভ"},{find:"w",replace:"(ও|(ওয়)|(্ব))"},{find:"x",replace:"((ক্স)|ষ)"},{find:"y",replace:"(য়|(ইয়)|(["+l+Z+"]?্য))"},{find:"z",replace:"(জ|য|(জ়)|(["+l+Z+"]?্য))"}],Kn=t=>t.split("").filter(e=>!Gn(e)).join(""),Vn=t=>t.replaceAll(/\P{ASCII}/gu,e=>`\\u0${e.charCodeAt(0).toString(16)}`),Ar=t=>"aeiou".includes(t.toLowerCase()),Lr=t=>"bcdfghjklmnpqrstvwxyz".includes(t.toLowerCase()),$n=t=>!(Ar(t)||Lr(t)),Yn=(t,e,r,n)=>r>=0&&n<e.length&&e.substring(r,n)===t,Gn=t=>"|()[]{}^$*+?.~!@#%&-_='\";<>/\\,:`".includes(t.toLowerCase()),Xn=(t,e,r,n)=>{const i=e[r-1],s=e[n];e:for(const o of t){for(const u of o.matches){const v=u.type===It.Prefix?i:s,c=u.negative;switch(u.scope){case Ge.Punctuation:if((v===void 0||$n(v))===c)continue e;break;case Ge.Vowel:if((v&&Ar(v))===c)continue e;break;case Ge.Consonant:if((v&&Lr(v))===c)continue e;break;case Ge.Exact:{const p=u.value;let m,g;if(u.type===It.Prefix?(m=r-p.length,g=r):(m=n,g=n+p.length),Yn(p,e,m,g)===c)continue e;break}}}return o.replace}return!1},Zn=new RegExp(Ir.map(t=>t.find).join("|"),"g"),Wr=Object.create(null);for(const t of Ir)Wr[t.find]=t;const Jn=t=>{const e=Kn(t);let r="",n=0;for(const{0:i,index:s}of e.matchAll(Zn)){r+=e.substring(n,s),n=s+i.length;const o=Wr[i];let u=o.replace;if(o.rules){const v=Xn(o.rules,e,s,n);v!==!1&&(u=v)}r+=u+"(্[যবম])?(্?)([ঃঁ]?)"}return r+=e.substring(n,e.length),Vn(r)},Oe=new Uint32Array(65536),Qn=(t,e)=>{const r=t.length,n=e.length,i=1<<r-1;let s=-1,o=0,u=r,v=r;for(;v--;)Oe[t.charCodeAt(v)]|=1<<v;for(v=0;v<n;v++){let c=Oe[e.charCodeAt(v)];const p=c|o;c|=(c&s)+s^s,o|=~(c|s),s&=c,o&i&&u++,s&i&&u--,o=o<<1|1,s=s<<1|~(p|o),o&=p}for(v=r;v--;)Oe[t.charCodeAt(v)]=0;return u},ea=(t,e)=>{const r=e.length,n=t.length,i=[],s=[],o=Math.ceil(r/32),u=Math.ceil(n/32);for(let f=0;f<o;f++)s[f]=-1,i[f]=0;let v=0;for(;v<u-1;v++){let f=0,a=-1;const O=v*32,C=Math.min(32,n)+O;for(let y=O;y<C;y++)Oe[t.charCodeAt(y)]|=1<<y;for(let y=0;y<r;y++){const B=Oe[e.charCodeAt(y)],A=s[y/32|0]>>>y&1,L=i[y/32|0]>>>y&1,W=B|f,K=((B|L)&a)+a^a|B|L;let H=f|~(K|a),T=a&K;H>>>31^A&&(s[y/32|0]^=1<<y),T>>>31^L&&(i[y/32|0]^=1<<y),H=H<<1|A,T=T<<1|L,a=T|~(W|H),f=H&W}for(let y=O;y<C;y++)Oe[t.charCodeAt(y)]=0}let c=0,p=-1;const m=v*32,g=Math.min(32,n-m)+m;for(let f=m;f<g;f++)Oe[t.charCodeAt(f)]|=1<<f;let b=n;for(let f=0;f<r;f++){const a=Oe[e.charCodeAt(f)],O=s[f/32|0]>>>f&1,C=i[f/32|0]>>>f&1,y=a|c,B=((a|C)&p)+p^p|a|C;let A=c|~(B|p),L=p&B;b+=A>>>n-1&1,b-=L>>>n-1&1,A>>>31^O&&(s[f/32|0]^=1<<f),L>>>31^C&&(i[f/32|0]^=1<<f),A=A<<1|O,L=L<<1|C,p=L|~(y|A),c=A&y}for(let f=m;f<g;f++)Oe[t.charCodeAt(f)]=0;return b},er=(t,e)=>{if(t.length<e.length){const r=e;e=t,t=r}return e.length===0?t.length:t.length<=32?Qn(t,e):ea(t,e)};class ta{constructor(){Ae(this,"phonetic");Ae(this,"dictionaryCache");Ae(this,"tempSuffixCache");this.phonetic=new Tn,this.dictionaryCache=Object.create(null),this.tempSuffixCache=Object.create(null)}getAutocorrect(e,r){const n=Ue.autocorrect[e];if(n)return this.phonetic.convert(n);{const i=Ue.autocorrect[ra(r.middle)];if(i)return r.begin+this.phonetic.convert(i)+r.end}return null}addToTempSuffixCache(e,r,n){e in this.tempSuffixCache||(this.tempSuffixCache[e]={base:r,eng:n})}addSuffix(e){var i;const r=((i=this.dictionaryCache[e])==null?void 0:i.slice(0))??[];this.tempSuffixCache=Object.create(null);const n=e.length;if(n>=2)for(let s=1;s<=n;s++){const o=Ue.suffixes[e.substring(s)];if(o===void 0)continue;const u=e.substring(0,s);if(this.dictionaryCache[u]!==void 0)for(const v of this.dictionaryCache[u]){const c=v.substring(v.length-1),p=o.substring(0,1);let m=v;if(rr(c)&&tr(p))m+="য়";else if(c=="ৎ")m=v.substring(0,v.length-1)+"ত";else if(c=="ং"){m=v.substring(0,v.length-1)+"ঙ"+o,r.push(m);continue}m+=o,r.push(m),this.addToTempSuffixCache(m,v,u)}}return r}getPreviousSelection(e,r,n){const i=e.middle,s=i.length;let o="";if(n[i])o=n[i];else if(s>=2)for(let v=1;v<s;v++){const c=i.substring(i.length-v).toLowerCase(),p=Ue.suffixes[c];if(p){const m=i.substring(0,i.length-c.length);if(n[m]){const g=n[m],b=g.substring(i.length- -1),f=p.substring(0,1);o=g,rr(b)&&tr(f)?o+="য়":b=="ৎ"?o=g.substring(0,g.length-1)+"ত":b=="ং"&&(o=g.substring(0,g.length-1)+"ঙ"),o+=p,n[i]=o;break}}}const u=r.indexOf(o);return u<0?0:u}isInSuffixCache(e){return e in this.tempSuffixCache}getFromSuffixCache(e){return this.tempSuffixCache[e]}suggest(e,r){var a;const n=Nr(e);n.begin=this.phonetic.convert(n.begin),n.end=this.phonetic.convert(n.end);const i=this.phonetic.convert(n.middle),s=n.middle.toLowerCase(),o=((a=this.dictionaryCache[s])==null?void 0:a.slice(0))??na(s),u=this.getAutocorrect(e,n),v=new Set;u!==null&&(v.add(u),o.push(u)),this.dictionaryCache[s]||o.length>0&&(this.dictionaryCache[s]=o.slice(0));const c=this.addSuffix(n.middle.toLowerCase()),p=aa(i,c);for(const O of p)if(v.add(O),v.size>=10)break;const m=[...v],g=[];m.includes(i)||g.push(Ot(n.begin+i+n.end));const b=m.map(O=>Ot(n.begin+O+n.end));b.includes(e)||(Ue.emoticons.has(e)?(m.unshift(e),b.unshift(e)):g.includes(e)||g.push(e));const f=10-g.length;return m.splice(f,m.length-f,...g),b.splice(f,b.length-f,...g),{prevSelection:this.getPreviousSelection(n,m,r),candidates:b,rawInput:e}}suggestWithoutDictionary(e){return{candidates:[Ot(this.phonetic.convert(e))],prevSelection:0,rawInput:e}}}const ra=t=>t.replaceAll(/[oiudgjnrstyz]/gi,e=>e.toLowerCase()),Nr=t=>{const e=t.match(/(^(?::`|\.`|[-\]~!@#%&*()_=+[{}'";<>/?|.,])*?(?=(?:,{2,}))|^(?::`|\.`|[-\]~!@#%&*()_=+[{}'";<>/?|.,])*)(.*?(?:,,)*)((?::`|\.`|[-\]~!@#%&*()_=+[{}'";<>/?|.,])*$)/)??[];return{begin:e[1]??"",middle:e[2]??"",end:e[3]??""}},tr=t=>/^[\u09be\u09bf\u09c0\u09c1\u09c2\u09c3\u09c7\u09c8\u09cb\u09cc\u09c4]$/.test(t),rr=t=>/^[\u0985\u0986\u0987\u0988\u0989\u098a\u098b\u098f\u0990\u0993\u0994\u098c\u09e1\u09be\u09bf\u09c0\u09c1\u09c2\u09c3\u09c7\u09c8\u09cb\u09cc]$/u.test(t),na=t=>{const e=new RegExp(`^${Jn(t)}$`),r=Mn[t.toLowerCase().charAt(0)]??[],n=[];for(const i of r)for(const s of Ue.dictionary[i])e.test(s)&&n.push(s);return n},Ot=t=>/^([\p{L}\p{M}]+।){2,}$/u.test(t)?t.replaceAll("।","."):t,aa=(t,e)=>e.slice(0).sort((r,n)=>{const i=er(t,r),s=er(t,n);return i<s?-1:i>s?1:0});class ia{constructor(){Ae(this,"buffer","");Ae(this,"suggestionBuilder");Ae(this,"userSelections");this.suggestionBuilder=new ta;try{const e=localStorage.getItem("AvroUserSelections");e===null?this.userSelections=Object.create(null):this.userSelections=JSON.parse(e)}catch(e){this.userSelections=Object.create(null),console.error(e,"Error while loading user selections")}}saveUserSelections(){try{localStorage.setItem("AvroUserSelections",JSON.stringify(this.userSelections))}catch(e){console.error(e,"Error while saving user selections")}}addUserSelection(e,r){const n=Nr(e);this.userSelections[n.middle]=r}commit(e,r){if(this.addUserSelection(e,r),this.suggestionBuilder.isInSuffixCache(r)){const{base:n,eng:i}=this.suggestionBuilder.getFromSuffixCache(r);this.userSelections[i]||(this.userSelections[i]=n)}this.saveUserSelections(),this.closeInputSession()}get ongoingInputSession(){return this.buffer!==""}closeInputSession(){this.buffer=""}suggest(){return this.suggestionBuilder.suggest(this.buffer,this.userSelections)}getSuggestionForKey(e){return this.buffer+=e,this.suggest()}getSuggestionForBackspace(){const e=this.buffer;return this.buffer=e.substring(0,e.length-1),this.buffer===""?null:this.suggest()}}var sa={isHistory(t){return Fn(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||Bt.isOperationList(t.redos[0].operations))&&(t.undos.length===0||Bt.isOperationList(t.undos[0].operations))}},xt=new WeakMap,Ct=new WeakMap,qe={isHistoryEditor(t){return sa.isHistory(t.history)&&h.isEditor(t)},isMerging(t){return Ct.get(t)},isSaving(t){return xt.get(t)},redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var r=qe.isMerging(t);Ct.set(t,!1),e(),Ct.set(t,r)},withoutSaving(t,e){var r=qe.isSaving(t);xt.set(t,!1),e(),xt.set(t,r)}},oa=t=>{var e=t,{apply:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:n}=e,{redos:i}=n;if(i.length>0){var s=i[i.length-1];s.selectionBefore&&j.setSelection(e,s.selectionBefore),qe.withoutSaving(e,()=>{h.withoutNormalizing(e,()=>{for(var o of s.operations)e.apply(o)})}),n.redos.pop(),e.writeHistory("undos",s)}},e.undo=()=>{var{history:n}=e,{undos:i}=n;if(i.length>0){var s=i[i.length-1];qe.withoutSaving(e,()=>{h.withoutNormalizing(e,()=>{var o=s.operations.map(Bt.inverse).reverse();for(var u of o)e.apply(u);s.selectionBefore&&j.setSelection(e,s.selectionBefore)})}),e.writeHistory("redos",s),n.undos.pop()}},e.apply=n=>{var{operations:i,history:s}=e,{undos:o}=s,u=o[o.length-1],v=u&&u.operations[u.operations.length-1],c=qe.isSaving(e),p=qe.isMerging(e);if(c==null&&(c=ca(n)),c){if(p==null&&(u==null?p=!1:i.length!==0?p=!0:p=la(n,v)),u&&p)u.operations.push(n);else{var m={operations:[n],selectionBefore:e.selection};e.writeHistory("undos",m)}for(;o.length>100;)o.shift();s.redos=[]}r(n)},e.writeHistory=(n,i)=>{e.history[n].push(i)},e},la=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&q.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&q.equals(t.path,e.path)),ca=(t,e)=>t.type!=="set_selection",ua=va,jr="֑-߿יִ-﷽ﹰ-ﻼ",zr="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",fa=new RegExp("^[^"+zr+"]*["+jr+"]"),da=new RegExp("^[^"+jr+"]*["+zr+"]");function va(t){return t=String(t||""),fa.test(t)?"rtl":da.test(t)?"ltr":"neutral"}const _r=Ut(ua);function ha(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var qt=ha,ga=typeof st=="object"&&st&&st.Object===Object&&st,pa=ga,ma=pa,wa=typeof self=="object"&&self&&self.Object===Object&&self,ba=ma||wa||Function("return this")(),Hr=ba,ya=Hr,Ea=function(){return ya.Date.now()},Sa=Ea,Oa=/\s/;function xa(t){for(var e=t.length;e--&&Oa.test(t.charAt(e)););return e}var Ca=xa,ka=Ca,Da=/^\s+/;function Ta(t){return t&&t.slice(0,ka(t)+1).replace(Da,"")}var Ma=Ta,Fa=Hr,Pa=Fa.Symbol,Ur=Pa,nr=Ur,qr=Object.prototype,Ra=qr.hasOwnProperty,Ba=qr.toString,Ye=nr?nr.toStringTag:void 0;function Ia(t){var e=Ra.call(t,Ye),r=t[Ye];try{t[Ye]=void 0;var n=!0}catch{}var i=Ba.call(t);return n&&(e?t[Ye]=r:delete t[Ye]),i}var Aa=Ia,La=Object.prototype,Wa=La.toString;function Na(t){return Wa.call(t)}var ja=Na,ar=Ur,za=Aa,_a=ja,Ha="[object Null]",Ua="[object Undefined]",ir=ar?ar.toStringTag:void 0;function qa(t){return t==null?t===void 0?Ua:Ha:ir&&ir in Object(t)?za(t):_a(t)}var Ka=qa;function Va(t){return t!=null&&typeof t=="object"}var $a=Va,Ya=Ka,Ga=$a,Xa="[object Symbol]";function Za(t){return typeof t=="symbol"||Ga(t)&&Ya(t)==Xa}var Ja=Za,Qa=Ma,sr=qt,ei=Ja,or=0/0,ti=/^[-+]0x[0-9a-f]+$/i,ri=/^0b[01]+$/i,ni=/^0o[0-7]+$/i,ai=parseInt;function ii(t){if(typeof t=="number")return t;if(ei(t))return or;if(sr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=sr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Qa(t);var r=ri.test(t);return r||ni.test(t)?ai(t.slice(2),r?2:8):ti.test(t)?or:+t}var si=ii,oi=qt,kt=Sa,lr=si,li="Expected a function",ci=Math.max,ui=Math.min;function fi(t,e,r){var n,i,s,o,u,v,c=0,p=!1,m=!1,g=!0;if(typeof t!="function")throw new TypeError(li);e=lr(e)||0,oi(r)&&(p=!!r.leading,m="maxWait"in r,s=m?ci(lr(r.maxWait)||0,e):s,g="trailing"in r?!!r.trailing:g);function b(W){var K=n,H=i;return n=i=void 0,c=W,o=t.apply(H,K),o}function f(W){return c=W,u=setTimeout(C,e),p?b(W):o}function a(W){var K=W-v,H=W-c,T=e-K;return m?ui(T,s-H):T}function O(W){var K=W-v,H=W-c;return v===void 0||K>=e||K<0||m&&H>=s}function C(){var W=kt();if(O(W))return y(W);u=setTimeout(C,a(W))}function y(W){return u=void 0,g&&n?b(W):(n=i=void 0,o)}function B(){u!==void 0&&clearTimeout(u),c=0,n=v=i=u=void 0}function A(){return u===void 0?o:y(kt())}function L(){var W=kt(),K=O(W);if(n=arguments,i=this,v=W,K){if(u===void 0)return f(v);if(m)return clearTimeout(u),u=setTimeout(C,e),b(v)}return u===void 0&&(u=setTimeout(C,e)),o}return L.cancel=B,L.flush=A,L}var Kr=fi;const di=Ut(Kr);var vi=Kr,hi=qt,gi="Expected a function";function pi(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(gi);return hi(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),vi(t,e,{leading:n,maxWait:e,trailing:i})}var mi=pi;const wi=Ut(mi);function cr(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function ur(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function Dt(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return ur(r.overflowY,e)||ur(r.overflowX,e)||function(n){var i=function(s){if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}}(n);return!!i&&(i.clientHeight<n.scrollHeight||i.clientWidth<n.scrollWidth)}(t)}return!1}function ot(t,e,r,n,i,s,o,u){return s<t&&o>e||s>t&&o<e?0:s<=t&&u<=r||o>=e&&u>=r?s-t-n:o>e&&u<r||s<t&&u>r?o-e+i:0}var fr=function(t,e){var r=window,n=e.scrollMode,i=e.block,s=e.inline,o=e.boundary,u=e.skipOverflowHiddenElements,v=typeof o=="function"?o:function(de){return de!==o};if(!cr(t))throw new TypeError("Invalid target");for(var c,p,m=document.scrollingElement||document.documentElement,g=[],b=t;cr(b)&&v(b);){if((b=(p=(c=b).parentElement)==null?c.getRootNode().host||null:p)===m){g.push(b);break}b!=null&&b===document.body&&Dt(b)&&!Dt(document.documentElement)||b!=null&&Dt(b,u)&&g.push(b)}for(var f=r.visualViewport?r.visualViewport.width:innerWidth,a=r.visualViewport?r.visualViewport.height:innerHeight,O=window.scrollX||pageXOffset,C=window.scrollY||pageYOffset,y=t.getBoundingClientRect(),B=y.height,A=y.width,L=y.top,W=y.right,K=y.bottom,H=y.left,T=i==="start"||i==="nearest"?L:i==="end"?K:L+B/2,z=s==="center"?H+A/2:s==="end"?W:H,te=[],M=0;M<g.length;M++){var P=g[M],R=P.getBoundingClientRect(),D=R.height,J=R.width,Y=R.top,ce=R.right,Q=R.bottom,re=R.left;if(n==="if-needed"&&L>=0&&H>=0&&K<=a&&W<=f&&L>=Y&&K<=Q&&H>=re&&W<=ce)return te;var ue=getComputedStyle(P),fe=parseInt(ue.borderLeftWidth,10),Te=parseInt(ue.borderTopWidth,10),d=parseInt(ue.borderRightWidth,10),k=parseInt(ue.borderBottomWidth,10),E=0,x=0,_="offsetWidth"in P?P.offsetWidth-P.clientWidth-fe-d:0,N="offsetHeight"in P?P.offsetHeight-P.clientHeight-Te-k:0,U="offsetWidth"in P?P.offsetWidth===0?0:J/P.offsetWidth:0,ee="offsetHeight"in P?P.offsetHeight===0?0:D/P.offsetHeight:0;if(m===P)E=i==="start"?T:i==="end"?T-a:i==="nearest"?ot(C,C+a,a,Te,k,C+T,C+T+B,B):T-a/2,x=s==="start"?z:s==="center"?z-f/2:s==="end"?z-f:ot(O,O+f,f,fe,d,O+z,O+z+A,A),E=Math.max(0,E+C),x=Math.max(0,x+O);else{E=i==="start"?T-Y-Te:i==="end"?T-Q+k+N:i==="nearest"?ot(Y,Q,D,Te,k+N,T,T+B,B):T-(Y+D/2)+N/2,x=s==="start"?z-re-fe:s==="center"?z-(re+J/2)+_/2:s==="end"?z-ce+d+_:ot(re,ce,J,fe,d+_,z,z+A,A);var X=P.scrollLeft,ae=P.scrollTop;T+=ae-(E=Math.max(0,Math.min(ae+E/ee,P.scrollHeight-D/ee+N))),z+=X-(x=Math.max(0,Math.min(X+x/U,P.scrollWidth-J/U+_)))}te.push({el:P,top:E,left:x})}return te};function Vr(t){return t===Object(t)&&Object.keys(t).length!==0}function bi(t,e){e===void 0&&(e="auto");var r="scrollBehavior"in document.body.style;t.forEach(function(n){var i=n.el,s=n.top,o=n.left;i.scroll&&r?i.scroll({top:s,left:o,behavior:e}):(i.scrollTop=s,i.scrollLeft=o)})}function yi(t){return t===!1?{block:"end",inline:"nearest"}:Vr(t)?t:{block:"start",inline:"nearest"}}function Ei(t,e){var r=t.isConnected||t.ownerDocument.documentElement.contains(t);if(Vr(e)&&typeof e.behavior=="function")return e.behavior(r?fr(t,e):[]);if(r){var n=yi(e);return bi(fr(t,n),n.behavior)}}var Ne=[],Si=function(){return Ne.some(function(t){return t.activeTargets.length>0})},Oi=function(){return Ne.some(function(t){return t.skippedTargets.length>0})},dr="ResizeObserver loop completed with undelivered notifications.",xi=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:dr}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=dr),window.dispatchEvent(t)},tt;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(tt||(tt={}));var je=function(t){return Object.freeze(t)},Ci=function(){function t(e,r){this.inlineSize=e,this.blockSize=r,je(this)}return t}(),$r=function(){function t(e,r,n,i){return this.x=e,this.y=r,this.width=n,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,je(this)}return t.prototype.toJSON=function(){var e=this,r=e.x,n=e.y,i=e.top,s=e.right,o=e.bottom,u=e.left,v=e.width,c=e.height;return{x:r,y:n,top:i,right:s,bottom:o,left:u,width:v,height:c}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),Kt=function(t){return t instanceof SVGElement&&"getBBox"in t},Yr=function(t){if(Kt(t)){var e=t.getBBox(),r=e.width,n=e.height;return!r&&!n}var i=t,s=i.offsetWidth,o=i.offsetHeight;return!(s||o||t.getClientRects().length)},vr=function(t){var e;if(t instanceof Element)return!0;var r=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},ki=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Qe=typeof window<"u"?window:{},lt=new WeakMap,hr=/auto|scroll/,Di=/^tb|vertical/,Ti=/msie|trident/i.test(Qe.navigator&&Qe.navigator.userAgent),ye=function(t){return parseFloat(t||"0")},Ke=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=!1),new Ci((r?e:t)||0,(r?t:e)||0)},gr=je({devicePixelContentBoxSize:Ke(),borderBoxSize:Ke(),contentBoxSize:Ke(),contentRect:new $r(0,0,0,0)}),Gr=function(t,e){if(e===void 0&&(e=!1),lt.has(t)&&!e)return lt.get(t);if(Yr(t))return lt.set(t,gr),gr;var r=getComputedStyle(t),n=Kt(t)&&t.ownerSVGElement&&t.getBBox(),i=!Ti&&r.boxSizing==="border-box",s=Di.test(r.writingMode||""),o=!n&&hr.test(r.overflowY||""),u=!n&&hr.test(r.overflowX||""),v=n?0:ye(r.paddingTop),c=n?0:ye(r.paddingRight),p=n?0:ye(r.paddingBottom),m=n?0:ye(r.paddingLeft),g=n?0:ye(r.borderTopWidth),b=n?0:ye(r.borderRightWidth),f=n?0:ye(r.borderBottomWidth),a=n?0:ye(r.borderLeftWidth),O=m+c,C=v+p,y=a+b,B=g+f,A=u?t.offsetHeight-B-t.clientHeight:0,L=o?t.offsetWidth-y-t.clientWidth:0,W=i?O+y:0,K=i?C+B:0,H=n?n.width:ye(r.width)-W-L,T=n?n.height:ye(r.height)-K-A,z=H+O+L+y,te=T+C+A+B,M=je({devicePixelContentBoxSize:Ke(Math.round(H*devicePixelRatio),Math.round(T*devicePixelRatio),s),borderBoxSize:Ke(z,te,s),contentBoxSize:Ke(H,T,s),contentRect:new $r(m,v,H,T)});return lt.set(t,M),M},Xr=function(t,e,r){var n=Gr(t,r),i=n.borderBoxSize,s=n.contentBoxSize,o=n.devicePixelContentBoxSize;switch(e){case tt.DEVICE_PIXEL_CONTENT_BOX:return o;case tt.BORDER_BOX:return i;default:return s}},Mi=function(){function t(e){var r=Gr(e);this.target=e,this.contentRect=r.contentRect,this.borderBoxSize=je([r.borderBoxSize]),this.contentBoxSize=je([r.contentBoxSize]),this.devicePixelContentBoxSize=je([r.devicePixelContentBoxSize])}return t}(),Zr=function(t){if(Yr(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e},Fi=function(){var t=1/0,e=[];Ne.forEach(function(o){if(o.activeTargets.length!==0){var u=[];o.activeTargets.forEach(function(c){var p=new Mi(c.target),m=Zr(c.target);u.push(p),c.lastReportedSize=Xr(c.target,c.observedBox),m<t&&(t=m)}),e.push(function(){o.callback.call(o.observer,u,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var r=0,n=e;r<n.length;r++){var i=n[r];i()}return t},pr=function(t){Ne.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(i){i.isActive()&&(Zr(i.target)>t?r.activeTargets.push(i):r.skippedTargets.push(i))})})},Pi=function(){var t=0;for(pr(t);Si();)t=Fi(),pr(t);return Oi()&&xi(),t>0},Tt,Jr=[],Ri=function(){return Jr.splice(0).forEach(function(t){return t()})},Bi=function(t){if(!Tt){var e=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Ri()}).observe(r,n),Tt=function(){r.textContent="".concat(e?e--:e++)}}Jr.push(t),Tt()},Ii=function(t){Bi(function(){requestAnimationFrame(t)})},gt=0,Ai=function(){return!!gt},Li=250,Wi={attributes:!0,characterData:!0,childList:!0,subtree:!0},mr=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],wr=function(t){return t===void 0&&(t=0),Date.now()+t},Mt=!1,Ni=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var r=this;if(e===void 0&&(e=Li),!Mt){Mt=!0;var n=wr(e);Ii(function(){var i=!1;try{i=Pi()}finally{if(Mt=!1,e=n-wr(),!Ai())return;i?r.run(1e3):e>0?r.run(e):r.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,r=function(){return e.observer&&e.observer.observe(document.body,Wi)};document.body?r():Qe.addEventListener("DOMContentLoaded",r)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),mr.forEach(function(r){return Qe.addEventListener(r,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),mr.forEach(function(r){return Qe.removeEventListener(r,e.listener,!0)}),this.stopped=!0)},t}(),At=new Ni,br=function(t){!gt&&t>0&&At.start(),gt+=t,!gt&&At.stop()},ji=function(t){return!Kt(t)&&!ki(t)&&getComputedStyle(t).display==="inline"},zi=function(){function t(e,r){this.target=e,this.observedBox=r||tt.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=Xr(this.target,this.observedBox,!0);return ji(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),_i=function(){function t(e,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=r}return t}(),ct=new WeakMap,yr=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},ut=function(){function t(){}return t.connect=function(e,r){var n=new _i(e,r);ct.set(e,n)},t.observe=function(e,r,n){var i=ct.get(e),s=i.observationTargets.length===0;yr(i.observationTargets,r)<0&&(s&&Ne.push(i),i.observationTargets.push(new zi(r,n&&n.box)),br(1),At.schedule())},t.unobserve=function(e,r){var n=ct.get(e),i=yr(n.observationTargets,r),s=n.observationTargets.length===1;i>=0&&(s&&Ne.splice(Ne.indexOf(n),1),n.observationTargets.splice(i,1),br(-1))},t.disconnect=function(e){var r=this,n=ct.get(e);n.observationTargets.slice().forEach(function(i){return r.unobserve(e,i.target)}),n.activeTargets.splice(0,n.activeTargets.length)},t}(),Hi=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ut.connect(this,e)}return t.prototype.observe=function(e,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!vr(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ut.observe(this,e,r)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!vr(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ut.unobserve(this,e)},t.prototype.disconnect=function(){ut.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),De={};Object.defineProperty(De,"__esModule",{value:!0});var Ui=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Ft={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},qi={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Ui?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Qr={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var ft=1;ft<20;ft++)Qr["f"+ft]=111+ft;function bt(t,e,r){e&&!("byKey"in e)&&(r=e,e=null),Array.isArray(t)||(t=[t]);var n=t.map(function(o){return en(o,e)}),i=function(u){return n.some(function(v){return tn(v,u)})},s=r==null?i:i(r);return s}function Ki(t,e){return bt(t,e)}function Vi(t,e){return bt(t,{byKey:!0},e)}function en(t,e){var r=e&&e.byKey,n={};t=t.replace("++","+add");var i=t.split("+"),s=i.length;for(var o in Ft)n[Ft[o]]=!1;var u=!0,v=!1,c=void 0;try{for(var p=i[Symbol.iterator](),m;!(u=(m=p.next()).done);u=!0){var g=m.value,b=g.endsWith("?")&&g.length>1;b&&(g=g.slice(0,-1));var f=Vt(g),a=Ft[f];(s===1||!a)&&(r?n.key=f:n.which=rn(g)),a&&(n[a]=b?null:!0)}}catch(O){v=!0,c=O}finally{try{!u&&p.return&&p.return()}finally{if(v)throw c}}return n}function tn(t,e){for(var r in t){var n=t[r],i=void 0;if(n!=null&&(r==="key"&&e.key!=null?i=e.key.toLowerCase():r==="which"?i=n===91&&e.which===93?91:e.which:i=e[r],!(i==null&&n===!1)&&i!==n))return!1}return!0}function rn(t){t=Vt(t);var e=Qr[t]||t.toUpperCase().charCodeAt(0);return e}function Vt(t){return t=t.toLowerCase(),t=qi[t]||t,t}De.default=bt;De.isHotkey=bt;De.isCodeHotkey=Ki;var Pt=De.isKeyHotkey=Vi;De.parseHotkey=en;De.compareHotkey=tn;De.toKeyCode=rn;De.toKeyName=Vt;function yt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $i(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Ve(t,e){if(t==null)return{};var r=$i(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var $t=S.createContext(null),Ie=()=>{var t=S.useContext($t);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},Yi=parseInt(I.version.split(".")[0],10)>=17,Gi=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Er=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),ge=typeof navigator<"u"&&/Android/.test(navigator.userAgent),wt=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Xe=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Xi=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),nn=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Zi=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Ji=ge&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),Qi=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),es=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),ts=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),pt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fe=(!Zi||!Ji)&&!Xi&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",Yt=new WeakMap,Gt=new WeakMap,an=new WeakMap,mt=new WeakMap,Lt=new WeakMap,rt=new WeakMap,ze=new WeakMap,Wt=new WeakMap,Et=new WeakMap,Nt=new WeakMap,Le=new WeakMap,We=new WeakMap,et=new WeakMap,jt=new WeakMap,Xt=new WeakMap,we=new WeakMap,Ce=new WeakMap,le=new WeakMap,Pe=new WeakMap,Re=new WeakMap,sn=new WeakMap,$e=Symbol("placeholder"),on=Symbol("mark-placeholder"),rs=globalThis.Text,Zt=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,ns=t=>Be(t)&&t.nodeType===8,pe=t=>Be(t)&&t.nodeType===1,Be=t=>{var e=Zt(t);return!!e&&t instanceof e.Node},zt=t=>{var e=t&&t.anchorNode&&Zt(t.anchorNode);return!!e&&t instanceof e.Selection},ln=t=>Be(t)&&t.nodeType===3,as=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,is=t=>{var[e,r]=t;if(pe(e)&&e.childNodes.length){var n=r===e.childNodes.length,i=n?r-1:r;for([e,i]=cn(e,i,n?"backward":"forward"),n=i<r;pe(e)&&e.childNodes.length;){var s=n?e.childNodes.length-1:0;e=os(e,s,n?"backward":"forward")}r=n&&e.textContent!=null?e.textContent.length:0}return[e,r]},ss=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},cn=(t,e,r)=>{for(var{childNodes:n}=t,i=n[e],s=e,o=!1,u=!1;(ns(i)||pe(i)&&i.childNodes.length===0||pe(i)&&i.getAttribute("contenteditable")==="false")&&!(o&&u);){if(s>=n.length){o=!0,s=e-1,r="backward";continue}if(s<0){u=!0,s=e+1,r="forward";continue}i=n[s],e=s,s+=r==="forward"?1:-1}return[i,e]},os=(t,e,r)=>{var[n]=cn(t,e,r);return n},un=t=>{var e="";if(ln(t)&&t.nodeValue)return t.nodeValue;if(pe(t)){for(var r of Array.from(t.childNodes))e+=un(r);var n=getComputedStyle(t).getPropertyValue("display");(n==="block"||n==="list"||t.tagName==="BR")&&(e+=`
`)}return e},ls=/data-slate-fragment="(.+?)"/m,cs=t=>{var e=t.getData("text/html"),[,r]=e.match(ls)||[];return r},Jt=(t,e,r)=>{var{target:n}=e;if(pe(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:i}=w.getWindow(t);if(i.contains(n))return w.hasDOMNode(t,n,{editable:!0});var s=r.find(o=>{var{addedNodes:u,removedNodes:v}=o;for(var c of u)if(c===n||c.contains(n))return!0;for(var p of v)if(p===n||p.contains(n))return!0});return!s||s===e?!1:Jt(t,s,r)},us=0;class fs{constructor(){this.id="".concat(us++)}}var w={androidPendingDiffs:t=>le.get(t),androidScheduleFlush:t=>{var e;(e=Xt.get(t))===null||e===void 0||e()},blur:t=>{var e=w.toDOMNode(t,t),r=w.findDocumentOrShadowRoot(t);Le.set(t,!1),r.activeElement===e&&e.blur()},deselect:t=>{var{selection:e}=t,r=w.findDocumentOrShadowRoot(t),n=r.getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),e&&j.deselect(t)},findDocumentOrShadowRoot:t=>{var e=w.toDOMNode(t,t),r=e.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&r.getSelection!=null?r:e.ownerDocument},findEventRange:(t,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:r,clientY:n,target:i}=e;if(r==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var s=w.toSlateNode(t,e.target),o=w.findPath(t,s);if(oe.isElement(s)&&h.isVoid(t,s)){var u=i.getBoundingClientRect(),v=t.isInline(s)?r-u.left<u.left+u.width-r:n-u.top<u.top+u.height-n,c=h.point(t,o,{edge:v?"start":"end"}),p=v?h.before(t,c):h.after(t,c);if(p){var m=h.range(t,p);return m}}var g,{document:b}=w.getWindow(t);if(b.caretRangeFromPoint)g=b.caretRangeFromPoint(r,n);else{var f=b.caretPositionFromPoint(r,n);f&&(g=b.createRange(),g.setStart(f.offsetNode,f.offset),g.setEnd(f.offsetNode,f.offset))}if(!g)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var a=w.toSlateRange(t,g,{exactMatch:!1,suppressThrow:!1});return a},findKey:(t,e)=>{var r=Wt.get(e);return r||(r=new fs,Wt.set(e,r)),r},findPath:(t,e)=>{for(var r=[],n=e;;){var i=Gt.get(n);if(i==null){if(h.isEditor(n))return r;break}var s=Yt.get(n);if(s==null)break;r.unshift(s),n=i}throw new Error("Unable to find the path for Slate node: ".concat(Ze.stringify(e)))},focus:t=>{var e=w.toDOMNode(t,t),r=w.findDocumentOrShadowRoot(t);Le.set(t,!0),r.activeElement!==e&&e.focus({preventScroll:!0})},getWindow:t=>{var e=an.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:i=!1}=n,s=w.toDOMNode(e,e),o;try{o=pe(r)?r:r.parentElement}catch(u){if(!u.message.includes('Permission denied to access property "nodeType"'))throw u}return o?o.closest("[data-slate-editor]")===s&&(!i||o.isContentEditable?!0:typeof o.isContentEditable=="boolean"&&o.closest('[contenteditable="false"]')===s||!!o.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(t,e)=>Be(e)&&w.hasDOMNode(t,e,{editable:!0}),hasRange:(t,e)=>{var{anchor:r,focus:n}=e;return h.hasPath(t,r.path)&&h.hasPath(t,n.path)},hasSelectableTarget:(t,e)=>w.hasEditableTarget(t,e)||w.isTargetInsideNonReadonlyVoid(t,e),hasTarget:(t,e)=>Be(e)&&w.hasDOMNode(t,e),insertData:(t,e)=>{t.insertData(e)},insertFragmentData:(t,e)=>t.insertFragmentData(e),insertTextData:(t,e)=>t.insertTextData(e),isComposing:t=>!!We.get(t),isFocused:t=>!!Le.get(t),isReadOnly:t=>!!Nt.get(t),isTargetInsideNonReadonlyVoid:(t,e)=>{if(Nt.get(t))return!1;var r=w.hasTarget(t,e)&&w.toSlateNode(t,e);return oe.isElement(r)&&h.isVoid(t,r)},setFragmentData:(t,e,r)=>t.setFragmentData(e,r),toDOMNode:(t,e)=>{var r=Et.get(t),n=h.isEditor(e)?mt.get(t):r==null?void 0:r.get(w.findKey(t,e));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Ze.stringify(e)));return n},toDOMPoint:(t,e)=>{var[r]=h.node(t,e.path),n=w.toDOMNode(t,r),i;h.void(t,{at:e})&&(e={path:e.path,offset:0});for(var s="[data-slate-string], [data-slate-zero-width]",o=Array.from(n.querySelectorAll(s)),u=0,v=0;v<o.length;v++){var c=o[v],p=c.childNodes[0];if(!(p==null||p.textContent==null)){var{length:m}=p.textContent,g=c.getAttribute("data-slate-length"),b=g==null?m:parseInt(g,10),f=u+b,a=o[v+1];if(e.offset===f&&a!==null&&a!==void 0&&a.hasAttribute("data-slate-mark-placeholder")){var O,C=a.childNodes[0];i=[C instanceof rs?C:a,(O=a.textContent)!==null&&O!==void 0&&O.startsWith("\uFEFF")?1:0];break}if(e.offset<=f){var y=Math.min(m,Math.max(0,e.offset-u));i=[p,y];break}u=f}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Ze.stringify(e)));return i},toDOMRange:(t,e)=>{var{anchor:r,focus:n}=e,i=F.isBackward(e),s=w.toDOMPoint(t,r),o=F.isCollapsed(e)?s:w.toDOMPoint(t,n),u=w.getWindow(t),v=u.document.createRange(),[c,p]=i?o:s,[m,g]=i?s:o,b=pe(c)?c:c.parentElement,f=!!b.getAttribute("data-slate-zero-width"),a=pe(m)?m:m.parentElement,O=!!a.getAttribute("data-slate-zero-width");return v.setStart(c,f?1:p),v.setEnd(m,O?1:g),v},toSlateNode:(t,e)=>{var r=pe(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?rt.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(t,e,r)=>{var{exactMatch:n,suppressThrow:i}=r,[s,o]=n?e:is(e),u=s.parentNode,v=null,c=0;if(u){var p,m,g=w.toDOMNode(t,t),b=u.closest('[data-slate-void="true"]'),f=b&&g.contains(b)?b:null,a=u.closest("[data-slate-leaf]"),O=null;if(a){if(v=a.closest('[data-slate-node="text"]'),v){var C=w.getWindow(t),y=C.document.createRange();y.setStart(v,0),y.setEnd(s,o);var B=y.cloneContents(),A=[...Array.prototype.slice.call(B.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(B.querySelectorAll("[contenteditable=false]"))];A.forEach(R=>{if(ge&&!n&&R.hasAttribute("data-slate-zero-width")&&R.textContent.length>0&&R.textContext!=="\uFEFF"){R.textContent.startsWith("\uFEFF")&&(R.textContent=R.textContent.slice(1));return}R.parentNode.removeChild(R)}),c=B.textContent.length,O=v}}else if(f){for(var L=f.querySelectorAll("[data-slate-leaf]"),W=0;W<L.length;W++){var K=L[W];if(w.hasDOMNode(t,K)){a=K;break}}a?(v=a.closest('[data-slate-node="text"]'),O=a,c=O.textContent.length,O.querySelectorAll("[data-slate-zero-width]").forEach(R=>{c-=R.textContent.length})):c=1}O&&c===O.textContent.length&&ge&&O.getAttribute("data-slate-zero-width")==="z"&&(p=O.textContent)!==null&&p!==void 0&&p.startsWith("\uFEFF")&&(u.hasAttribute("data-slate-zero-width")||wt&&(m=O.textContent)!==null&&m!==void 0&&m.endsWith(`

`))&&c--}if(ge&&!v&&!n){var H=u.hasAttribute("data-slate-node")?u:u.closest("[data-slate-node]");if(H&&w.hasDOMNode(t,H,{editable:!0})){var T=w.toSlateNode(t,H),{path:z,offset:te}=h.start(t,w.findPath(t,T));return H.querySelector("[data-slate-leaf]")||(te=o),{path:z,offset:te}}}if(!v){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var M=w.toSlateNode(t,v),P=w.findPath(t,M);return{path:P,offset:c}},toSlateRange:(t,e,r)=>{var{exactMatch:n,suppressThrow:i}=r,s=zt(e)?e.anchorNode:e.startContainer,o,u,v,c,p;if(s&&(zt(e)?(o=e.anchorNode,u=e.anchorOffset,v=e.focusNode,c=e.focusOffset,nn&&ss(o)?p=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:p=e.isCollapsed):(o=e.startContainer,u=e.startOffset,v=e.endContainer,c=e.endOffset,p=e.collapsed)),o==null||v==null||u==null||c==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));if("getAttribute"in v&&v.getAttribute("contenteditable")==="false"){var m;v=o,c=((m=o.textContent)===null||m===void 0?void 0:m.length)||0}var g=w.toSlatePoint(t,[o,u],{exactMatch:n,suppressThrow:i});if(!g)return null;var b=p?g:w.toSlatePoint(t,[v,c],{exactMatch:n,suppressThrow:i});if(!b)return null;if(wt&&!p&&o!==v){var f=h.isEnd(t,g,g.path),a=h.isStart(t,b,b.path);if(f){var O=h.after(t,g);g=O||g}if(a){var C=h.before(t,b);b=C||b}}var y={anchor:g,focus:b};return F.isExpanded(y)&&F.isForward(y)&&pe(v)&&h.void(t,{at:y.focus,mode:"highest"})&&(y=h.unhangRange(t,y,{voids:!0})),y}};function ds(t,e){var{path:r,diff:n}=e;if(!h.hasPath(t,r))return!1;var i=ne.get(t,r);if(!ke.isText(i))return!1;if(n.start!==i.text.length||n.text.length===0)return i.text.slice(n.start,n.start+n.text.length)===n.text;var s=q.next(r);if(!h.hasPath(t,s))return!1;var o=ne.get(t,s);return ke.isText(o)&&o.text.startsWith(n.text)}function fn(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.reduce((i,s)=>i.slice(0,s.start)+s.text+i.slice(s.end),t)}function vs(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n))return n;return r}function hs(t,e,r){for(var n=Math.min(t.length,e.length,r),i=0;i<n;i++)if(t.charAt(t.length-i-1)!==e.charAt(e.length-i-1))return i;return n}function dn(t,e){var{start:r,end:n,text:i}=e,s=t.slice(r,n),o=vs(s,i),u=Math.min(s.length-o,i.length-o),v=hs(s,i,u),c={start:r+o,end:n-v,text:i.slice(o,i.length-v)};return c.start===c.end&&c.text.length===0?null:c}function gs(t,e,r){var n=Math.min(e.start,r.start),i=Math.max(0,Math.min(e.start+e.text.length,r.end)-r.start),s=fn(t,e,r),o=Math.max(r.start+r.text.length,e.start+e.text.length+(e.start+e.text.length>r.start?r.text.length:0)-i),u=s.slice(n,o),v=Math.max(e.end,r.end-e.text.length+(e.end-e.start));return dn(t,{start:n,end:v,text:u})}function ps(t){var{path:e,diff:r}=t;return{anchor:{path:e,offset:r.start},focus:{path:e,offset:r.end}}}function _t(t,e){var{path:r,offset:n}=e;if(!h.hasPath(t,r))return null;var i=ne.get(t,r);if(!ke.isText(i))return null;var s=h.above(t,{match:u=>oe.isElement(u)&&h.isBlock(t,u),at:r});if(!s)return null;for(;n>i.text.length;){var o=h.next(t,{at:r,match:ke.isText});if(!o||!q.isDescendant(o[1],s[1]))return null;n-=i.text.length,i=o[0],r=o[1]}return{path:r,offset:n}}function Sr(t,e){var r=_t(t,e.anchor);if(!r)return null;if(F.isCollapsed(e))return{anchor:r,focus:r};var n=_t(t,e.focus);return n?{anchor:r,focus:n}:null}function Ht(t,e,r){var n=le.get(t),i=n==null?void 0:n.find(p=>{var{path:m}=p;return q.equals(m,e.path)});if(!i||e.offset<=i.diff.start)return Je.transform(e,r,{affinity:"backward"});var{diff:s}=i;if(e.offset<=s.start+s.text.length){var o={path:e.path,offset:s.start},u=Je.transform(o,r,{affinity:"backward"});return u?{path:u.path,offset:u.offset+e.offset-s.start}:null}var v={path:e.path,offset:e.offset-s.text.length+s.end-s.start},c=Je.transform(v,r,{affinity:"backward"});return c?r.type==="split_node"&&q.equals(r.path,e.path)&&v.offset<r.position&&s.start<r.position?c:{path:c.path,offset:c.offset+s.text.length-s.end+s.start}:null}function Or(t,e,r){var n=Ht(t,e.anchor,r);if(!n)return null;if(F.isCollapsed(e))return{anchor:n,focus:n};var i=Ht(t,e.focus,r);return i?{anchor:n,focus:i}:null}function ms(t,e){var{path:r,diff:n,id:i}=t;switch(e.type){case"insert_text":return!q.equals(e.path,r)||e.offset>=n.end?t:e.offset<=n.start?{diff:{start:e.text.length+n.start,end:e.text.length+n.end,text:n.text},id:i,path:r}:{diff:{start:n.start,end:n.end+e.text.length,text:n.text},id:i,path:r};case"remove_text":return!q.equals(e.path,r)||e.offset>=n.end?t:e.offset+e.text.length<=n.start?{diff:{start:n.start-e.text.length,end:n.end-e.text.length,text:n.text},id:i,path:r}:{diff:{start:n.start,end:n.end-e.text.length,text:n.text},id:i,path:r};case"split_node":return!q.equals(e.path,r)||e.position>=n.end?{diff:n,id:i,path:q.transform(r,e,{affinity:"backward"})}:e.position>n.start?{diff:{start:n.start,end:Math.min(e.position,n.end),text:n.text},id:i,path:r}:{diff:{start:n.start-e.position,end:n.end-e.position,text:n.text},id:i,path:q.transform(r,e,{affinity:"forward"})};case"merge_node":return q.equals(e.path,r)?{diff:{start:n.start+e.position,end:n.end+e.position,text:n.text},id:i,path:q.transform(r,e)}:{diff:n,id:i,path:q.transform(r,e)}}var s=q.transform(r,e);return s?{diff:n,path:s,id:i}:null}function xr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function dt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xr(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ws=25,bs=200,ys=function(){},Es=t=>(t==null?void 0:t.constructor.name)==="DataTransfer";function Ss(t){var{editor:e,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=t,i=!1,s=null,o=null,u=null,v=0,c=!1,p=()=>{var M=Re.get(e);if(Re.delete(e),M){var{selection:P}=e,R=Sr(e,M);R&&(!P||!F.equals(R,P))&&j.select(e,R)}},m=()=>{var M=Pe.get(e);if(Pe.delete(e),!!M){if(M.at){var P=Je.isPoint(M.at)?_t(e,M.at):Sr(e,M.at);if(!P)return;var R=h.range(e,P);(!e.selection||!F.equals(e.selection,R))&&j.select(e,P)}M.run()}},g=()=>{if(o&&(clearTimeout(o),o=null),u&&(clearTimeout(u),u=null),!A()&&!B()){p();return}i||(i=!0,setTimeout(()=>i=!1)),B()&&(i="action");var M=e.selection&&h.rangeRef(e,e.selection,{affinity:"forward"});Ce.set(e,e.marks),ys("flush",Pe.get(e),le.get(e));for(var P=A(),R;R=(D=le.get(e))===null||D===void 0?void 0:D[0];){var D,J,Y=we.get(e);Y!==void 0&&(we.delete(e),e.marks=Y),Y&&c===!1&&(c=null);var ce=ps(R);(!e.selection||!F.equals(e.selection,ce))&&j.select(e,ce),R.diff.text?h.insertText(e,R.diff.text):h.deleteFragment(e),le.set(e,(J=le.get(e))===null||J===void 0?void 0:J.filter(ue=>{var{id:fe}=ue;return fe!==R.id})),ds(e,R)||(P=!1,Pe.delete(e),Ce.delete(e),i="action",Re.delete(e),r.cancel(),n.cancel(),M==null||M.unref())}var Q=M==null?void 0:M.unref();if(Q&&!Re.get(e)&&(!e.selection||!F.equals(Q,e.selection))&&j.select(e,Q),B()){m();return}P&&r(),r.flush(),n.flush(),p();var re=Ce.get(e);Ce.delete(e),re!==void 0&&(e.marks=re,e.onChange())},b=M=>{s&&clearTimeout(s),s=setTimeout(()=>{We.set(e,!1),g()},ws)},f=M=>{We.set(e,!0),s&&(clearTimeout(s),s=null)},a=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,R=Lt.get(e);if(R){if(A()||P){R.style.display="none";return}R.style.removeProperty("display")}},O=(M,P)=>{var R,D=(R=le.get(e))!==null&&R!==void 0?R:[];le.set(e,D);var J=ne.leaf(e,M),Y=D.findIndex(re=>q.equals(re.path,M));if(Y<0){var ce=dn(J.text,P);ce&&D.push({path:M,diff:P,id:v++}),a();return}var Q=gs(J.text,D[Y].diff,P);if(!Q){D.splice(Y,1),a();return}D[Y]=dt(dt({},D[Y]),{},{diff:Q})},C=function(P){var{at:R}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c=!1,Re.delete(e),r.cancel(),n.cancel(),B()&&g(),Pe.set(e,{at:R,run:P}),u=setTimeout(g)},y=M=>{var P;o&&(clearTimeout(o),o=null);var{inputType:R}=M,D=null,J=M.dataTransfer||M.data||void 0;c!==!1&&R!=="insertText"&&R!=="insertCompositionText"&&(c=!1);var[Y]=M.getTargetRanges();Y&&(D=w.toSlateRange(e,Y,{exactMatch:!1,suppressThrow:!0}));var ce=w.getWindow(e),Q=ce.getSelection();if(!D&&Q&&(Y=Q,D=w.toSlateRange(e,Q,{exactMatch:!1,suppressThrow:!0})),D=(P=D)!==null&&P!==void 0?P:e.selection,!!D){var re=!0;if(R.startsWith("delete")){if(F.isExpanded(D)){var[ue,fe]=F.edges(D),Te=ne.leaf(e,ue.path);if(Te.text.length===ue.offset&&fe.offset===0){var d=h.next(e,{at:ue.path,match:ke.isText});d&&q.equals(d[1],fe.path)&&(D={anchor:fe,focus:fe})}}var k=R.endsWith("Backward")?"backward":"forward",[E,x]=F.edges(D),[_,N]=h.leaf(e,E.path),U={text:"",start:E.offset,end:x.offset},ee=le.get(e),X=ee==null?void 0:ee.find(it=>q.equals(it.path,N)),ae=X?[X.diff,U]:[U],de=fn(_.text,...ae);if(de.length===0&&(re=!1),F.isExpanded(D)){if(re&&q.equals(D.anchor.path,D.focus.path)){var ve={path:D.anchor.path,offset:E.offset},he=h.range(e,ve,ve);return K(he),O(D.anchor.path,{text:"",end:x.offset,start:E.offset})}return C(()=>h.deleteFragment(e,{direction:k}),{at:D})}}switch(R){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return C(()=>h.deleteFragment(e),{at:D});case"deleteContent":case"deleteContentForward":{var{anchor:ie}=D;if(re&&F.isCollapsed(D)){var Ee=ne.leaf(e,ie.path);if(ie.offset<Ee.text.length)return O(ie.path,{text:"",start:ie.offset,end:ie.offset+1})}return C(()=>h.deleteForward(e),{at:D})}case"deleteContentBackward":{var Se,{anchor:me}=D,Me=zt(Y)?Y.isCollapsed:!!((Se=Y)!==null&&Se!==void 0&&Se.collapsed);return re&&Me&&F.isCollapsed(D)&&me.offset>0?O(me.path,{text:"",start:me.offset-1,end:me.offset}):C(()=>h.deleteBackward(e),{at:D})}case"deleteEntireSoftLine":return C(()=>{h.deleteBackward(e,{unit:"line"}),h.deleteForward(e,{unit:"line"})},{at:D});case"deleteHardLineBackward":return C(()=>h.deleteBackward(e,{unit:"block"}),{at:D});case"deleteSoftLineBackward":return C(()=>h.deleteBackward(e,{unit:"line"}),{at:D});case"deleteHardLineForward":return C(()=>h.deleteForward(e,{unit:"block"}),{at:D});case"deleteSoftLineForward":return C(()=>h.deleteForward(e,{unit:"line"}),{at:D});case"deleteWordBackward":return C(()=>h.deleteBackward(e,{unit:"word"}),{at:D});case"deleteWordForward":return C(()=>h.deleteForward(e,{unit:"word"}),{at:D});case"insertLineBreak":return C(()=>h.insertSoftBreak(e),{at:D});case"insertParagraph":return C(()=>h.insertBreak(e),{at:D});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(Es(J))return C(()=>w.insertData(e,J),{at:D});var V=J??"";if(we.get(e)&&(V=V.replace("\uFEFF","")),R==="insertText"&&/.*\n.*\n$/.test(V)&&(V=V.slice(0,-1)),V.includes(`
`))return C(()=>{var it=V.split(`
`);it.forEach((Qt,Cn)=>{Qt&&h.insertText(e,Qt),Cn!==it.length-1&&h.insertSoftBreak(e)})},{at:D});if(q.equals(D.anchor.path,D.focus.path)){var[_e,St]=F.edges(D),be={start:_e.offset,end:St.offset,text:V};if(V&&c&&R==="insertCompositionText"){var at=c.start+c.text.search(/\S|$/),xn=be.start+be.text.search(/\S|$/);xn===at+1&&be.end===c.start+c.text.length?(be.start-=1,c=null,z()):c=!1}else R==="insertText"?c===null?c=be:c&&F.isCollapsed(D)&&c.end+c.text.length===_e.offset?c=dt(dt({},c),{},{text:c.text+V}):c=!1:c=!1;if(re){O(_e.path,be);return}}return C(()=>h.insertText(e,V),{at:D})}}}},B=()=>!!Pe.get(e),A=()=>{var M;return!!((M=le.get(e))!==null&&M!==void 0&&M.length)},L=()=>B()||A(),W=()=>i,K=M=>{Re.set(e,M),o&&(clearTimeout(o),o=null);var{selection:P}=e;if(M){var R=!P||!q.equals(P.anchor.path,M.anchor.path),D=!P||!q.equals(P.anchor.path.slice(0,-1),M.anchor.path.slice(0,-1));(R&&c||D)&&(c=!1),(R||A())&&(o=setTimeout(g,bs))}},H=()=>{(B()||!A())&&g()},T=M=>{A()||(a(!0),setTimeout(a))},z=()=>{B()||(u=setTimeout(g))},te=M=>{if(!(A()||B())&&M.some(R=>Jt(e,R,M))){var P;(P=sn.get(e))===null||P===void 0||P()}};return{flush:g,scheduleFlush:z,hasPendingDiffs:A,hasPendingAction:B,hasPendingChanges:L,isFlushing:W,handleUserSelect:K,handleCompositionEnd:b,handleCompositionStart:f,handleDOMBeforeInput:y,handleKeyDown:T,handleDomMutations:te,handleInput:H}}function Os(){var t=S.useRef(!1);return S.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}var nt=pt?S.useLayoutEffect:S.useEffect;function xs(t,e,r){var[n]=S.useState(()=>new MutationObserver(e));nt(()=>{n.takeRecords()}),S.useEffect(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(t.current,r),()=>n.disconnect()},[n,t,r])}var Cs=["node"];function Cr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ks(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cr(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ds={subtree:!0,childList:!0,characterData:!0},Ts=ge?t=>{var{node:e}=t,r=Ve(t,Cs);if(!ge)return null;var n=Ie(),i=Os(),[s]=S.useState(()=>Ss(ks({editor:n},r)));return xs(e,s.handleDomMutations,Ds),Xt.set(n,s.scheduleFlush),i&&s.flush(),s}:()=>null,Ms=["anchor","focus"],Fs=["anchor","focus"],Ps=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>e.hasOwnProperty(r)&&t[r]===e[r]),vn=(t,e)=>{var r=Ve(t,Ms),n=Ve(e,Fs);return t[$e]===e[$e]&&Ps(r,n)},Rs=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],i=e[r];if(!F.equals(n,i)||!vn(n,i))return!1}return!0},Bs=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],i=e[r];if(n.anchor.offset!==i.anchor.offset||n.focus.offset!==i.focus.offset||!vn(n,i))return!1}return!0},Is=t=>{var{isLast:e,leaf:r,parent:n,text:i}=t,s=Ie(),o=w.findPath(s,i),u=q.parent(o),v=r[on]===!0;return s.isVoid(n)?I.createElement(Rt,{length:ne.string(n).length}):r.text===""&&n.children[n.children.length-1]===i&&!s.isInline(n)&&h.string(s,u)===""?I.createElement(Rt,{isLineBreak:!0,isMarkPlaceholder:v}):r.text===""?I.createElement(Rt,{isMarkPlaceholder:v}):e&&r.text.slice(-1)===`
`?I.createElement(kr,{isTrailing:!0,text:r.text}):I.createElement(kr,{text:r.text})},kr=t=>{var{text:e,isTrailing:r=!1}=t,n=S.useRef(null),i=()=>"".concat(e??"").concat(r?`
`:""),[s]=S.useState(i);return nt(()=>{var o=i();n.current&&n.current.textContent!==o&&(n.current.textContent=o)}),I.createElement(As,{ref:n},s)},As=S.memo(S.forwardRef((t,e)=>I.createElement("span",{"data-slate-string":!0,ref:e},t.children))),Rt=t=>{var{length:e=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=t,i={"data-slate-zero-width":r?"n":"z","data-slate-length":e};return n&&(i["data-slate-mark-placeholder"]=!0),I.createElement("span",Object.assign({},i),!ge||!r?"\uFEFF":null,r?I.createElement("br",null):null)};function Ls(t,e){t.current&&(t.current.disconnect(),e&&(t.current=null))}function Dr(t){t.current&&(clearTimeout(t.current),t.current=null)}var Ws=t=>{var{leaf:e,isLast:r,text:n,parent:i,renderPlaceholder:s,renderLeaf:o=y=>I.createElement(js,Object.assign({},y))}=t,u=Ie(),v=S.useRef(null),c=S.useRef(null),[p,m]=S.useState(!1),g=S.useRef(null),b=S.useCallback(y=>{if(Ls(v,y==null),y==null){var B;Lt.delete(u),(B=e.onPlaceholderResize)===null||B===void 0||B.call(e,null)}else{if(Lt.set(u,y),!v.current){var A=window.ResizeObserver||Hi;v.current=new A(()=>{var L;(L=e.onPlaceholderResize)===null||L===void 0||L.call(e,y)})}v.current.observe(y),c.current=y}},[c,e,u]),f=I.createElement(Is,{isLast:r,leaf:e,parent:i,text:n}),a=e[$e];if(S.useEffect(()=>(a?g.current||(g.current=setTimeout(()=>{m(!0),g.current=null},300)):(Dr(g),m(!1)),()=>Dr(g)),[a,m]),a&&p){var O={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Xe?"inherit":void 0},contentEditable:!1,ref:b}};f=I.createElement(I.Fragment,null,s(O),f)}var C={"data-slate-leaf":!0};return o({attributes:C,children:f,leaf:e,text:n})},Ns=I.memo(Ws,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&ke.equals(e.leaf,t.leaf)&&e.leaf[$e]===t.leaf[$e]),js=t=>{var{attributes:e,children:r}=t;return I.createElement("span",Object.assign({},e),r)},zs=t=>{for(var{decorations:e,isLast:r,parent:n,renderPlaceholder:i,renderLeaf:s,text:o}=t,u=Ie(),v=S.useRef(null),c=ke.decorations(o,e),p=w.findKey(u,o),m=[],g=0;g<c.length;g++){var b=c[g];m.push(I.createElement(Ns,{isLast:r&&g===c.length-1,key:"".concat(p.id,"-").concat(g),renderPlaceholder:i,leaf:b,text:o,parent:n,renderLeaf:s}))}var f=S.useCallback(a=>{var O=Et.get(u);a?(O==null||O.set(p,a),ze.set(o,a),rt.set(a,o)):(O==null||O.delete(p),ze.delete(o),v.current&&rt.delete(v.current)),v.current=a},[v,u,p,o]);return I.createElement("span",{"data-slate-node":"text",ref:f},m)},hn=I.memo(zs,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Bs(e.decorations,t.decorations)),_s=t=>{var{decorations:e,element:r,renderElement:n=y=>I.createElement(Us,Object.assign({},y)),renderPlaceholder:i,renderLeaf:s,selection:o}=t,u=Ie(),v=Vs(),c=u.isInline(r),p=w.findKey(u,r),m=S.useCallback(y=>{var B=Et.get(u);y?(B==null||B.set(p,y),ze.set(r,y),rt.set(y,r)):(B==null||B.delete(p),ze.delete(r))},[u,p,r]),g=pn({decorations:e,node:r,renderElement:n,renderPlaceholder:i,renderLeaf:s,selection:o}),b={"data-slate-node":"element",ref:m};if(c&&(b["data-slate-inline"]=!0),!c&&h.hasInlines(u,r)){var f=ne.string(r),a=_r(f);a==="rtl"&&(b.dir=a)}if(h.isVoid(u,r)){b["data-slate-void"]=!0,!v&&c&&(b.contentEditable=!1);var O=c?"span":"div",[[C]]=ne.texts(r);g=I.createElement(O,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},I.createElement(hn,{renderPlaceholder:i,decorations:[],isLast:!1,parent:r,text:C})),Yt.set(C,0),Gt.set(C,r)}return n({attributes:b,children:g,element:r})},Hs=I.memo(_s,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&Rs(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&F.equals(t.selection,e.selection))),Us=t=>{var{attributes:e,children:r,element:n}=t,i=Ie(),s=i.isInline(n)?"span":"div";return I.createElement(s,Object.assign({},e,{style:{position:"relative"}}),r)},gn=S.createContext(()=>[]),qs=()=>S.useContext(gn),Ks=S.createContext(!1),pn=t=>{for(var{decorations:e,node:r,renderElement:n,renderPlaceholder:i,renderLeaf:s,selection:o}=t,u=qs(),v=Ie(),c=w.findPath(v,r),p=[],m=oe.isElement(r)&&!v.isInline(r)&&h.hasInlines(v,r),g=0;g<r.children.length;g++){var b=c.concat(g),f=r.children[g],a=w.findKey(v,f),O=h.range(v,b),C=o&&F.intersection(O,o),y=u([f,b]);for(var B of e){var A=F.intersection(B,O);A&&y.push(A)}oe.isElement(f)?p.push(I.createElement(Ks.Provider,{key:"provider-".concat(a.id),value:!!C},I.createElement(Hs,{decorations:y,element:f,key:a.id,renderElement:n,renderPlaceholder:i,renderLeaf:s,selection:C}))):p.push(I.createElement(hn,{decorations:y,key:a.id,isLast:m&&g===r.children.length-1,parent:r,renderPlaceholder:i,renderLeaf:s,text:f})),Yt.set(f,g),Gt.set(f,r)}return p},mn=S.createContext(!1),Vs=()=>S.useContext(mn),wn=S.createContext(null),bn=()=>{var t=S.useContext(wn);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e};function $s(){var t=Ie(),e=S.useRef(!1),r=S.useRef(0),n=S.useCallback(()=>{if(!e.current){e.current=!0;var i=w.getWindow(t);i.cancelAnimationFrame(r.current),r.current=i.requestAnimationFrame(()=>{e.current=!1})}},[t]);return S.useEffect(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:e,onUserInput:n}}var Ys=3,Gs={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Xs={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Zs={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},$=t=>{var e=Gs[t],r=Xs[t],n=Zs[t],i=e&&Pt(e),s=r&&Pt(r),o=n&&Pt(n);return u=>!!(i&&i(u)||Er&&s&&s(u)||!Er&&o&&o(u))},G={isBold:$("bold"),isCompose:$("compose"),isMoveBackward:$("moveBackward"),isMoveForward:$("moveForward"),isDeleteBackward:$("deleteBackward"),isDeleteForward:$("deleteForward"),isDeleteLineBackward:$("deleteLineBackward"),isDeleteLineForward:$("deleteLineForward"),isDeleteWordBackward:$("deleteWordBackward"),isDeleteWordForward:$("deleteWordForward"),isExtendBackward:$("extendBackward"),isExtendForward:$("extendForward"),isExtendLineBackward:$("extendLineBackward"),isExtendLineForward:$("extendLineForward"),isItalic:$("italic"),isMoveLineBackward:$("moveLineBackward"),isMoveLineForward:$("moveLineForward"),isMoveWordBackward:$("moveWordBackward"),isMoveWordForward:$("moveWordForward"),isRedo:$("redo"),isSoftBreak:$("insertSoftBreak"),isSplitBlock:$("splitBlock"),isTransposeCharacter:$("transposeCharacter"),isUndo:$("undo")},Js=(t,e)=>{var r=[],n=()=>{r=[]},i=o=>{if(e.current){var u=o.filter(v=>Jt(t,v,o));r.push(...u)}};function s(){r.length>0&&(r.reverse().forEach(o=>{o.type!=="characterData"&&(o.removedNodes.forEach(u=>{o.target.insertBefore(u,o.nextSibling)}),o.addedNodes.forEach(u=>{o.target.removeChild(u)}))}),n())}return{registerMutations:i,restoreDOM:s,clear:n}},Qs={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class yn extends S.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(r.current,Qs)}componentDidMount(){var{receivedUserInput:e}=this.props,r=this.context;this.manager=Js(r,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,r,n,i=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(i!=null&&i.length){var s;(s=this.manager)===null||s===void 0||s.registerMutations(i)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}yn.contextType=$t;var eo=ge?yn:t=>{var{children:e}=t;return I.createElement(I.Fragment,null,e)},to=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],ro=["text"];function Tr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function He(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tr(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var no=t=>I.createElement(I.Fragment,null,pn(t)),ao=t=>{var e=S.useCallback(d=>I.createElement(En,Object.assign({},d)),[]),{autoFocus:r,decorate:n=io,onDOMBeforeInput:i,placeholder:s,readOnly:o=!1,renderElement:u,renderLeaf:v,renderPlaceholder:c=e,scrollSelectionIntoView:p=so,style:m={},as:g="div",disableDefaultStyles:b=!1}=t,f=Ve(t,to),a=bn(),[O,C]=S.useState(!1),y=S.useRef(null),B=S.useRef([]),[A,L]=S.useState(),{onUserInput:W,receivedUserInput:K}=$s(),[,H]=S.useReducer(d=>d+1,0);sn.set(a,H),Nt.set(a,o);var T=S.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);S.useEffect(()=>{y.current&&r&&y.current.focus()},[r]);var z=S.useRef(),te=S.useMemo(()=>wi(()=>{var d=z.current;if((ge||!w.isComposing(a))&&(!T.isUpdatingSelection||d!=null&&d.isFlushing())&&!T.isDraggingInternally){var k=w.findDocumentOrShadowRoot(a),{activeElement:E}=k,x=w.toDOMNode(a,a),_=k.getSelection();if(E===x?(T.latestElement=E,Le.set(a,!0)):Le.delete(a),!_)return j.deselect(a);var{anchorNode:N,focusNode:U}=_,ee=w.hasEditableTarget(a,N)||w.isTargetInsideNonReadonlyVoid(a,N),X=w.hasEditableTarget(a,U)||w.isTargetInsideNonReadonlyVoid(a,U);if(ee&&X){var ae=w.toSlateRange(a,_,{exactMatch:!1,suppressThrow:!0});ae&&(!w.isComposing(a)&&!(d!=null&&d.hasPendingChanges())&&!(d!=null&&d.isFlushing())?j.select(a,ae):d==null||d.handleUserSelect(ae))}o&&(!ee||!X)&&j.deselect(a)}},100),[a,o,T]),M=S.useMemo(()=>di(te,0),[te]);z.current=Ts({node:y,onDOMSelectionChange:te,scheduleOnDOMSelectionChange:M}),nt(()=>{var d,k,E;y.current&&(E=Zt(y.current))?(an.set(a,E),mt.set(a,y.current),ze.set(a,y.current),rt.set(y.current,a)):ze.delete(a);var{selection:x}=a,_=w.findDocumentOrShadowRoot(a),N=_.getSelection();if(!(!N||!w.isFocused(a)||(d=z.current)!==null&&d!==void 0&&d.hasPendingAction())){var U=ve=>{var he=N.type!=="None";if(!(!x&&!he)){var ie=mt.get(a),Ee=!1;if(ie.contains(N.anchorNode)&&ie.contains(N.focusNode)&&(Ee=!0),he&&Ee&&x&&!ve){var Se=w.toSlateRange(a,N,{exactMatch:!0,suppressThrow:!0});if(Se&&F.equals(Se,x)){var me;if(!T.hasMarkPlaceholder)return;var{anchorNode:Me}=N;if(Me!=null&&(me=Me.parentElement)!==null&&me!==void 0&&me.hasAttribute("data-slate-mark-placeholder"))return}}if(x&&!w.hasRange(a,x)){a.selection=w.toSlateRange(a,N,{exactMatch:!1,suppressThrow:!0});return}T.isUpdatingSelection=!0;var V=x&&w.toDOMRange(a,x);return V?(F.isBackward(x)?N.setBaseAndExtent(V.endContainer,V.endOffset,V.startContainer,V.startOffset):N.setBaseAndExtent(V.startContainer,V.startOffset,V.endContainer,V.endOffset),p(a,V)):N.removeAllRanges(),V}},ee=U(),X=((k=z.current)===null||k===void 0?void 0:k.isFlushing())==="action";if(!ge||!X){setTimeout(()=>{if(ee&&wt){var ve=w.toDOMNode(a,a);ve.focus()}T.isUpdatingSelection=!1});return}var ae=null,de=requestAnimationFrame(()=>{if(X){var ve=he=>{try{var ie=w.toDOMNode(a,a);ie.focus(),U(he)}catch{}};ve(),ae=setTimeout(()=>{ve(!0),T.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(de),ae&&clearTimeout(ae)}}});var P=S.useCallback(d=>{if(W(),!o&&w.hasEditableTarget(a,d.target)&&!oo(d,i)){var k;if(z.current)return z.current.handleDOMBeforeInput(d);M.flush(),te.flush();var{selection:E}=a,{inputType:x}=d,_=d.dataTransfer||d.data||void 0,N=x==="insertCompositionText"||x==="deleteCompositionText";if(N&&w.isComposing(a))return;var U=!1;if(x==="insertText"&&E&&F.isCollapsed(E)&&d.data&&d.data.length===1&&/[a-z ]/i.test(d.data)&&E.anchor.offset!==0){var ee,X;U=!0,a.marks&&(U=!1);var{anchor:ae}=E,[de,ve]=w.toDOMPoint(a,ae),he=(ee=de.parentElement)===null||ee===void 0?void 0:ee.closest("a"),ie=w.getWindow(a);if(U&&he&&w.hasDOMNode(a,he)){var Ee,Se=ie==null?void 0:ie.document.createTreeWalker(he,NodeFilter.SHOW_TEXT).lastChild();Se===de&&((Ee=Se.textContent)===null||Ee===void 0?void 0:Ee.length)===ve&&(U=!1)}if(U&&de.parentElement&&(ie==null||(X=ie.getComputedStyle(de.parentElement))===null||X===void 0?void 0:X.whiteSpace)==="pre"){var me=h.above(a,{at:ae.path,match:at=>oe.isElement(at)&&h.isBlock(a,at)});me&&ne.string(me[0]).includes("	")&&(U=!1)}}if(!x.startsWith("delete")||x.startsWith("deleteBy")){var[Me]=d.getTargetRanges();if(Me){var V=w.toSlateRange(a,Me,{exactMatch:!1,suppressThrow:!1});if(!E||!F.equals(E,V)){U=!1;var _e=!N&&a.selection&&h.rangeRef(a,a.selection);j.select(a,V),_e&&et.set(a,_e)}}}if(N)return;if(U||d.preventDefault(),E&&F.isExpanded(E)&&x.startsWith("delete")){var St=x.endsWith("Backward")?"backward":"forward";h.deleteFragment(a,{direction:St});return}switch(x){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{h.deleteFragment(a);break}case"deleteContent":case"deleteContentForward":{h.deleteForward(a);break}case"deleteContentBackward":{h.deleteBackward(a);break}case"deleteEntireSoftLine":{h.deleteBackward(a,{unit:"line"}),h.deleteForward(a,{unit:"line"});break}case"deleteHardLineBackward":{h.deleteBackward(a,{unit:"block"});break}case"deleteSoftLineBackward":{h.deleteBackward(a,{unit:"line"});break}case"deleteHardLineForward":{h.deleteForward(a,{unit:"block"});break}case"deleteSoftLineForward":{h.deleteForward(a,{unit:"line"});break}case"deleteWordBackward":{h.deleteBackward(a,{unit:"word"});break}case"deleteWordForward":{h.deleteForward(a,{unit:"word"});break}case"insertLineBreak":h.insertSoftBreak(a);break;case"insertParagraph":{h.insertBreak(a);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{x==="insertFromComposition"&&w.isComposing(a)&&(C(!1),We.set(a,!1)),(_==null?void 0:_.constructor.name)==="DataTransfer"?w.insertData(a,_):typeof _=="string"&&(U?B.current.push(()=>h.insertText(a,_)):h.insertText(a,_));break}}var be=(k=et.get(a))===null||k===void 0?void 0:k.unref();et.delete(a),be&&(!a.selection||!F.equals(a.selection,be))&&j.select(a,be)}},[a,te,W,i,o,M]),R=S.useCallback(d=>{d==null?(te.cancel(),M.cancel(),mt.delete(a),ze.delete(a),y.current&&Fe&&y.current.removeEventListener("beforeinput",P)):Fe&&d.addEventListener("beforeinput",P),y.current=d},[te,M,a,P]);nt(()=>{var d=w.getWindow(a);return d.document.addEventListener("selectionchange",M),()=>{d.document.removeEventListener("selectionchange",M)}},[M]);var D=n([a,[]]),J=s&&a.children.length===1&&Array.from(ne.texts(a)).length===1&&ne.string(a)===""&&!O,Y=S.useCallback(d=>{if(d&&J){var k;L((k=d.getBoundingClientRect())===null||k===void 0?void 0:k.height)}else L(void 0)},[J]);if(J){var ce=h.start(a,[]);D.push({[$e]:!0,placeholder:s,onPlaceholderResize:Y,anchor:ce,focus:ce})}var{marks:Q}=a;if(T.hasMarkPlaceholder=!1,a.selection&&F.isCollapsed(a.selection)&&Q){var{anchor:re}=a.selection,ue=ne.leaf(a,re.path),fe=Ve(ue,ro);if(!ke.equals(ue,Q,{loose:!0})){T.hasMarkPlaceholder=!0;var Te=Object.fromEntries(Object.keys(fe).map(d=>[d,null]));D.push(He(He(He({[on]:!0},Te),Q),{},{anchor:re,focus:re}))}}return S.useEffect(()=>{setTimeout(()=>{var{selection:d}=a;if(d){var{anchor:k}=d,E=ne.leaf(a,k.path);if(Q&&!ke.equals(E,Q,{loose:!0})){we.set(a,Q);return}}we.delete(a)})}),I.createElement(mn.Provider,{value:o},I.createElement(gn.Provider,{value:n},I.createElement(eo,{node:y,receivedUserInput:K},I.createElement(g,Object.assign({role:o?void 0:"textbox","aria-multiline":o?void 0:!0},f,{spellCheck:Fe||!pt?f.spellCheck:!1,autoCorrect:Fe||!pt?f.autoCorrect:"false",autoCapitalize:Fe||!pt?f.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!o,zindex:-1,suppressContentEditableWarning:!0,ref:R,style:He(He({},b?{}:He({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},A?{minHeight:A}:{})),m),onBeforeInput:S.useCallback(d=>{if(!Fe&&!o&&!se(d,f.onBeforeInput)&&w.hasSelectableTarget(a,d.target)&&(d.preventDefault(),!w.isComposing(a))){var k=d.data;h.insertText(a,k)}},[f.onBeforeInput,a,o]),onInput:S.useCallback(d=>{if(!se(d,f.onInput)){if(z.current){z.current.handleInput();return}for(var k of B.current)k();B.current=[]}},[f.onInput]),onBlur:S.useCallback(d=>{if(!(o||T.isUpdatingSelection||!w.hasSelectableTarget(a,d.target)||se(d,f.onBlur))){var k=w.findDocumentOrShadowRoot(a);if(T.latestElement!==k.activeElement){var{relatedTarget:E}=d,x=w.toDOMNode(a,a);if(E!==x&&!(pe(E)&&E.hasAttribute("data-slate-spacer"))){if(E!=null&&Be(E)&&w.hasDOMNode(a,E)){var _=w.toSlateNode(a,E);if(oe.isElement(_)&&!a.isVoid(_))return}if(Xe){var N=k.getSelection();N==null||N.removeAllRanges()}Le.delete(a)}}}},[o,T.isUpdatingSelection,T.latestElement,a,f.onBlur]),onClick:S.useCallback(d=>{if(w.hasTarget(a,d.target)&&!se(d,f.onClick)&&Be(d.target)){var k=w.toSlateNode(a,d.target),E=w.findPath(a,k);if(!h.hasPath(a,E)||ne.get(a,E)!==k)return;if(d.detail===Ys&&E.length>=1){var x=E;if(!(oe.isElement(k)&&h.isBlock(a,k))){var _,N=h.above(a,{match:he=>oe.isElement(he)&&h.isBlock(a,he),at:E});x=(_=N==null?void 0:N[1])!==null&&_!==void 0?_:E.slice(0,1)}var U=h.range(a,x);j.select(a,U);return}if(o)return;var ee=h.start(a,E),X=h.end(a,E),ae=h.void(a,{at:ee}),de=h.void(a,{at:X});if(ae&&de&&q.equals(ae[1],de[1])){var ve=h.range(a,ee);j.select(a,ve)}}},[a,f.onClick,o]),onCompositionEnd:S.useCallback(d=>{if(w.hasSelectableTarget(a,d.target)){var k;if(w.isComposing(a)&&(C(!1),We.set(a,!1)),(k=z.current)===null||k===void 0||k.handleCompositionEnd(d),se(d,f.onCompositionEnd)||ge)return;if(!Xe&&!Qi&&!Gi&&!ts&&!es&&d.data){var E=we.get(a);we.delete(a),E!==void 0&&(Ce.set(a,a.marks),a.marks=E),h.insertText(a,d.data);var x=Ce.get(a);Ce.delete(a),x!==void 0&&(a.marks=x)}}},[f.onCompositionEnd,a]),onCompositionUpdate:S.useCallback(d=>{w.hasSelectableTarget(a,d.target)&&!se(d,f.onCompositionUpdate)&&(w.isComposing(a)||(C(!0),We.set(a,!0)))},[f.onCompositionUpdate,a]),onCompositionStart:S.useCallback(d=>{if(w.hasSelectableTarget(a,d.target)){var k;if((k=z.current)===null||k===void 0||k.handleCompositionStart(d),se(d,f.onCompositionStart)||ge)return;C(!0);var{selection:E}=a;if(E){if(F.isExpanded(E)){h.deleteFragment(a);return}var x=h.above(a,{match:U=>oe.isElement(U)&&h.isInline(a,U),mode:"highest"});if(x){var[,_]=x;if(h.isEnd(a,E.anchor,_)){var N=h.after(a,_);j.setSelection(a,{anchor:N,focus:N})}}}}},[f.onCompositionStart,a]),onCopy:S.useCallback(d=>{w.hasSelectableTarget(a,d.target)&&!se(d,f.onCopy)&&!Mr(d)&&(d.preventDefault(),w.setFragmentData(a,d.clipboardData,"copy"))},[f.onCopy,a]),onCut:S.useCallback(d=>{if(!o&&w.hasSelectableTarget(a,d.target)&&!se(d,f.onCut)&&!Mr(d)){d.preventDefault(),w.setFragmentData(a,d.clipboardData,"cut");var{selection:k}=a;if(k)if(F.isExpanded(k))h.deleteFragment(a);else{var E=ne.parent(a,k.anchor.path);h.isVoid(a,E)&&j.delete(a)}}},[o,a,f.onCut]),onDragOver:S.useCallback(d=>{if(w.hasTarget(a,d.target)&&!se(d,f.onDragOver)){var k=w.toSlateNode(a,d.target);oe.isElement(k)&&h.isVoid(a,k)&&d.preventDefault()}},[f.onDragOver,a]),onDragStart:S.useCallback(d=>{if(!o&&w.hasTarget(a,d.target)&&!se(d,f.onDragStart)){var k=w.toSlateNode(a,d.target),E=w.findPath(a,k),x=oe.isElement(k)&&h.isVoid(a,k)||h.void(a,{at:E,voids:!0});if(x){var _=h.range(a,E);j.select(a,_)}T.isDraggingInternally=!0,w.setFragmentData(a,d.dataTransfer,"drag")}},[o,a,f.onDragStart,T]),onDrop:S.useCallback(d=>{if(!o&&w.hasTarget(a,d.target)&&!se(d,f.onDrop)){d.preventDefault();var k=a.selection,E=w.findEventRange(a,d),x=d.dataTransfer;j.select(a,E),T.isDraggingInternally&&k&&!F.equals(k,E)&&!h.void(a,{at:E,voids:!0})&&j.delete(a,{at:k}),w.insertData(a,x),w.isFocused(a)||w.focus(a)}T.isDraggingInternally=!1},[o,a,f.onDrop,T]),onDragEnd:S.useCallback(d=>{!o&&T.isDraggingInternally&&f.onDragEnd&&w.hasTarget(a,d.target)&&f.onDragEnd(d),T.isDraggingInternally=!1},[o,T,f,a]),onFocus:S.useCallback(d=>{if(!o&&!T.isUpdatingSelection&&w.hasEditableTarget(a,d.target)&&!se(d,f.onFocus)){var k=w.toDOMNode(a,a),E=w.findDocumentOrShadowRoot(a);if(T.latestElement=E.activeElement,wt&&d.target!==k){k.focus();return}Le.set(a,!0)}},[o,T,a,f.onFocus]),onKeyDown:S.useCallback(d=>{if(!o&&w.hasEditableTarget(a,d.target)){var k;(k=z.current)===null||k===void 0||k.handleKeyDown(d);var{nativeEvent:E}=d;if(w.isComposing(a)&&E.isComposing===!1&&(We.set(a,!1),C(!1)),se(d,f.onKeyDown)||w.isComposing(a))return;var{selection:x}=a,_=a.children[x!==null?x.focus.path[0]:0],N=_r(ne.string(_))==="rtl";if(G.isRedo(E)){d.preventDefault();var U=a;typeof U.redo=="function"&&U.redo();return}if(G.isUndo(E)){d.preventDefault();var ee=a;typeof ee.undo=="function"&&ee.undo();return}if(G.isMoveLineBackward(E)){d.preventDefault(),j.move(a,{unit:"line",reverse:!0});return}if(G.isMoveLineForward(E)){d.preventDefault(),j.move(a,{unit:"line"});return}if(G.isExtendLineBackward(E)){d.preventDefault(),j.move(a,{unit:"line",edge:"focus",reverse:!0});return}if(G.isExtendLineForward(E)){d.preventDefault(),j.move(a,{unit:"line",edge:"focus"});return}if(G.isMoveBackward(E)){d.preventDefault(),x&&F.isCollapsed(x)?j.move(a,{reverse:!N}):j.collapse(a,{edge:"start"});return}if(G.isMoveForward(E)){d.preventDefault(),x&&F.isCollapsed(x)?j.move(a,{reverse:N}):j.collapse(a,{edge:"end"});return}if(G.isMoveWordBackward(E)){d.preventDefault(),x&&F.isExpanded(x)&&j.collapse(a,{edge:"focus"}),j.move(a,{unit:"word",reverse:!N});return}if(G.isMoveWordForward(E)){d.preventDefault(),x&&F.isExpanded(x)&&j.collapse(a,{edge:"focus"}),j.move(a,{unit:"word",reverse:N});return}if(Fe){if((nn||Xe)&&x&&(G.isDeleteBackward(E)||G.isDeleteForward(E))&&F.isCollapsed(x)){var X=ne.parent(a,x.anchor.path);if(oe.isElement(X)&&h.isVoid(a,X)&&(h.isInline(a,X)||h.isBlock(a,X))){d.preventDefault(),h.deleteBackward(a,{unit:"block"});return}}}else{if(G.isBold(E)||G.isItalic(E)||G.isTransposeCharacter(E)){d.preventDefault();return}if(G.isSoftBreak(E)){d.preventDefault(),h.insertSoftBreak(a);return}if(G.isSplitBlock(E)){d.preventDefault(),h.insertBreak(a);return}if(G.isDeleteBackward(E)){d.preventDefault(),x&&F.isExpanded(x)?h.deleteFragment(a,{direction:"backward"}):h.deleteBackward(a);return}if(G.isDeleteForward(E)){d.preventDefault(),x&&F.isExpanded(x)?h.deleteFragment(a,{direction:"forward"}):h.deleteForward(a);return}if(G.isDeleteLineBackward(E)){d.preventDefault(),x&&F.isExpanded(x)?h.deleteFragment(a,{direction:"backward"}):h.deleteBackward(a,{unit:"line"});return}if(G.isDeleteLineForward(E)){d.preventDefault(),x&&F.isExpanded(x)?h.deleteFragment(a,{direction:"forward"}):h.deleteForward(a,{unit:"line"});return}if(G.isDeleteWordBackward(E)){d.preventDefault(),x&&F.isExpanded(x)?h.deleteFragment(a,{direction:"backward"}):h.deleteBackward(a,{unit:"word"});return}if(G.isDeleteWordForward(E)){d.preventDefault(),x&&F.isExpanded(x)?h.deleteFragment(a,{direction:"forward"}):h.deleteForward(a,{unit:"word"});return}}}},[o,a,f.onKeyDown]),onPaste:S.useCallback(d=>{!o&&w.hasEditableTarget(a,d.target)&&!se(d,f.onPaste)&&(!Fe||as(d.nativeEvent)||Xe)&&(d.preventDefault(),w.insertData(a,d.clipboardData))},[o,a,f.onPaste])}),I.createElement(no,{decorations:D,node:a,renderElement:u,renderPlaceholder:c,renderLeaf:v,selection:a.selection})))))},En=t=>{var{attributes:e,children:r}=t;return I.createElement("span",Object.assign({},e),r,ge&&I.createElement("br",null))},io=()=>[],so=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&F.isCollapsed(t.selection))){var r=e.startContainer.parentElement;r.getBoundingClientRect=e.getBoundingClientRect.bind(e),Ei(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},se=(t,e)=>{if(!e)return!1;var r=e(t);return r??(t.isDefaultPrevented()||t.isPropagationStopped())},Mr=t=>Be(t.target)&&(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),oo=(t,e)=>{if(!e)return!1;var r=e(t);return r??t.defaultPrevented},lo=S.createContext(!1),co=S.createContext({});function uo(t){var e=S.useRef([]).current,r=S.useRef({editor:t}).current,n=S.useCallback(s=>{r.editor=s,e.forEach(o=>o(s))},[e,r]),i=S.useMemo(()=>({getSlate:()=>r.editor,addEventListener:s=>(e.push(s),()=>{e.splice(e.indexOf(s),1)})}),[e,r]);return{selectorContext:i,onChange:n}}var fo=["editor","children","onChange","value"],vo=t=>{var{editor:e,children:r,onChange:n,value:i}=t,s=Ve(t,fo),o=S.useRef(!1),[u,v]=I.useState(()=>{if(!ne.isNodeList(i))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(Ze.stringify(i)));if(!h.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(Ze.stringify(e)));return e.children=i,Object.assign(e,s),{v:0,editor:e}}),{selectorContext:c,onChange:p}=uo(e),m=S.useCallback(()=>{n&&n(e.children),v(f=>({v:f.v+1,editor:e})),p(e)},[e,p,n]);S.useEffect(()=>(jt.set(e,m),()=>{jt.set(e,()=>{}),o.current=!0}),[e,m]);var[g,b]=S.useState(w.isFocused(e));return S.useEffect(()=>{b(w.isFocused(e))},[e]),nt(()=>{var f=()=>b(w.isFocused(e));return Yi?(document.addEventListener("focusin",f),document.addEventListener("focusout",f),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",f)}):(document.addEventListener("focus",f,!0),document.addEventListener("blur",f,!0),()=>{document.removeEventListener("focus",f,!0),document.removeEventListener("blur",f,!0)})},[]),I.createElement(co.Provider,{value:c},I.createElement(wn.Provider,{value:u},I.createElement($t.Provider,{value:u.editor},I.createElement(lo.Provider,{value:g},r))))},Fr=(t,e)=>{var r=(e.top+e.bottom)/2;return t.top<=r&&t.bottom>=r},Pr=(t,e,r)=>{var n=w.toDOMRange(t,e).getBoundingClientRect(),i=w.toDOMRange(t,r).getBoundingClientRect();return Fr(n,i)&&Fr(i,n)},ho=(t,e)=>{var r=h.range(t,F.end(e)),n=Array.from(h.positions(t,{at:e})),i=0,s=n.length,o=Math.floor(s/2);if(Pr(t,h.range(t,n[i]),r))return h.range(t,n[i],r);if(n.length<2)return h.range(t,n[n.length-1],r);for(;o!==n.length&&o!==i;)Pr(t,h.range(t,n[o]),r)?s=o:i=o,o=Math.floor((i+s)/2);return h.range(t,n[s],r)};function Rr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Br(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rr(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var go=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e,{apply:i,onChange:s,deleteBackward:o,addMark:u,removeMark:v}=n;return Et.set(n,new WeakMap),n.addMark=(c,p)=>{var m,g;(m=Xt.get(n))===null||m===void 0||m(),!we.get(n)&&(g=le.get(n))!==null&&g!==void 0&&g.length&&we.set(n,null),Ce.delete(n),u(c,p)},n.removeMark=c=>{var p;!we.get(n)&&(p=le.get(n))!==null&&p!==void 0&&p.length&&we.set(n,null),Ce.delete(n),v(c)},n.deleteBackward=c=>{if(c!=="line")return o(c);if(n.selection&&F.isCollapsed(n.selection)){var p=h.above(n,{match:f=>oe.isElement(f)&&h.isBlock(n,f),at:n.selection});if(p){var[,m]=p,g=h.range(n,m,n.selection.anchor),b=ho(n,g);F.isCollapsed(b)||j.delete(n,{at:b})}}},n.apply=c=>{var p=[],m=le.get(n);if(m!=null&&m.length){var g=m.map(W=>ms(W,c)).filter(Boolean);le.set(n,g)}var b=Re.get(n);b&&Re.set(n,Or(n,b,c));var f=Pe.get(n);if(f!=null&&f.at){var a=Je.isPoint(f==null?void 0:f.at)?Ht(n,f.at,c):Or(n,f.at,c);Pe.set(n,a?Br(Br({},f),{},{at:a}):null)}switch(c.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{p.push(...vt(n,c.path));break}case"set_selection":{var O;(O=et.get(n))===null||O===void 0||O.unref(),et.delete(n);break}case"insert_node":case"remove_node":{p.push(...vt(n,q.parent(c.path)));break}case"merge_node":{var C=q.previous(c.path);p.push(...vt(n,C));break}case"move_node":{var y=q.common(q.parent(c.path),q.parent(c.newPath));p.push(...vt(n,y));break}}i(c);for(var[B,A]of p){var[L]=h.node(n,B);Wt.set(L,A)}},n.setFragmentData=c=>{var{selection:p}=n;if(p){var[m,g]=F.edges(p),b=h.void(n,{at:m.path}),f=h.void(n,{at:g.path});if(!(F.isCollapsed(p)&&!b)){var a=w.toDOMRange(n,p),O=a.cloneContents(),C=O.childNodes[0];if(O.childNodes.forEach(z=>{z.textContent&&z.textContent.trim()!==""&&(C=z)}),f){var[y]=f,B=a.cloneRange(),A=w.toDOMNode(n,y);B.setEndAfter(A),O=B.cloneContents()}if(b&&(C=O.querySelector("[data-slate-spacer]")),Array.from(O.querySelectorAll("[data-slate-zero-width]")).forEach(z=>{var te=z.getAttribute("data-slate-zero-width")==="n";z.textContent=te?`
`:""}),ln(C)){var L=C.ownerDocument.createElement("span");L.style.whiteSpace="pre",L.appendChild(C),O.appendChild(L),C=L}var W=n.getFragment(),K=JSON.stringify(W),H=window.btoa(encodeURIComponent(K));C.setAttribute("data-slate-fragment",H),c.setData("application/".concat(r),H);var T=O.ownerDocument.createElement("div");return T.appendChild(O),T.setAttribute("hidden","true"),O.ownerDocument.body.appendChild(T),c.setData("text/html",T.innerHTML),c.setData("text/plain",un(T)),O.ownerDocument.body.removeChild(T),c}}},n.insertData=c=>{n.insertFragmentData(c)||n.insertTextData(c)},n.insertFragmentData=c=>{var p=c.getData("application/".concat(r))||cs(c);if(p){var m=decodeURIComponent(window.atob(p)),g=JSON.parse(m);return n.insertFragment(g),!0}return!1},n.insertTextData=c=>{var p=c.getData("text/plain");if(p){var m=p.split(/\r\n|\r|\n/),g=!1;for(var b of m)g&&j.splitNodes(n,{always:!0}),n.insertText(b),g=!0;return!0}return!1},n.onChange=c=>{Pn.unstable_batchedUpdates(()=>{var p=jt.get(n);p&&p(),s(c)})},n},vt=(t,e)=>{var r=[];for(var[n,i]of h.levels(t,{at:e})){var s=w.findKey(t,n);r.push([i,s])}return r};const po=({suggestionState:{candidates:t,selection:e,rawInput:r},suggestionDispatch:n,inputStart:i,avro:s})=>{const o=bn(),{refs:u,floatingStyles:v}=Rn({placement:"bottom-start",middleware:[Bn(),In({boundary:document.querySelector("#slate-editor")??void 0}),An(({placement:c})=>({crossAxis:c.endsWith("start")?-9:0,mainAxis:3}))]});return S.useLayoutEffect(()=>{const{selection:c}=o,p=i;if(p!==null&&r!==""&&c!==null&&F.isCollapsed(c)){const{x:m,y:g,width:b,height:f}=w.toDOMRange(o,h.range(o,p,F.end(c))).getBoundingClientRect(),{scrollX:a,scrollY:O}=window;u.setReference({getBoundingClientRect:()=>DOMRectReadOnly.fromRect({x:m+a-window.scrollX,y:g+O-window.scrollY,width:b,height:f})})}else u.setReference(null)},[o,i,r,u]),u.reference.current!==null&&t.length>1?xe.jsxs("div",{ref:u.setFloating,style:v,className:"popper",children:[xe.jsx("div",{className:"px-2",children:r}),xe.jsx("ol",{className:"list-decimal list-inside p-px border-t dark:border-black lt-horizontal:flex lt-horizontal:flex-wrap",role:"listbox",children:t.map((c,p)=>{const m=()=>{On(o,i,c),s.commit(r,c),n({type:"clearSuggestion"}),w.focus(o)};return xe.jsx("li",{role:"option","aria-selected":p===e,className:Ln("px-2 py-px",p===e?"bg-green-300 dark:bg-rose-700":"hover:bg-green-200 dark:hover:bg-rose-600"),onClick:m,onKeyDown:({key:g})=>{g==="Enter"&&m()},children:c},c)})})]}):null},Sn={candidates:[],selection:null,rawInput:""},mo=(t,e)=>{switch(e.type){case"setSuggestion":{const{candidates:r,prevSelection:n,rawInput:i}=e.payload;if(r.length&&n in r)return{candidates:r,selection:n,rawInput:i};throw new Error("Invalid payload")}case"clearSuggestion":return Sn;case"selectNext":return{candidates:t.candidates,selection:t.candidates.length===0||t.selection===null?null:(t.selection+1)%t.candidates.length,rawInput:t.rawInput};case"selectPrevious":return{candidates:t.candidates,selection:t.candidates.length===0||t.selection===null?null:(t.selection||t.candidates.length)-1,rawInput:t.rawInput};default:throw new Error}},wo=({initialValue:t})=>{const e=S.useMemo(()=>oa(go(qn())),[]),r=Wn(Nn),n=jn(()=>new ia),i=zn(),[s,o]=S.useReducer(mo,Sn),u=S.useRef(null),v=S.useCallback(m=>{const{key:g}=m;if(!(!r||m.nativeEvent.isComposing||bo.has(g)||g==="Unidentified")){if(/^[^\P{ASCII} ]$/u.test(g)&&!(m.ctrlKey||m.altKey||m.metaKey)){m.preventDefault();const{selection:b}=e;b&&(F.isCollapsed(b)?n.ongoingInputSession||(u.current=F.start(b)):(j.insertText(e,""),u.current=F.start(b)));const f=n.getSuggestionForKey(g);o({type:"setSuggestion",payload:f});return}if(n.ongoingInputSession){if(s.candidates.length>1){const b=window.innerHeight<622;if(g===(b?"ArrowRight":"ArrowDown")||g==="Tab"||g==="n"&&m.ctrlKey){m.preventDefault(),o({type:"selectNext"});return}else if(g===(b?"ArrowLeft":"ArrowUp")||g==="p"&&m.ctrlKey){m.preventDefault(),o({type:"selectPrevious"});return}}switch(g){case"Backspace":{const b=n.getSuggestionForBackspace();b!==null?(m.preventDefault(),o({type:"setSuggestion",payload:b})):o({type:"clearSuggestion"});return}case"Enter":ht(n,s,m);break;default:ht(n,s)}}o({type:"clearSuggestion"})}},[n,e,r,s]),c=S.useCallback(()=>{s.selection!==null?n.commit(s.rawInput,s.candidates[s.selection]):n.closeInputSession(),o({type:"clearSuggestion"})},[n,s.candidates,s.rawInput,s.selection]),p=S.useCallback(m=>{if(!("detail"in m&&typeof m.detail=="string"))throw new Error("invalid event");const g=m.detail,b=g.match(/^{(.+)}$/);if(b!==null){switch(b[1]){case"backspace":{if(r&&n.ongoingInputSession){const a=n.getSuggestionForBackspace();if(a!==null){o({type:"setSuggestion",payload:a});return}else o({type:"clearSuggestion"})}const{selection:f}=e;f&&(F.isCollapsed(f)?e.deleteBackward("character"):e.deleteFragment()),w.focus(e);return}case"enter":e.insertBreak();break;case"space":e.insertText(" ");break;default:return}r&&n.ongoingInputSession&&ht(n,s),o({type:"clearSuggestion"}),w.focus(e)}else{if(r)if(/^[^\P{ASCII} ]$/u.test(g)){const{selection:f}=e;f&&(F.isCollapsed(f)?n.ongoingInputSession||(u.current=F.start(f)):(j.insertText(e,""),u.current=F.start(f)));const a=n.getSuggestionForKey(g);o({type:"setSuggestion",payload:a});return}else n.ongoingInputSession&&ht(n,s),o({type:"clearSuggestion"});e.selection&&(e.insertText(g),w.focus(e))}},[n,e,r,s]);return S.useEffect(()=>(window.addEventListener("virtual-keypress",p),()=>{window.removeEventListener("virtual-keypress",p)}),[p]),S.useEffect(()=>{w.isFocused(e)||(w.focus(e),j.select(e,h.range(e,h.end(e,[]))))},[e]),S.useEffect(()=>{s.selection!==null&&On(e,u.current,s.candidates[s.selection])},[e,s.candidates,s.selection]),xe.jsxs(vo,{editor:e,value:t,onChange:m=>{e.operations.some(b=>b.type!=="set_selection")&&(i(_n()),i(Hn(m)))},children:[xe.jsx(ao,{id:"slate-editor","aria-label":"slate",inputMode:"none",onKeyDown:v,onClick:c,placeholder:"Write Here",renderPlaceholder:m=>(m.attributes.style.opacity="0.54",xe.jsx(En,{...m})),className:"p-3 flex-grow md:max-h-screen overflow-y-auto"}),xe.jsx(Un,{children:r&&xe.jsx(po,{suggestionState:s,suggestionDispatch:o,inputStart:u.current,avro:n})})]})},On=(t,e,r)=>{const{selection:n}=t;e!==null&&n&&F.isCollapsed(n)&&(j.setSelection(t,{anchor:e}),j.insertText(t,r),w.focus(t))},ht=(t,{candidates:e,selection:r,rawInput:n},i)=>{r!==null?(i==null||i.preventDefault(),t.commit(n,e[r])):t.closeInputSession()},bo=new Set(["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","NumLock","OS","ScrollLock","Shift","Super","Symbol","SymbolLock"]),So=I.memo(wo);export{So as default,On as updatePreEdit};
